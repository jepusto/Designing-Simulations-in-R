<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 10 Project: Cronbach Alpha | Designing Monte Carlo Simulations in R</title>
  <meta name="description" content="A text on designing, implementing, and reporting on Monte Carlo simulation studies" />
  <meta name="generator" content="bookdown 0.43 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 10 Project: Cronbach Alpha | Designing Monte Carlo Simulations in R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="A text on designing, implementing, and reporting on Monte Carlo simulation studies" />
  <meta name="github-repo" content="jepusto/Designing-Simulations-in-R" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 10 Project: Cronbach Alpha | Designing Monte Carlo Simulations in R" />
  
  <meta name="twitter:description" content="A text on designing, implementing, and reporting on Monte Carlo simulation studies" />
  

<meta name="author" content="Luke W. Miratrix and James E. Pustejovsky (Equal authors)" />


<meta name="date" content="2025-07-31" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="performance-criteria.html"/>
<link rel="next" href="exp-design.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Designing Simulations in R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#license"><i class="fa fa-check"></i>License</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#about-the-authors"><i class="fa fa-check"></i>About the authors</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i>Acknowledgements</a></li>
</ul></li>
<li class="part"><span><b>I An Introductory Look</b></span></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#some-of-simulations-many-uses"><i class="fa fa-check"></i><b>1.1</b> Some of simulation’s many uses</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="introduction.html"><a href="introduction.html#comparing-statistical-approaches"><i class="fa fa-check"></i><b>1.1.1</b> Comparing statistical approaches</a></li>
<li class="chapter" data-level="1.1.2" data-path="introduction.html"><a href="introduction.html#assessing-performance-of-complex-pipelines"><i class="fa fa-check"></i><b>1.1.2</b> Assessing performance of complex pipelines</a></li>
<li class="chapter" data-level="1.1.3" data-path="introduction.html"><a href="introduction.html#assessing-performance-under-misspecification"><i class="fa fa-check"></i><b>1.1.3</b> Assessing performance under misspecification</a></li>
<li class="chapter" data-level="1.1.4" data-path="introduction.html"><a href="introduction.html#assessing-the-finite-sample-performance-of-a-statistical-approach"><i class="fa fa-check"></i><b>1.1.4</b> Assessing the finite-sample performance of a statistical approach</a></li>
<li class="chapter" data-level="1.1.5" data-path="introduction.html"><a href="introduction.html#conducting-power-analyses"><i class="fa fa-check"></i><b>1.1.5</b> Conducting Power Analyses</a></li>
<li class="chapter" data-level="1.1.6" data-path="introduction.html"><a href="introduction.html#simulating-processess"><i class="fa fa-check"></i><b>1.1.6</b> Simulating processess</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#the-perils-of-simulation-as-evidence"><i class="fa fa-check"></i><b>1.2</b> The perils of simulation as evidence</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#simulating-to-learn"><i class="fa fa-check"></i><b>1.3</b> Simulating to learn</a></li>
<li class="chapter" data-level="1.4" data-path="introduction.html"><a href="introduction.html#why-r"><i class="fa fa-check"></i><b>1.4</b> Why R?</a></li>
<li class="chapter" data-level="1.5" data-path="introduction.html"><a href="introduction.html#organization-of-the-text"><i class="fa fa-check"></i><b>1.5</b> Organization of the text</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="programming-preliminaries.html"><a href="programming-preliminaries.html"><i class="fa fa-check"></i><b>2</b> Programming Preliminaries</a>
<ul>
<li class="chapter" data-level="2.1" data-path="programming-preliminaries.html"><a href="programming-preliminaries.html#welcome-to-the-tidyverse"><i class="fa fa-check"></i><b>2.1</b> Welcome to the tidyverse</a></li>
<li class="chapter" data-level="2.2" data-path="programming-preliminaries.html"><a href="programming-preliminaries.html#functions"><i class="fa fa-check"></i><b>2.2</b> Functions</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="programming-preliminaries.html"><a href="programming-preliminaries.html#rolling-your-own"><i class="fa fa-check"></i><b>2.2.1</b> Rolling your own</a></li>
<li class="chapter" data-level="2.2.2" data-path="programming-preliminaries.html"><a href="programming-preliminaries.html#a-dangerous-function"><i class="fa fa-check"></i><b>2.2.2</b> A dangerous function</a></li>
<li class="chapter" data-level="2.2.3" data-path="programming-preliminaries.html"><a href="programming-preliminaries.html#using-named-arguments"><i class="fa fa-check"></i><b>2.2.3</b> Using Named Arguments</a></li>
<li class="chapter" data-level="2.2.4" data-path="programming-preliminaries.html"><a href="programming-preliminaries.html#argument-defaults"><i class="fa fa-check"></i><b>2.2.4</b> Argument Defaults</a></li>
<li class="chapter" data-level="2.2.5" data-path="programming-preliminaries.html"><a href="programming-preliminaries.html#function-skeletons"><i class="fa fa-check"></i><b>2.2.5</b> Function skeletons</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="programming-preliminaries.html"><a href="programming-preliminaries.html#pipe-dreams"><i class="fa fa-check"></i><b>2.3</b> <code>\&gt;</code> (Pipe) dreams</a></li>
<li class="chapter" data-level="2.4" data-path="programming-preliminaries.html"><a href="programming-preliminaries.html#recipes-versus-patterns"><i class="fa fa-check"></i><b>2.4</b> Recipes versus Patterns</a></li>
<li class="chapter" data-level="2.5" data-path="programming-preliminaries.html"><a href="programming-preliminaries.html#exercises"><i class="fa fa-check"></i><b>2.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="t-test-simulation.html"><a href="t-test-simulation.html"><i class="fa fa-check"></i><b>3</b> An initial simulation</a>
<ul>
<li class="chapter" data-level="3.1" data-path="t-test-simulation.html"><a href="t-test-simulation.html#simulating-a-single-scenario"><i class="fa fa-check"></i><b>3.1</b> Simulating a single scenario</a></li>
<li class="chapter" data-level="3.2" data-path="t-test-simulation.html"><a href="t-test-simulation.html#a-non-normal-population-distribution"><i class="fa fa-check"></i><b>3.2</b> A non-normal population distribution</a></li>
<li class="chapter" data-level="3.3" data-path="t-test-simulation.html"><a href="t-test-simulation.html#simulating-across-different-scenarios"><i class="fa fa-check"></i><b>3.3</b> Simulating across different scenarios</a></li>
<li class="chapter" data-level="3.4" data-path="t-test-simulation.html"><a href="t-test-simulation.html#extending-the-simulation-design"><i class="fa fa-check"></i><b>3.4</b> Extending the simulation design</a></li>
<li class="chapter" data-level="3.5" data-path="t-test-simulation.html"><a href="t-test-simulation.html#exercises-1"><i class="fa fa-check"></i><b>3.5</b> Exercises</a></li>
</ul></li>
<li class="part"><span><b>II Structure and Mechanics of a Simulation Study</b></span></li>
<li class="chapter" data-level="4" data-path="simulation-structure.html"><a href="simulation-structure.html"><i class="fa fa-check"></i><b>4</b> Structure of a simulation study</a>
<ul>
<li class="chapter" data-level="4.1" data-path="simulation-structure.html"><a href="simulation-structure.html#general-structure-of-a-simulation"><i class="fa fa-check"></i><b>4.1</b> General structure of a simulation</a></li>
<li class="chapter" data-level="4.2" data-path="simulation-structure.html"><a href="simulation-structure.html#tidy-modular-simulations"><i class="fa fa-check"></i><b>4.2</b> Tidy, modular simulations</a></li>
<li class="chapter" data-level="4.3" data-path="simulation-structure.html"><a href="simulation-structure.html#skeleton-of-a-simulation-study"><i class="fa fa-check"></i><b>4.3</b> Skeleton of a simulation study</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="simulation-structure.html"><a href="simulation-structure.html#data-generating-process"><i class="fa fa-check"></i><b>4.3.1</b> Data-Generating Process</a></li>
<li class="chapter" data-level="4.3.2" data-path="simulation-structure.html"><a href="simulation-structure.html#data-analysis-procedure"><i class="fa fa-check"></i><b>4.3.2</b> Data Analysis Procedure</a></li>
<li class="chapter" data-level="4.3.3" data-path="simulation-structure.html"><a href="simulation-structure.html#repetition"><i class="fa fa-check"></i><b>4.3.3</b> Repetition</a></li>
<li class="chapter" data-level="4.3.4" data-path="simulation-structure.html"><a href="simulation-structure.html#performance-summaries"><i class="fa fa-check"></i><b>4.3.4</b> Performance summaries</a></li>
<li class="chapter" data-level="4.3.5" data-path="simulation-structure.html"><a href="simulation-structure.html#multifactor-simulations"><i class="fa fa-check"></i><b>4.3.5</b> Multifactor simulations</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="simulation-structure.html"><a href="simulation-structure.html#exercises-2"><i class="fa fa-check"></i><b>4.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="case-ANOVA.html"><a href="case-ANOVA.html"><i class="fa fa-check"></i><b>5</b> Case Study: Heteroskedastic ANOVA</a>
<ul>
<li class="chapter" data-level="5.1" data-path="case-ANOVA.html"><a href="case-ANOVA.html#case-anova-DGP"><i class="fa fa-check"></i><b>5.1</b> The data-generating model</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="case-ANOVA.html"><a href="case-ANOVA.html#now-make-a-function"><i class="fa fa-check"></i><b>5.1.1</b> Now make a function</a></li>
<li class="chapter" data-level="5.1.2" data-path="case-ANOVA.html"><a href="case-ANOVA.html#cautious-coding"><i class="fa fa-check"></i><b>5.1.2</b> Cautious coding</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="case-ANOVA.html"><a href="case-ANOVA.html#the-hypothesis-testing-procedures"><i class="fa fa-check"></i><b>5.2</b> The hypothesis testing procedures</a></li>
<li class="chapter" data-level="5.3" data-path="case-ANOVA.html"><a href="case-ANOVA.html#running-the-simulation"><i class="fa fa-check"></i><b>5.3</b> Running the simulation</a></li>
<li class="chapter" data-level="5.4" data-path="case-ANOVA.html"><a href="case-ANOVA.html#summarizing-test-performance"><i class="fa fa-check"></i><b>5.4</b> Summarizing test performance</a></li>
<li class="chapter" data-level="5.5" data-path="case-ANOVA.html"><a href="case-ANOVA.html#exAnovaExercises"><i class="fa fa-check"></i><b>5.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="data-generating-processes.html"><a href="data-generating-processes.html"><i class="fa fa-check"></i><b>6</b> Data-generating processes</a>
<ul>
<li class="chapter" data-level="6.1" data-path="data-generating-processes.html"><a href="data-generating-processes.html#DGP-examples"><i class="fa fa-check"></i><b>6.1</b> Examples</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="data-generating-processes.html"><a href="data-generating-processes.html#ANOVA-example"><i class="fa fa-check"></i><b>6.1.1</b> Example 1: One-way analysis of variance</a></li>
<li class="chapter" data-level="6.1.2" data-path="data-generating-processes.html"><a href="data-generating-processes.html#BVPois-example"><i class="fa fa-check"></i><b>6.1.2</b> Example 2: Bivariate Poisson model</a></li>
<li class="chapter" data-level="6.1.3" data-path="data-generating-processes.html"><a href="data-generating-processes.html#CRT-example"><i class="fa fa-check"></i><b>6.1.3</b> Example 3: Hierarchical linear model for a cluster-randomized trial</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="data-generating-processes.html"><a href="data-generating-processes.html#components-of-a-dgp"><i class="fa fa-check"></i><b>6.2</b> Components of a DGP</a></li>
<li class="chapter" data-level="6.3" data-path="data-generating-processes.html"><a href="data-generating-processes.html#DGP-functions"><i class="fa fa-check"></i><b>6.3</b> A statistical model is a recipe for data generation</a></li>
<li class="chapter" data-level="6.4" data-path="data-generating-processes.html"><a href="data-generating-processes.html#DGP-plotting"><i class="fa fa-check"></i><b>6.4</b> Plot the artificial data</a></li>
<li class="chapter" data-level="6.5" data-path="data-generating-processes.html"><a href="data-generating-processes.html#check-the-data-generating-function"><i class="fa fa-check"></i><b>6.5</b> Check the data-generating function</a></li>
<li class="chapter" data-level="6.6" data-path="data-generating-processes.html"><a href="data-generating-processes.html#case-cluster"><i class="fa fa-check"></i><b>6.6</b> Example: Simulating clustered data</a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="data-generating-processes.html"><a href="data-generating-processes.html#a-design-decision-what-do-we-want-to-manipulate"><i class="fa fa-check"></i><b>6.6.1</b> A design decision: What do we want to manipulate?</a></li>
<li class="chapter" data-level="6.6.2" data-path="data-generating-processes.html"><a href="data-generating-processes.html#a-model-for-a-cluster-rct"><i class="fa fa-check"></i><b>6.6.2</b> A model for a cluster RCT</a></li>
<li class="chapter" data-level="6.6.3" data-path="data-generating-processes.html"><a href="data-generating-processes.html#from-equations-to-code"><i class="fa fa-check"></i><b>6.6.3</b> From equations to code</a></li>
<li class="chapter" data-level="6.6.4" data-path="data-generating-processes.html"><a href="data-generating-processes.html#DGP-standardization"><i class="fa fa-check"></i><b>6.6.4</b> Standardization in the DGP</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="data-generating-processes.html"><a href="data-generating-processes.html#three-parameter-IRT"><i class="fa fa-check"></i><b>6.7</b> Sometimes a DGP is all you need</a></li>
<li class="chapter" data-level="6.8" data-path="data-generating-processes.html"><a href="data-generating-processes.html#more-to-explore"><i class="fa fa-check"></i><b>6.8</b> More to explore</a></li>
<li class="chapter" data-level="6.9" data-path="data-generating-processes.html"><a href="data-generating-processes.html#exercises-3"><i class="fa fa-check"></i><b>6.9</b> Exercises</a>
<ul>
<li class="chapter" data-level="6.9.1" data-path="data-generating-processes.html"><a href="data-generating-processes.html#Welch-t-dgp"><i class="fa fa-check"></i><b>6.9.1</b> The Welch test on a shifted-and-scaled <span class="math inline">\(t\)</span> distribution</a></li>
<li class="chapter" data-level="6.9.2" data-path="data-generating-processes.html"><a href="data-generating-processes.html#plot-the-bivariate-poisson"><i class="fa fa-check"></i><b>6.9.2</b> Plot the bivariate Poisson</a></li>
<li class="chapter" data-level="6.9.3" data-path="data-generating-processes.html"><a href="data-generating-processes.html#BVP-check"><i class="fa fa-check"></i><b>6.9.3</b> Check the bivariate Poisson function</a></li>
<li class="chapter" data-level="6.9.4" data-path="data-generating-processes.html"><a href="data-generating-processes.html#BVP-error"><i class="fa fa-check"></i><b>6.9.4</b> Add error-catching to the bivariate Poisson function</a></li>
<li class="chapter" data-level="6.9.5" data-path="data-generating-processes.html"><a href="data-generating-processes.html#BVNB1"><i class="fa fa-check"></i><b>6.9.5</b> A bivariate negative binomial distribution</a></li>
<li class="chapter" data-level="6.9.6" data-path="data-generating-processes.html"><a href="data-generating-processes.html#BVNB2"><i class="fa fa-check"></i><b>6.9.6</b> Another bivariate negative binomial distribution</a></li>
<li class="chapter" data-level="6.9.7" data-path="data-generating-processes.html"><a href="data-generating-processes.html#cluster-RCT-plot"><i class="fa fa-check"></i><b>6.9.7</b> Plot the data from a cluster-randomized trial</a></li>
<li class="chapter" data-level="6.9.8" data-path="data-generating-processes.html"><a href="data-generating-processes.html#cluster-RCT-checks"><i class="fa fa-check"></i><b>6.9.8</b> Checking the Cluster RCT DGP</a></li>
<li class="chapter" data-level="6.9.9" data-path="data-generating-processes.html"><a href="data-generating-processes.html#cluster-RCT-heterogeneity"><i class="fa fa-check"></i><b>6.9.9</b> More school-level variation</a></li>
<li class="chapter" data-level="6.9.10" data-path="data-generating-processes.html"><a href="data-generating-processes.html#cluster-RCT-baseline"><i class="fa fa-check"></i><b>6.9.10</b> Cluster-randomized trial with baseline predictors</a></li>
<li class="chapter" data-level="6.9.11" data-path="data-generating-processes.html"><a href="data-generating-processes.html#IRT-DGP-parameters"><i class="fa fa-check"></i><b>6.9.11</b> 3-parameter IRT datasets</a></li>
<li class="chapter" data-level="6.9.12" data-path="data-generating-processes.html"><a href="data-generating-processes.html#IRT-DGP-checking"><i class="fa fa-check"></i><b>6.9.12</b> Check the 3-parameter IRT DGP</a></li>
<li class="chapter" data-level="6.9.13" data-path="data-generating-processes.html"><a href="data-generating-processes.html#IRT-DGP-breaking"><i class="fa fa-check"></i><b>6.9.13</b> Explore the 3-parameter IRT model</a></li>
<li class="chapter" data-level="6.9.14" data-path="data-generating-processes.html"><a href="data-generating-processes.html#meta-regression-DGP"><i class="fa fa-check"></i><b>6.9.14</b> Random effects meta-regression</a></li>
<li class="chapter" data-level="6.9.15" data-path="data-generating-processes.html"><a href="data-generating-processes.html#Vevea-Hedges-DGP"><i class="fa fa-check"></i><b>6.9.15</b> Meta-regression with selective reporting</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="data-analysis-procedures.html"><a href="data-analysis-procedures.html"><i class="fa fa-check"></i><b>7</b> Data analysis procedures</a>
<ul>
<li class="chapter" data-level="7.1" data-path="data-analysis-procedures.html"><a href="data-analysis-procedures.html#estimation-functions"><i class="fa fa-check"></i><b>7.1</b> Writing estimation functions</a></li>
<li class="chapter" data-level="7.2" data-path="data-analysis-procedures.html"><a href="data-analysis-procedures.html#multiple-estimation-procedures"><i class="fa fa-check"></i><b>7.2</b> Including Multiple Data Analysis Procedures</a></li>
<li class="chapter" data-level="7.3" data-path="data-analysis-procedures.html"><a href="data-analysis-procedures.html#validating-an-estimation-function"><i class="fa fa-check"></i><b>7.3</b> Validating an Estimation Function</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="data-analysis-procedures.html"><a href="data-analysis-procedures.html#checking-against-existing-implementations"><i class="fa fa-check"></i><b>7.3.1</b> Checking against existing implementations</a></li>
<li class="chapter" data-level="7.3.2" data-path="data-analysis-procedures.html"><a href="data-analysis-procedures.html#checking-novel-procedures"><i class="fa fa-check"></i><b>7.3.2</b> Checking novel procedures</a></li>
<li class="chapter" data-level="7.3.3" data-path="data-analysis-procedures.html"><a href="data-analysis-procedures.html#checking-with-simulations"><i class="fa fa-check"></i><b>7.3.3</b> Checking with simulations</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="data-analysis-procedures.html"><a href="data-analysis-procedures.html#handling-errors-warnings-and-other-hiccups"><i class="fa fa-check"></i><b>7.4</b> Handling errors, warnings, and other hiccups</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="data-analysis-procedures.html"><a href="data-analysis-procedures.html#capturing-errors-and-warnings"><i class="fa fa-check"></i><b>7.4.1</b> Capturing errors and warnings</a></li>
<li class="chapter" data-level="7.4.2" data-path="data-analysis-procedures.html"><a href="data-analysis-procedures.html#adapting-for-errors"><i class="fa fa-check"></i><b>7.4.2</b> Adapting estimation procedures for errors and warnings</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="data-analysis-procedures.html"><a href="data-analysis-procedures.html#exercises-4"><i class="fa fa-check"></i><b>7.5</b> Exercises</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="data-analysis-procedures.html"><a href="data-analysis-procedures.html#BFFs-forever"><i class="fa fa-check"></i><b>7.5.1</b> More Heteroskedastic ANOVA</a></li>
<li class="chapter" data-level="7.5.2" data-path="data-analysis-procedures.html"><a href="data-analysis-procedures.html#contingent-testing"><i class="fa fa-check"></i><b>7.5.2</b> Contingent testing</a></li>
<li class="chapter" data-level="7.5.3" data-path="data-analysis-procedures.html"><a href="data-analysis-procedures.html#cross-check-CRT-estimators"><i class="fa fa-check"></i><b>7.5.3</b> Check the cluster-RCT functions</a></li>
<li class="chapter" data-level="7.5.4" data-path="data-analysis-procedures.html"><a href="data-analysis-procedures.html#CRT-ANCOVA-estimators"><i class="fa fa-check"></i><b>7.5.4</b> Extending the cluster-RCT functions</a></li>
<li class="chapter" data-level="7.5.5" data-path="data-analysis-procedures.html"><a href="data-analysis-procedures.html#contingent-estimator-processing"><i class="fa fa-check"></i><b>7.5.5</b> Contingent estimator processing</a></li>
<li class="chapter" data-level="7.5.6" data-path="data-analysis-procedures.html"><a href="data-analysis-procedures.html#IRT-3PL-estimation"><i class="fa fa-check"></i><b>7.5.6</b> Estimating 3-parameter item response theory models</a></li>
<li class="chapter" data-level="7.5.7" data-path="data-analysis-procedures.html"><a href="data-analysis-procedures.html#Vevea-Hedges-estimation"><i class="fa fa-check"></i><b>7.5.7</b> Meta-regression with selective reporting</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="running-the-simulation-process.html"><a href="running-the-simulation-process.html"><i class="fa fa-check"></i><b>8</b> Running the Simulation Process</a>
<ul>
<li class="chapter" data-level="8.1" data-path="running-the-simulation-process.html"><a href="running-the-simulation-process.html#repeating-oneself"><i class="fa fa-check"></i><b>8.1</b> Repeating oneself</a></li>
<li class="chapter" data-level="8.2" data-path="running-the-simulation-process.html"><a href="running-the-simulation-process.html#one-run-at-a-time"><i class="fa fa-check"></i><b>8.2</b> One run at a time</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="running-the-simulation-process.html"><a href="running-the-simulation-process.html#one-run-reparameterization"><i class="fa fa-check"></i><b>8.2.1</b> Reparameterizing</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="running-the-simulation-process.html"><a href="running-the-simulation-process.html#bundle-sim-demo"><i class="fa fa-check"></i><b>8.3</b> Bundling simulations with <code>simhelpers</code></a></li>
<li class="chapter" data-level="8.4" data-path="running-the-simulation-process.html"><a href="running-the-simulation-process.html#seeds-and-pseudo-RNGs"><i class="fa fa-check"></i><b>8.4</b> Seeds and pseudo-random number generators</a></li>
<li class="chapter" data-level="8.5" data-path="running-the-simulation-process.html"><a href="running-the-simulation-process.html#exercises-5"><i class="fa fa-check"></i><b>8.5</b> Exercises</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="running-the-simulation-process.html"><a href="running-the-simulation-process.html#Welch-simulation"><i class="fa fa-check"></i><b>8.5.1</b> Welch simulations</a></li>
<li class="chapter" data-level="8.5.2" data-path="running-the-simulation-process.html"><a href="running-the-simulation-process.html#Pearson-sampling-distributions"><i class="fa fa-check"></i><b>8.5.2</b> Compare sampling distributions of Pearson’s correlation coefficients</a></li>
<li class="chapter" data-level="8.5.3" data-path="running-the-simulation-process.html"><a href="running-the-simulation-process.html#reparameterization-redux"><i class="fa fa-check"></i><b>8.5.3</b> Reparameterization, redux</a></li>
<li class="chapter" data-level="8.5.4" data-path="running-the-simulation-process.html"><a href="running-the-simulation-process.html#fancy-cluster-RCT-sims"><i class="fa fa-check"></i><b>8.5.4</b> Fancy clustered RCT simulations</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="performance-criteria.html"><a href="performance-criteria.html"><i class="fa fa-check"></i><b>9</b> Performance criteria</a>
<ul>
<li class="chapter" data-level="9.1" data-path="performance-criteria.html"><a href="performance-criteria.html#different-kinds-of-performance"><i class="fa fa-check"></i><b>9.1</b> Different kinds of performance</a></li>
<li class="chapter" data-level="9.2" data-path="performance-criteria.html"><a href="performance-criteria.html#assessing-a-point-estimator"><i class="fa fa-check"></i><b>9.2</b> Assessing a Point Estimator</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="performance-criteria.html"><a href="performance-criteria.html#comparing-the-performances-of-the-cluster-rct-estimation-procedures"><i class="fa fa-check"></i><b>9.2.1</b> Comparing the Performances of the Cluster RCT Estimation Procedures</a></li>
<li class="chapter" data-level="9.2.2" data-path="performance-criteria.html"><a href="performance-criteria.html#estimands-not-represented-by-a-parameter"><i class="fa fa-check"></i><b>9.2.2</b> Estimands Not Represented By a Parameter</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="performance-criteria.html"><a href="performance-criteria.html#assessing-a-standard-error-estimator"><i class="fa fa-check"></i><b>9.3</b> Assessing a Standard Error Estimator</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="performance-criteria.html"><a href="performance-criteria.html#why-not-assess-the-estimated-se-directly"><i class="fa fa-check"></i><b>9.3.1</b> Why Not Assess the Estimated SE directly?</a></li>
<li class="chapter" data-level="9.3.2" data-path="performance-criteria.html"><a href="performance-criteria.html#assessing-ses-for-our-cluster-rct-simulation"><i class="fa fa-check"></i><b>9.3.2</b> Assessing SEs for Our Cluster RCT Simulation</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="performance-criteria.html"><a href="performance-criteria.html#assessing-an-inferential-procedure-hypothesis-testing"><i class="fa fa-check"></i><b>9.4</b> Assessing an Inferential Procedure (Hypothesis Testing)</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="performance-criteria.html"><a href="performance-criteria.html#validity"><i class="fa fa-check"></i><b>9.4.1</b> Validity</a></li>
<li class="chapter" data-level="9.4.2" data-path="performance-criteria.html"><a href="performance-criteria.html#power"><i class="fa fa-check"></i><b>9.4.2</b> Power</a></li>
<li class="chapter" data-level="9.4.3" data-path="performance-criteria.html"><a href="performance-criteria.html#the-rejection-rate"><i class="fa fa-check"></i><b>9.4.3</b> The Rejection Rate</a></li>
<li class="chapter" data-level="9.4.4" data-path="performance-criteria.html"><a href="performance-criteria.html#inference-in-our-cluster-rct-simulation"><i class="fa fa-check"></i><b>9.4.4</b> Inference in our Cluster RCT Simulation</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="performance-criteria.html"><a href="performance-criteria.html#assessing-confidence-intervals"><i class="fa fa-check"></i><b>9.5</b> Assessing Confidence Intervals</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="performance-criteria.html"><a href="performance-criteria.html#confidence-intervals-in-our-cluster-rct-example"><i class="fa fa-check"></i><b>9.5.1</b> Confidence Intervals in our Cluster RCT Example</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="performance-criteria.html"><a href="performance-criteria.html#additional-thoughts-on-measuring-performance"><i class="fa fa-check"></i><b>9.6</b> Additional Thoughts on Measuring Performance</a>
<ul>
<li class="chapter" data-level="9.6.1" data-path="performance-criteria.html"><a href="performance-criteria.html#sec-relative-performance"><i class="fa fa-check"></i><b>9.6.1</b> Selecting Relative vs. Absolute Criteria</a></li>
<li class="chapter" data-level="9.6.2" data-path="performance-criteria.html"><a href="performance-criteria.html#robust-measures-of-performance"><i class="fa fa-check"></i><b>9.6.2</b> Robust Measures of Performance</a></li>
<li class="chapter" data-level="9.6.3" data-path="performance-criteria.html"><a href="performance-criteria.html#summary-of-peformance-measures"><i class="fa fa-check"></i><b>9.6.3</b> Summary of Peformance Measures</a></li>
</ul></li>
<li class="chapter" data-level="9.7" data-path="performance-criteria.html"><a href="performance-criteria.html#uncertainty-in-performance-estimates-the-monte-carlo-standard-error"><i class="fa fa-check"></i><b>9.7</b> Uncertainty in Performance Estimates (the Monte Carlo Standard Error)</a>
<ul>
<li class="chapter" data-level="9.7.1" data-path="performance-criteria.html"><a href="performance-criteria.html#mcse-for-relative-variance-estimators"><i class="fa fa-check"></i><b>9.7.1</b> MCSE for Relative Variance Estimators</a></li>
<li class="chapter" data-level="9.7.2" data-path="performance-criteria.html"><a href="performance-criteria.html#calculating-mcses-with-the-simhelpers-package"><i class="fa fa-check"></i><b>9.7.2</b> Calculating MCSEs With the <code>simhelpers</code> Package</a></li>
<li class="chapter" data-level="9.7.3" data-path="performance-criteria.html"><a href="performance-criteria.html#mcse-calculation-in-our-cluster-rct-example"><i class="fa fa-check"></i><b>9.7.3</b> MCSE Calculation in our Cluster RCT Example</a></li>
</ul></li>
<li class="chapter" data-level="9.8" data-path="performance-criteria.html"><a href="performance-criteria.html#exercises-6"><i class="fa fa-check"></i><b>9.8</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="case_Cronbach.html"><a href="case_Cronbach.html"><i class="fa fa-check"></i><b>10</b> Project: Cronbach Alpha</a>
<ul>
<li class="chapter" data-level="10.1" data-path="case_Cronbach.html"><a href="case_Cronbach.html#background"><i class="fa fa-check"></i><b>10.1</b> Background</a></li>
<li class="chapter" data-level="10.2" data-path="case_Cronbach.html"><a href="case_Cronbach.html#getting-started"><i class="fa fa-check"></i><b>10.2</b> Getting started</a></li>
<li class="chapter" data-level="10.3" data-path="case_Cronbach.html"><a href="case_Cronbach.html#the-data-generating-function"><i class="fa fa-check"></i><b>10.3</b> The data-generating function</a></li>
<li class="chapter" data-level="10.4" data-path="case_Cronbach.html"><a href="case_Cronbach.html#the-estimation-function"><i class="fa fa-check"></i><b>10.4</b> The estimation function</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="case_Cronbach.html"><a href="case_Cronbach.html#exercises-naive-confidence-intervals"><i class="fa fa-check"></i><b>10.4.1</b> Exercises (Naive confidence intervals)</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="case_Cronbach.html"><a href="case_Cronbach.html#estimator-performance"><i class="fa fa-check"></i><b>10.5</b> Estimator performance</a>
<ul>
<li class="chapter" data-level="10.5.1" data-path="case_Cronbach.html"><a href="case_Cronbach.html#exercises-calculating-performance"><i class="fa fa-check"></i><b>10.5.1</b> Exercises (Calculating Performance)</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="case_Cronbach.html"><a href="case_Cronbach.html#replication-and-the-simulation"><i class="fa fa-check"></i><b>10.6</b> Replication (and the simulation)</a></li>
<li class="chapter" data-level="10.7" data-path="case_Cronbach.html"><a href="case_Cronbach.html#extension-confidence-interval-coverage"><i class="fa fa-check"></i><b>10.7</b> Extension: Confidence interval coverage</a></li>
<li class="chapter" data-level="10.8" data-path="case_Cronbach.html"><a href="case_Cronbach.html#a-taste-of-multiple-scenarios"><i class="fa fa-check"></i><b>10.8</b> A taste of multiple scenarios</a>
<ul>
<li class="chapter" data-level="10.8.1" data-path="case_Cronbach.html"><a href="case_Cronbach.html#exercises-7"><i class="fa fa-check"></i><b>10.8.1</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III Multifactor Simulations</b></span></li>
<li class="chapter" data-level="11" data-path="exp-design.html"><a href="exp-design.html"><i class="fa fa-check"></i><b>11</b> Designing the multifactor simulation experiment</a>
<ul>
<li class="chapter" data-level="11.1" data-path="exp-design.html"><a href="exp-design.html#choosing-parameter-combinations"><i class="fa fa-check"></i><b>11.1</b> Choosing parameter combinations</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="exp-design.html"><a href="exp-design.html#choosing-parameters-for-the-clustered-rct"><i class="fa fa-check"></i><b>11.1.1</b> Choosing parameters for the Clustered RCT</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="exp-design.html"><a href="exp-design.html#using-pmap-to-run-multifactor-simulations"><i class="fa fa-check"></i><b>11.2</b> Using pmap to run multifactor simulations</a></li>
<li class="chapter" data-level="11.3" data-path="exp-design.html"><a href="exp-design.html#when-to-aggregate-results-across-multiple-simulations"><i class="fa fa-check"></i><b>11.3</b> When to aggregate results across multiple simulations</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="exp-design.html"><a href="exp-design.html#aggregate-as-you-simulate-inside"><i class="fa fa-check"></i><b>11.3.1</b> Aggregate as you simulate (inside)</a></li>
<li class="chapter" data-level="11.3.2" data-path="exp-design.html"><a href="exp-design.html#keep-all-simulation-runs-outside"><i class="fa fa-check"></i><b>11.3.2</b> Keep all simulation runs (outside)</a></li>
<li class="chapter" data-level="11.3.3" data-path="exp-design.html"><a href="exp-design.html#getting-raw-results-ready-for-analysis"><i class="fa fa-check"></i><b>11.3.3</b> Getting raw results ready for analysis</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="exp-design.html"><a href="exp-design.html#running-the-cluster-rct-multifactor-experiment"><i class="fa fa-check"></i><b>11.4</b> Running the Cluster RCT multifactor experiment</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="exp-design.html"><a href="exp-design.html#making-analyze_data-quiet"><i class="fa fa-check"></i><b>11.4.1</b> Making analyze_data() quiet</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="analyzing-the-multifactor-experiment.html"><a href="analyzing-the-multifactor-experiment.html"><i class="fa fa-check"></i><b>12</b> Analyzing the multifactor experiment</a>
<ul>
<li class="chapter" data-level="12.1" data-path="analyzing-the-multifactor-experiment.html"><a href="analyzing-the-multifactor-experiment.html#ways-of-analyzing-simulation-results"><i class="fa fa-check"></i><b>12.1</b> Ways of analyzing simulation results</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="analyzing-the-multifactor-experiment.html"><a href="analyzing-the-multifactor-experiment.html#plot-everything-with-many-small-multiples"><i class="fa fa-check"></i><b>12.1.1</b> Plot everything with many small multiples</a></li>
<li class="chapter" data-level="12.1.2" data-path="analyzing-the-multifactor-experiment.html"><a href="analyzing-the-multifactor-experiment.html#bundling"><i class="fa fa-check"></i><b>12.1.2</b> Bundling</a></li>
<li class="chapter" data-level="12.1.3" data-path="analyzing-the-multifactor-experiment.html"><a href="analyzing-the-multifactor-experiment.html#aggregation"><i class="fa fa-check"></i><b>12.1.3</b> Aggregation</a></li>
<li class="chapter" data-level="12.1.4" data-path="analyzing-the-multifactor-experiment.html"><a href="analyzing-the-multifactor-experiment.html#regression-summarization"><i class="fa fa-check"></i><b>12.1.4</b> Regression Summarization</a></li>
<li class="chapter" data-level="12.1.5" data-path="analyzing-the-multifactor-experiment.html"><a href="analyzing-the-multifactor-experiment.html#focus-on-a-subset-kick-rest-to-supplement"><i class="fa fa-check"></i><b>12.1.5</b> Focus on a subset, kick rest to supplement</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="analyzing-the-multifactor-experiment.html"><a href="analyzing-the-multifactor-experiment.html#analyzing-results-when-some-trials-have-failed"><i class="fa fa-check"></i><b>12.2</b> Analyzing results when some trials have failed</a></li>
<li class="chapter" data-level="12.3" data-path="analyzing-the-multifactor-experiment.html"><a href="analyzing-the-multifactor-experiment.html#case-study-power-for-a-randomized-trial"><i class="fa fa-check"></i><b>12.3</b> Case study: power for a randomized trial</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="analyzing-the-multifactor-experiment.html"><a href="analyzing-the-multifactor-experiment.html#the-initial-analysis"><i class="fa fa-check"></i><b>12.3.1</b> The initial analysis</a></li>
<li class="chapter" data-level="12.3.2" data-path="analyzing-the-multifactor-experiment.html"><a href="analyzing-the-multifactor-experiment.html#focusing-on-validity"><i class="fa fa-check"></i><b>12.3.2</b> Focusing on validity</a></li>
<li class="chapter" data-level="12.3.3" data-path="analyzing-the-multifactor-experiment.html"><a href="analyzing-the-multifactor-experiment.html#aggregate-to-look-at-main-effects"><i class="fa fa-check"></i><b>12.3.3</b> Aggregate to look at main effects</a></li>
<li class="chapter" data-level="12.3.4" data-path="analyzing-the-multifactor-experiment.html"><a href="analyzing-the-multifactor-experiment.html#recap"><i class="fa fa-check"></i><b>12.3.4</b> Recap</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="analyzing-the-multifactor-experiment.html"><a href="analyzing-the-multifactor-experiment.html#exercises-8"><i class="fa fa-check"></i><b>12.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="case-study-comparing-different-estimators.html"><a href="case-study-comparing-different-estimators.html"><i class="fa fa-check"></i><b>13</b> Case study: Comparing different estimators</a>
<ul>
<li class="chapter" data-level="13.1" data-path="case-study-comparing-different-estimators.html"><a href="case-study-comparing-different-estimators.html#the-data-generating-process"><i class="fa fa-check"></i><b>13.1</b> The data generating process</a></li>
<li class="chapter" data-level="13.2" data-path="case-study-comparing-different-estimators.html"><a href="case-study-comparing-different-estimators.html#the-data-analysis-methods"><i class="fa fa-check"></i><b>13.2</b> The data analysis methods</a></li>
<li class="chapter" data-level="13.3" data-path="case-study-comparing-different-estimators.html"><a href="case-study-comparing-different-estimators.html#the-simulation-itself"><i class="fa fa-check"></i><b>13.3</b> The simulation itself</a></li>
<li class="chapter" data-level="13.4" data-path="case-study-comparing-different-estimators.html"><a href="case-study-comparing-different-estimators.html#calculating-performance-measures-for-all-our-estimators"><i class="fa fa-check"></i><b>13.4</b> Calculating performance measures for all our estimators</a></li>
<li class="chapter" data-level="13.5" data-path="case-study-comparing-different-estimators.html"><a href="case-study-comparing-different-estimators.html#improving-the-visualization-of-the-results"><i class="fa fa-check"></i><b>13.5</b> Improving the visualization of the results</a></li>
<li class="chapter" data-level="13.6" data-path="case-study-comparing-different-estimators.html"><a href="case-study-comparing-different-estimators.html#extension-the-bias-variance-tradeoff"><i class="fa fa-check"></i><b>13.6</b> Extension: The Bias-variance tradeoff</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="presentation-of-simulation-results.html"><a href="presentation-of-simulation-results.html"><i class="fa fa-check"></i><b>14</b> Presentation of simulation results</a>
<ul>
<li class="chapter" data-level="14.1" data-path="presentation-of-simulation-results.html"><a href="presentation-of-simulation-results.html#tabulation"><i class="fa fa-check"></i><b>14.1</b> Tabulation</a></li>
<li class="chapter" data-level="14.2" data-path="presentation-of-simulation-results.html"><a href="presentation-of-simulation-results.html#visualization"><i class="fa fa-check"></i><b>14.2</b> Visualization</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="presentation-of-simulation-results.html"><a href="presentation-of-simulation-results.html#example-1-biserial-correlation-estimation"><i class="fa fa-check"></i><b>14.2.1</b> Example 1: Biserial correlation estimation</a></li>
<li class="chapter" data-level="14.2.2" data-path="presentation-of-simulation-results.html"><a href="presentation-of-simulation-results.html#example-2-variance-estimation-and-meta-regression"><i class="fa fa-check"></i><b>14.2.2</b> Example 2: Variance estimation and Meta-regression</a></li>
<li class="chapter" data-level="14.2.3" data-path="presentation-of-simulation-results.html"><a href="presentation-of-simulation-results.html#example-heat-maps-of-coverage"><i class="fa fa-check"></i><b>14.2.3</b> Example: Heat maps of coverage</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="presentation-of-simulation-results.html"><a href="presentation-of-simulation-results.html#modeling"><i class="fa fa-check"></i><b>14.3</b> Modeling</a></li>
</ul></li>
<li class="part"><span><b>IV Computational Considerations</b></span></li>
<li class="chapter" data-level="15" data-path="optimize-code.html"><a href="optimize-code.html"><i class="fa fa-check"></i><b>15</b> Optimizing code (and why you often shouldn’t)</a>
<ul>
<li class="chapter" data-level="15.1" data-path="optimize-code.html"><a href="optimize-code.html#hand-building-functions"><i class="fa fa-check"></i><b>15.1</b> Hand-building functions</a></li>
<li class="chapter" data-level="15.2" data-path="optimize-code.html"><a href="optimize-code.html#sec_comp_efficiency"><i class="fa fa-check"></i><b>15.2</b> Computational efficiency versus simplicity</a></li>
<li class="chapter" data-level="15.3" data-path="optimize-code.html"><a href="optimize-code.html#reusing-code-to-speed-up-computation"><i class="fa fa-check"></i><b>15.3</b> Reusing code to speed up computation</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="error-trapping-and-other-headaches.html"><a href="error-trapping-and-other-headaches.html"><i class="fa fa-check"></i><b>16</b> Error trapping and other headaches</a>
<ul>
<li class="chapter" data-level="16.0.1" data-path="error-trapping-and-other-headaches.html"><a href="error-trapping-and-other-headaches.html#what-to-do-with-warnings-in-simulations"><i class="fa fa-check"></i><b>16.0.1</b> What to do with warnings in simulations</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="saving-files.html"><a href="saving-files.html"><i class="fa fa-check"></i><b>17</b> Saving files and results</a>
<ul>
<li class="chapter" data-level="17.1" data-path="saving-files.html"><a href="saving-files.html#saving-simulations-in-general"><i class="fa fa-check"></i><b>17.1</b> Saving simulations in general</a></li>
<li class="chapter" data-level="17.2" data-path="saving-files.html"><a href="saving-files.html#saving-simulations-as-you-go"><i class="fa fa-check"></i><b>17.2</b> Saving simulations as you go</a></li>
<li class="chapter" data-level="17.3" data-path="saving-files.html"><a href="saving-files.html#dynamically-making-directories"><i class="fa fa-check"></i><b>17.3</b> Dynamically making directories</a></li>
<li class="chapter" data-level="17.4" data-path="saving-files.html"><a href="saving-files.html#loading-and-combining-files-of-simulation-results"><i class="fa fa-check"></i><b>17.4</b> Loading and combining files of simulation results</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="parallel-processing.html"><a href="parallel-processing.html"><i class="fa fa-check"></i><b>18</b> Parallel Processing</a>
<ul>
<li class="chapter" data-level="18.1" data-path="parallel-processing.html"><a href="parallel-processing.html#parallel-on-your-computer"><i class="fa fa-check"></i><b>18.1</b> Parallel on your computer</a></li>
<li class="chapter" data-level="18.2" data-path="parallel-processing.html"><a href="parallel-processing.html#parallel-off-your-computer"><i class="fa fa-check"></i><b>18.2</b> Parallel off your computer</a>
<ul>
<li class="chapter" data-level="18.2.1" data-path="parallel-processing.html"><a href="parallel-processing.html#what-is-a-command-line-interface"><i class="fa fa-check"></i><b>18.2.1</b> What is a command-line interface?</a></li>
<li class="chapter" data-level="18.2.2" data-path="parallel-processing.html"><a href="parallel-processing.html#running-a-job-on-a-cluster"><i class="fa fa-check"></i><b>18.2.2</b> Running a job on a cluster</a></li>
<li class="chapter" data-level="18.2.3" data-path="parallel-processing.html"><a href="parallel-processing.html#checking-on-a-job"><i class="fa fa-check"></i><b>18.2.3</b> Checking on a job</a></li>
<li class="chapter" data-level="18.2.4" data-path="parallel-processing.html"><a href="parallel-processing.html#running-lots-of-jobs-on-a-cluster"><i class="fa fa-check"></i><b>18.2.4</b> Running lots of jobs on a cluster</a></li>
<li class="chapter" data-level="18.2.5" data-path="parallel-processing.html"><a href="parallel-processing.html#resources-for-harvards-odyssey"><i class="fa fa-check"></i><b>18.2.5</b> Resources for Harvard’s Odyssey</a></li>
<li class="chapter" data-level="18.2.6" data-path="parallel-processing.html"><a href="parallel-processing.html#acknowledgements-1"><i class="fa fa-check"></i><b>18.2.6</b> Acknowledgements</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="19" data-path="simulations-as-evidence.html"><a href="simulations-as-evidence.html"><i class="fa fa-check"></i><b>19</b> Simulations as evidence</a>
<ul>
<li class="chapter" data-level="19.1" data-path="simulations-as-evidence.html"><a href="simulations-as-evidence.html#strategies-for-making-relevant-simulations"><i class="fa fa-check"></i><b>19.1</b> Strategies for making relevant simulations</a>
<ul>
<li class="chapter" data-level="19.1.1" data-path="simulations-as-evidence.html"><a href="simulations-as-evidence.html#make-your-simulation-general-with-an-extensive-multi-factor-experiment"><i class="fa fa-check"></i><b>19.1.1</b> Make your simulation general with an extensive multi-factor experiment</a></li>
<li class="chapter" data-level="19.1.2" data-path="simulations-as-evidence.html"><a href="simulations-as-evidence.html#use-previously-published-simulations-to-beat-them-at-their-own-game"><i class="fa fa-check"></i><b>19.1.2</b> Use previously published simulations to beat them at their own game</a></li>
<li class="chapter" data-level="19.1.3" data-path="simulations-as-evidence.html"><a href="simulations-as-evidence.html#calibrate-simulation-factors-to-real-data"><i class="fa fa-check"></i><b>19.1.3</b> Calibrate simulation factors to real data</a></li>
<li class="chapter" data-level="19.1.4" data-path="simulations-as-evidence.html"><a href="simulations-as-evidence.html#use-real-data-to-obtain-directly"><i class="fa fa-check"></i><b>19.1.4</b> Use real data to obtain directly</a></li>
<li class="chapter" data-level="19.1.5" data-path="simulations-as-evidence.html"><a href="simulations-as-evidence.html#fully-calibrated-simulations"><i class="fa fa-check"></i><b>19.1.5</b> Fully calibrated simulations</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>V Complex Data Structures</b></span></li>
<li class="chapter" data-level="20" data-path="using-simulation-as-a-power-calculator.html"><a href="using-simulation-as-a-power-calculator.html"><i class="fa fa-check"></i><b>20</b> Using simulation as a power calculator</a>
<ul>
<li class="chapter" data-level="20.1" data-path="using-simulation-as-a-power-calculator.html"><a href="using-simulation-as-a-power-calculator.html#getting-design-parameters-from-pilot-data"><i class="fa fa-check"></i><b>20.1</b> Getting design parameters from pilot data</a></li>
<li class="chapter" data-level="20.2" data-path="using-simulation-as-a-power-calculator.html"><a href="using-simulation-as-a-power-calculator.html#the-data-generating-process-1"><i class="fa fa-check"></i><b>20.2</b> The data generating process</a></li>
<li class="chapter" data-level="20.3" data-path="using-simulation-as-a-power-calculator.html"><a href="using-simulation-as-a-power-calculator.html#running-the-simulation-1"><i class="fa fa-check"></i><b>20.3</b> Running the simulation</a></li>
<li class="chapter" data-level="20.4" data-path="using-simulation-as-a-power-calculator.html"><a href="using-simulation-as-a-power-calculator.html#evaluating-power"><i class="fa fa-check"></i><b>20.4</b> Evaluating power</a>
<ul>
<li class="chapter" data-level="20.4.1" data-path="using-simulation-as-a-power-calculator.html"><a href="using-simulation-as-a-power-calculator.html#checking-validity-of-our-models"><i class="fa fa-check"></i><b>20.4.1</b> Checking validity of our models</a></li>
<li class="chapter" data-level="20.4.2" data-path="using-simulation-as-a-power-calculator.html"><a href="using-simulation-as-a-power-calculator.html#assessing-precision-se"><i class="fa fa-check"></i><b>20.4.2</b> Assessing Precision (SE)</a></li>
<li class="chapter" data-level="20.4.3" data-path="using-simulation-as-a-power-calculator.html"><a href="using-simulation-as-a-power-calculator.html#assessing-power"><i class="fa fa-check"></i><b>20.4.3</b> Assessing power</a></li>
<li class="chapter" data-level="20.4.4" data-path="using-simulation-as-a-power-calculator.html"><a href="using-simulation-as-a-power-calculator.html#assessing-minimum-detectable-effects"><i class="fa fa-check"></i><b>20.4.4</b> Assessing Minimum Detectable Effects</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="21" data-path="potential-outcomes.html"><a href="potential-outcomes.html"><i class="fa fa-check"></i><b>21</b> Simulation under the Potential Outcomes Framework</a>
<ul>
<li class="chapter" data-level="21.1" data-path="potential-outcomes.html"><a href="potential-outcomes.html#finite-vs.-superpopulation-inference"><i class="fa fa-check"></i><b>21.1</b> Finite vs. Superpopulation inference</a></li>
<li class="chapter" data-level="21.2" data-path="potential-outcomes.html"><a href="potential-outcomes.html#data-generation-processes-for-potential-outcomes"><i class="fa fa-check"></i><b>21.2</b> Data generation processes for potential outcomes</a></li>
<li class="chapter" data-level="21.3" data-path="potential-outcomes.html"><a href="potential-outcomes.html#finite-sample-performance-measures"><i class="fa fa-check"></i><b>21.3</b> Finite sample performance measures</a></li>
<li class="chapter" data-level="21.4" data-path="potential-outcomes.html"><a href="potential-outcomes.html#nested-finite-simulation-procedure"><i class="fa fa-check"></i><b>21.4</b> Nested finite simulation procedure</a></li>
</ul></li>
<li class="chapter" data-level="22" data-path="the-parametric-bootstrap.html"><a href="the-parametric-bootstrap.html"><i class="fa fa-check"></i><b>22</b> The Parametric bootstrap</a>
<ul>
<li class="chapter" data-level="22.1" data-path="the-parametric-bootstrap.html"><a href="the-parametric-bootstrap.html#air-conditioners-a-stolen-case-study"><i class="fa fa-check"></i><b>22.1</b> Air conditioners: a stolen case study</a></li>
</ul></li>
<li class="appendix"><span><b>Appendices</b></span></li>
<li class="chapter" data-level="A" data-path="coding-tidbits.html"><a href="coding-tidbits.html"><i class="fa fa-check"></i><b>A</b> Coding tidbits</a>
<ul>
<li class="chapter" data-level="A.1" data-path="coding-tidbits.html"><a href="coding-tidbits.html#more-repeating-oneself"><i class="fa fa-check"></i><b>A.1</b> How to repeat yourself</a>
<ul>
<li class="chapter" data-level="A.1.1" data-path="coding-tidbits.html"><a href="coding-tidbits.html#using-replicate"><i class="fa fa-check"></i><b>A.1.1</b> Using <code>replicate()</code></a></li>
<li class="chapter" data-level="A.1.2" data-path="coding-tidbits.html"><a href="coding-tidbits.html#using-map"><i class="fa fa-check"></i><b>A.1.2</b> Using <code>map()</code></a></li>
<li class="chapter" data-level="A.1.3" data-path="coding-tidbits.html"><a href="coding-tidbits.html#map-with-no-inputs"><i class="fa fa-check"></i><b>A.1.3</b> map with no inputs</a></li>
<li class="chapter" data-level="A.1.4" data-path="coding-tidbits.html"><a href="coding-tidbits.html#other-approaches-for-repetition"><i class="fa fa-check"></i><b>A.1.4</b> Other approaches for repetition</a></li>
</ul></li>
<li class="chapter" data-level="A.2" data-path="coding-tidbits.html"><a href="coding-tidbits.html#default-arguments"><i class="fa fa-check"></i><b>A.2</b> Default arguments for functions</a></li>
<li class="chapter" data-level="A.3" data-path="coding-tidbits.html"><a href="coding-tidbits.html#about-source-command"><i class="fa fa-check"></i><b>A.3</b> The source command and keeping things organized</a></li>
<li class="chapter" data-level="A.4" data-path="coding-tidbits.html"><a href="coding-tidbits.html#about-keeping-tests-with-FALSE"><i class="fa fa-check"></i><b>A.4</b> Testing and debugging code in your scripts</a></li>
<li class="chapter" data-level="A.5" data-path="coding-tidbits.html"><a href="coding-tidbits.html#about-browser-debugging"><i class="fa fa-check"></i><b>A.5</b> Debugging with browser</a></li>
<li class="chapter" data-level="A.6" data-path="coding-tidbits.html"><a href="coding-tidbits.html#about-stopifnot"><i class="fa fa-check"></i><b>A.6</b> Protecting your functions with “stop”</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="further-readings-and-resources.html"><a href="further-readings-and-resources.html"><i class="fa fa-check"></i><b>B</b> Further readings and resources</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Designing Monte Carlo Simulations in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="case_Cronbach" class="section level1 hasAnchor" number="10">
<h1><span class="header-section-number">Chapter 10</span> Project: Cronbach Alpha<a href="case_Cronbach.html#case_Cronbach" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>In this section we walk through a case study of Cronbach Alpha to give an extended “project,” or series of exercises, that walk you through writing a complete simulation starting with the filling out of the code skeleton we get from <code>simhelpers</code>’s <code>create_skeleton()</code> package.</p>
<div id="background" class="section level2 hasAnchor" number="10.1">
<h2><span class="header-section-number">10.1</span> Background<a href="case_Cronbach.html#background" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Cronbach’s <span class="math inline">\(\alpha\)</span> coefficient is commonly reported as a measure of the internal consistency among a set of test items. Consider a set of <span class="math inline">\(p\)</span> test items with population variance-covariance matrix <span class="math inline">\(\boldsymbol\Phi = \left[\phi_{ij}\right]_{i,j=1}^p\)</span>, where <span class="math inline">\(\phi_{ij}\)</span> is the covariance of item <span class="math inline">\(i\)</span> and item <span class="math inline">\(j\)</span> on the test, across all students taking the test.
This population variance-covariance matrix describes how our <span class="math inline">\(p\)</span> test items co-vary.</p>
<p>Cronback’s <span class="math inline">\(\alpha\)</span> is, under this model, defined as
<span class="math display">\[
\alpha = \frac{p}{p - 1}\left(1 - \frac{\sum_{i=1}^p \phi_{ii}}{\sum_{i=1}^p \sum_{j=1}^p \phi_{ij}}\right).
\]</span></p>
<p>Given a sample of size <span class="math inline">\(n\)</span>, the usual estimate of <span class="math inline">\(\alpha\)</span> is obtained by replacing the population variances and covariances with corresponding sample estimates. Letting <span class="math inline">\(s_{ij}\)</span> denote the sample covariance of items <span class="math inline">\(i\)</span> and <span class="math inline">\(j\)</span></p>
<p><span class="math display">\[
A = \frac{p}{p - 1}\left(1 - \frac{\sum_{i=1}^p s_{ii}}{\sum_{i=1}^p \sum_{j=1}^p s_{ij}}\right).
\]</span></p>
<p>If we assume that the items follow a multivariate normal distribution, then <span class="math inline">\(A\)</span> corresponds to the maximum likelihood estimator of <span class="math inline">\(\alpha\)</span>.</p>
<p>Our goal is to examine the properties of our estimator <span class="math inline">\(A\)</span> when the set of <span class="math inline">\(P\)</span> items is <em>not</em> multi-variate normal, but rather follows a multivariate <span class="math inline">\(t\)</span> distribution with <span class="math inline">\(v\)</span> degrees of freedom.
For simplicity, we shall assume that the items have common variance and have a <strong>compound symmetric</strong> covariance matrix, such that <span class="math inline">\(\phi_{11} = \phi_{22} = \cdots = \phi_{pp} = \phi\)</span> and <span class="math inline">\(\phi_{ij} = \rho \phi\)</span>. In this case we can simplify our expression for <span class="math inline">\(\alpha\)</span> to</p>
<p><span class="math display">\[
\alpha = \frac{p \rho}{1 + \rho (p - 1)}.
\]</span></p>
<p>In particular, we are interested in whether <span class="math inline">\(A\)</span> is a biased estimator for <span class="math inline">\(\alpha\)</span>, when we have items that are not multi-variate normal.
We are also interested in the standard error of <span class="math inline">\(A\)</span>, and how that changes as features of our DGP change.
Finally, we have a corresponding asymptotic variance estimator to get estimated standard errors for <span class="math inline">\(A\)</span>, and we want to know if this variance estimator has generally good properties as well.</p>
</div>
<div id="getting-started" class="section level2 hasAnchor" number="10.2">
<h2><span class="header-section-number">10.2</span> Getting started<a href="case_Cronbach.html#getting-started" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>First create the skeleton of our simulation.
We will then walk through filling in all the pieces.</p>
<div class="sourceCode" id="cb328"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb328-1"><a href="case_Cronbach.html#cb328-1" tabindex="-1"></a><span class="fu">library</span>( simhelpers )</span>
<span id="cb328-2"><a href="case_Cronbach.html#cb328-2" tabindex="-1"></a><span class="fu">create_skeleton</span>()</span></code></pre></div>
</div>
<div id="the-data-generating-function" class="section level2 hasAnchor" number="10.3">
<h2><span class="header-section-number">10.3</span> The data-generating function<a href="case_Cronbach.html#the-data-generating-function" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The first two sections in the skeleton are about the data-generating model:</p>
<div class="sourceCode" id="cb329"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb329-1"><a href="case_Cronbach.html#cb329-1" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb329-2"><a href="case_Cronbach.html#cb329-2" tabindex="-1"></a></span>
<span id="cb329-3"><a href="case_Cronbach.html#cb329-3" tabindex="-1"></a><span class="co">#------------------------------------------------------</span></span>
<span id="cb329-4"><a href="case_Cronbach.html#cb329-4" tabindex="-1"></a><span class="co"># Set development values for simulation parameters</span></span>
<span id="cb329-5"><a href="case_Cronbach.html#cb329-5" tabindex="-1"></a><span class="co">#------------------------------------------------------</span></span>
<span id="cb329-6"><a href="case_Cronbach.html#cb329-6" tabindex="-1"></a></span>
<span id="cb329-7"><a href="case_Cronbach.html#cb329-7" tabindex="-1"></a><span class="co"># What are your model parameters?</span></span>
<span id="cb329-8"><a href="case_Cronbach.html#cb329-8" tabindex="-1"></a><span class="co"># What are your design parameters?</span></span>
<span id="cb329-9"><a href="case_Cronbach.html#cb329-9" tabindex="-1"></a></span>
<span id="cb329-10"><a href="case_Cronbach.html#cb329-10" tabindex="-1"></a><span class="co">#------------------------------------------------------</span></span>
<span id="cb329-11"><a href="case_Cronbach.html#cb329-11" tabindex="-1"></a><span class="co"># Data Generating Model</span></span>
<span id="cb329-12"><a href="case_Cronbach.html#cb329-12" tabindex="-1"></a><span class="co">#------------------------------------------------------</span></span>
<span id="cb329-13"><a href="case_Cronbach.html#cb329-13" tabindex="-1"></a></span>
<span id="cb329-14"><a href="case_Cronbach.html#cb329-14" tabindex="-1"></a>dgm <span class="ot">&lt;-</span> <span class="cf">function</span>(model_params) {</span>
<span id="cb329-15"><a href="case_Cronbach.html#cb329-15" tabindex="-1"></a></span>
<span id="cb329-16"><a href="case_Cronbach.html#cb329-16" tabindex="-1"></a>  <span class="fu">return</span>(dat)</span>
<span id="cb329-17"><a href="case_Cronbach.html#cb329-17" tabindex="-1"></a>}</span>
<span id="cb329-18"><a href="case_Cronbach.html#cb329-18" tabindex="-1"></a></span>
<span id="cb329-19"><a href="case_Cronbach.html#cb329-19" tabindex="-1"></a><span class="co"># Test the data-generating model - How can you verify that it is correct?</span></span></code></pre></div>
<p>We need to create and test a function that takes model parameters (and sample sizes and such) as inputs, and produces a simulated dataset.
The following function generates a sample of <span class="math inline">\(n\)</span> observations of <span class="math inline">\(p\)</span> items from a multivariate <span class="math inline">\(t\)</span>-distribution with a compound symmetric covariance matrix, intra-class correlation <span class="math inline">\(\rho\)</span>, and <span class="math inline">\(v\)</span> degrees of freedom:</p>
<div class="sourceCode" id="cb330"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb330-1"><a href="case_Cronbach.html#cb330-1" tabindex="-1"></a><span class="co"># model parameters</span></span>
<span id="cb330-2"><a href="case_Cronbach.html#cb330-2" tabindex="-1"></a>alpha <span class="ot">&lt;-</span> <span class="fl">0.73</span> <span class="co"># true alpha</span></span>
<span id="cb330-3"><a href="case_Cronbach.html#cb330-3" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="dv">12</span> <span class="co"># degrees of freedom</span></span>
<span id="cb330-4"><a href="case_Cronbach.html#cb330-4" tabindex="-1"></a></span>
<span id="cb330-5"><a href="case_Cronbach.html#cb330-5" tabindex="-1"></a><span class="co"># design parameters</span></span>
<span id="cb330-6"><a href="case_Cronbach.html#cb330-6" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">50</span> <span class="co"># sample size</span></span>
<span id="cb330-7"><a href="case_Cronbach.html#cb330-7" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="dv">6</span> <span class="co"># number of items</span></span>
<span id="cb330-8"><a href="case_Cronbach.html#cb330-8" tabindex="-1"></a></span>
<span id="cb330-9"><a href="case_Cronbach.html#cb330-9" tabindex="-1"></a></span>
<span id="cb330-10"><a href="case_Cronbach.html#cb330-10" tabindex="-1"></a><span class="fu">library</span>(mvtnorm)</span>
<span id="cb330-11"><a href="case_Cronbach.html#cb330-11" tabindex="-1"></a></span>
<span id="cb330-12"><a href="case_Cronbach.html#cb330-12" tabindex="-1"></a>r_mvt_items <span class="ot">&lt;-</span> <span class="cf">function</span>(n, p, alpha, df) {</span>
<span id="cb330-13"><a href="case_Cronbach.html#cb330-13" tabindex="-1"></a>  icc <span class="ot">&lt;-</span> alpha <span class="sc">/</span> (p <span class="sc">-</span> alpha <span class="sc">*</span> (p <span class="sc">-</span> <span class="dv">1</span>))</span>
<span id="cb330-14"><a href="case_Cronbach.html#cb330-14" tabindex="-1"></a>  V_mat <span class="ot">&lt;-</span> icc <span class="sc">+</span> <span class="fu">diag</span>(<span class="dv">1</span> <span class="sc">-</span> icc, <span class="at">nrow =</span> p)</span>
<span id="cb330-15"><a href="case_Cronbach.html#cb330-15" tabindex="-1"></a>  X <span class="ot">&lt;-</span> <span class="fu">rmvt</span>(<span class="at">n =</span> n, <span class="at">sigma =</span> V_mat, <span class="at">df =</span> df)</span>
<span id="cb330-16"><a href="case_Cronbach.html#cb330-16" tabindex="-1"></a>  <span class="fu">colnames</span>(X) <span class="ot">&lt;-</span> LETTERS[<span class="dv">1</span><span class="sc">:</span>p]</span>
<span id="cb330-17"><a href="case_Cronbach.html#cb330-17" tabindex="-1"></a>  X</span>
<span id="cb330-18"><a href="case_Cronbach.html#cb330-18" tabindex="-1"></a>}</span></code></pre></div>
<p>Note how we translate the target <span class="math inline">\(\alpha\)</span> to <span class="math inline">\(ICC\)</span> for our DGP; we will see this type of translation more later on.</p>
<p>We check our method first to see if we get the right kind of data:</p>
<div class="sourceCode" id="cb331"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb331-1"><a href="case_Cronbach.html#cb331-1" tabindex="-1"></a>small_sample <span class="ot">&lt;-</span> <span class="fu">r_mvt_items</span>(<span class="at">n =</span> <span class="dv">8</span>, <span class="at">p =</span> <span class="dv">3</span>, <span class="at">alpha =</span> <span class="fl">0.73</span>, <span class="at">df =</span> <span class="dv">5</span>)</span>
<span id="cb331-2"><a href="case_Cronbach.html#cb331-2" tabindex="-1"></a>small_sample</span></code></pre></div>
<pre><code>##                A           B           C
## [1,]  0.84178327  0.79667212  0.89763338
## [2,] -0.22368394  0.03461279  0.18828500
## [3,] -1.04857817  1.57395368 -0.45917554
## [4,] -0.62138749 -1.71804224  0.07028801
## [5,]  1.01420764  0.82780069  0.27966729
## [6,] -0.09936605  0.29165411  0.60147379
## [7,]  1.55303030  0.64559263  1.27739829
## [8,]  2.54590497  0.69538104  1.48876612</code></pre>
<p>It looks like we have 8 observations of 3 items, as desired.</p>
<p>To check that the function is indeed simulating data following the intended distribution, let’s next generate a very large sample of items. We can then verify that the correlation matrix of the items is compound-symmetric and that the marginal distributions of the items follow <span class="math inline">\(t\)</span>-distributions with specified degrees of freedom.</p>
<div class="sourceCode" id="cb333"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb333-1"><a href="case_Cronbach.html#cb333-1" tabindex="-1"></a>big_sample <span class="ot">&lt;-</span> <span class="fu">r_mvt_items</span>(<span class="at">n =</span> <span class="dv">100000</span>, <span class="at">p =</span> <span class="dv">4</span>, <span class="at">alpha =</span> <span class="fl">0.73</span>, <span class="at">df =</span> <span class="dv">5</span>)</span>
<span id="cb333-2"><a href="case_Cronbach.html#cb333-2" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">cor</span>(big_sample), <span class="dv">3</span>)</span></code></pre></div>
<pre><code>##       A     B     C     D
## A 1.000 0.403 0.402 0.403
## B 0.403 1.000 0.409 0.403
## C 0.402 0.409 1.000 0.408
## D 0.403 0.403 0.408 1.000</code></pre>
<p>Is this what it should look like?</p>
<p>We can also check normality:</p>
<div class="sourceCode" id="cb335"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb335-1"><a href="case_Cronbach.html#cb335-1" tabindex="-1"></a><span class="fu">qqplot</span>(<span class="fu">qt</span>(<span class="fu">ppoints</span>(<span class="dv">200</span>), <span class="at">df =</span> <span class="dv">5</span>), big_sample[,<span class="dv">2</span>], <span class="at">ylim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">4</span>,<span class="dv">4</span>))</span></code></pre></div>
<p><img src="Designing-Simulations-in-R_files/figure-html/unnamed-chunk-188-1.png" width="75%" style="display: block; margin: auto;" /></p>
<p>Looks good! A nice straight line.</p>
</div>
<div id="the-estimation-function" class="section level2 hasAnchor" number="10.4">
<h2><span class="header-section-number">10.4</span> The estimation function<a href="case_Cronbach.html#the-estimation-function" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The next section of the template looks like this:</p>
<div class="sourceCode" id="cb336"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb336-1"><a href="case_Cronbach.html#cb336-1" tabindex="-1"></a><span class="co">#------------------------------------------------------</span></span>
<span id="cb336-2"><a href="case_Cronbach.html#cb336-2" tabindex="-1"></a><span class="co"># Model-fitting/estimation/testing functions</span></span>
<span id="cb336-3"><a href="case_Cronbach.html#cb336-3" tabindex="-1"></a><span class="co">#------------------------------------------------------</span></span>
<span id="cb336-4"><a href="case_Cronbach.html#cb336-4" tabindex="-1"></a></span>
<span id="cb336-5"><a href="case_Cronbach.html#cb336-5" tabindex="-1"></a>estimate <span class="ot">&lt;-</span> <span class="cf">function</span>(dat, design_params) {</span>
<span id="cb336-6"><a href="case_Cronbach.html#cb336-6" tabindex="-1"></a></span>
<span id="cb336-7"><a href="case_Cronbach.html#cb336-7" tabindex="-1"></a>  <span class="fu">return</span>(result)</span>
<span id="cb336-8"><a href="case_Cronbach.html#cb336-8" tabindex="-1"></a>}</span>
<span id="cb336-9"><a href="case_Cronbach.html#cb336-9" tabindex="-1"></a></span>
<span id="cb336-10"><a href="case_Cronbach.html#cb336-10" tabindex="-1"></a><span class="co"># Test the estimation function</span></span></code></pre></div>
<p>van Zyl, Neudecker, and Nel (2000) demonstrate that, if the items have a compound-symmetric covariance matrix, then the asymptotic variance of <span class="math inline">\(A\)</span> is
<span class="math display">\[
\text{Var}(A) \approx \frac{2p(1 - \alpha)^2}{(p - 1) n}.
\]</span>
Substituting <span class="math inline">\(A\)</span> in place of <span class="math inline">\(\alpha\)</span> on the right hand side gives an estimate of the variance of <span class="math inline">\(A\)</span>. The following function calculates <span class="math inline">\(A\)</span> and its variance estimator from a sample of data:</p>
<div class="sourceCode" id="cb337"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb337-1"><a href="case_Cronbach.html#cb337-1" tabindex="-1"></a>estimate_alpha <span class="ot">&lt;-</span> <span class="cf">function</span>(dat) {</span>
<span id="cb337-2"><a href="case_Cronbach.html#cb337-2" tabindex="-1"></a>  V <span class="ot">&lt;-</span> <span class="fu">cov</span>(dat)</span>
<span id="cb337-3"><a href="case_Cronbach.html#cb337-3" tabindex="-1"></a>  p <span class="ot">&lt;-</span> <span class="fu">ncol</span>(dat)</span>
<span id="cb337-4"><a href="case_Cronbach.html#cb337-4" tabindex="-1"></a>  n <span class="ot">&lt;-</span> <span class="fu">nrow</span>(dat)</span>
<span id="cb337-5"><a href="case_Cronbach.html#cb337-5" tabindex="-1"></a>  </span>
<span id="cb337-6"><a href="case_Cronbach.html#cb337-6" tabindex="-1"></a>  <span class="co"># Calculate A with our formula</span></span>
<span id="cb337-7"><a href="case_Cronbach.html#cb337-7" tabindex="-1"></a>  A <span class="ot">&lt;-</span> p <span class="sc">/</span> (p <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">-</span> <span class="fu">sum</span>(<span class="fu">diag</span>(V)) <span class="sc">/</span> <span class="fu">sum</span>(V))</span>
<span id="cb337-8"><a href="case_Cronbach.html#cb337-8" tabindex="-1"></a>  </span>
<span id="cb337-9"><a href="case_Cronbach.html#cb337-9" tabindex="-1"></a>  <span class="co"># Calculate our estimate of the variance (SE^2) of A</span></span>
<span id="cb337-10"><a href="case_Cronbach.html#cb337-10" tabindex="-1"></a>  Var_A <span class="ot">&lt;-</span> <span class="dv">2</span> <span class="sc">*</span> p <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">-</span> A)<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> ((p <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">*</span> n)</span>
<span id="cb337-11"><a href="case_Cronbach.html#cb337-11" tabindex="-1"></a>  </span>
<span id="cb337-12"><a href="case_Cronbach.html#cb337-12" tabindex="-1"></a>  <span class="co"># Pack up our results</span></span>
<span id="cb337-13"><a href="case_Cronbach.html#cb337-13" tabindex="-1"></a>  <span class="fu">data.frame</span>(<span class="at">A =</span> A, <span class="at">Var =</span> Var_A)</span>
<span id="cb337-14"><a href="case_Cronbach.html#cb337-14" tabindex="-1"></a>}</span>
<span id="cb337-15"><a href="case_Cronbach.html#cb337-15" tabindex="-1"></a></span>
<span id="cb337-16"><a href="case_Cronbach.html#cb337-16" tabindex="-1"></a><span class="fu">estimate_alpha</span>(small_sample)</span></code></pre></div>
<pre><code>##           A       Var
## 1 0.6503423 0.0458477</code></pre>
<p>The <code>psych</code> package provides a function for calculating <span class="math inline">\(\alpha\)</span>, which can be used to verify that the calculation of <span class="math inline">\(A\)</span> in <code>estimate_alpha</code> is correct:</p>
<div class="sourceCode" id="cb339"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb339-1"><a href="case_Cronbach.html#cb339-1" tabindex="-1"></a><span class="fu">library</span>(psych)</span>
<span id="cb339-2"><a href="case_Cronbach.html#cb339-2" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">alpha</span>(<span class="at">x =</span> small_sample))<span class="sc">$</span>raw_alpha</span></code></pre></div>
<pre><code>## Number of categories should be increased  in order to count frequencies.</code></pre>
<pre><code>## 
## Reliability analysis   
##  raw_alpha std.alpha G6(smc) average_r S/N ase
##       0.65      0.69    0.79      0.42 2.2 0.2
##  mean   sd median_r
##  0.48 0.74     0.26</code></pre>
<pre><code>## NULL</code></pre>
<p>The next step is to evaluate these individual estimates and see how well our estimator <span class="math inline">\(A\)</span> performs.</p>
<div id="exercises-naive-confidence-intervals" class="section level3 hasAnchor" number="10.4.1">
<h3><span class="header-section-number">10.4.1</span> Exercises (Naive confidence intervals)<a href="case_Cronbach.html#exercises-naive-confidence-intervals" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li>One way to obtain an approximate confidence interval for <span class="math inline">\(\alpha\)</span> would be to take <span class="math inline">\(A \pm z \sqrt{\text{Var}(A)}\)</span>, where <span class="math inline">\(\text{Var}(A)\)</span> is estimated as described above and <span class="math inline">\(z\)</span> is a standard normal critical value at the appropriate level (i.e., <span class="math inline">\(z = 1.96\)</span> for a 95% CI).
Extend your simulation to calculate a confidence interval for each simulation round (put this code inside <code>estimate_alpha()</code>) and then calculate confidence interval coverage.</li>
</ol>
<p>Your <code>estimate_alpha</code> would then give a result like this:</p>
<div class="sourceCode" id="cb343"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb343-1"><a href="case_Cronbach.html#cb343-1" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">40200</span>)</span>
<span id="cb343-2"><a href="case_Cronbach.html#cb343-2" tabindex="-1"></a>dat <span class="ot">=</span> <span class="fu">r_mvt_items</span>(<span class="at">n =</span> <span class="dv">50</span>, <span class="at">p =</span> <span class="dv">5</span>, <span class="at">alpha =</span> <span class="fl">0.9</span>, <span class="at">df =</span> <span class="dv">3</span> )</span>
<span id="cb343-3"><a href="case_Cronbach.html#cb343-3" tabindex="-1"></a><span class="fu">estimate_alpha</span>(dat)</span></code></pre></div>
<pre><code>##           A          Var   CI_low   CI_high
## 1 0.9425904 0.0001647933 0.916916 0.9682647</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>You can calculate confidence intervals with coverage other than 95% by calculating an appropriate number of standard errors, <span class="math inline">\(z\)</span> (usually just taken as 2, as above, for a nominal 95%), with</li>
</ol>
<div class="sourceCode" id="cb345"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb345-1"><a href="case_Cronbach.html#cb345-1" tabindex="-1"></a>coverage <span class="ot">=</span> <span class="fl">0.95</span></span>
<span id="cb345-2"><a href="case_Cronbach.html#cb345-2" tabindex="-1"></a>z <span class="ot">=</span> <span class="fu">qnorm</span>( (<span class="dv">1</span><span class="sc">-</span>coverage) <span class="sc">/</span> <span class="dv">2</span>, <span class="at">lower.tail =</span> <span class="cn">FALSE</span> )</span>
<span id="cb345-3"><a href="case_Cronbach.html#cb345-3" tabindex="-1"></a>z</span></code></pre></div>
<pre><code>## [1] 1.959964</code></pre>
<p>Extend <code>estimate_alpha()</code> to allow for a specified coverage by adding a parameter, <code>coverage</code>, along with a default of 0.95. Revise the body of <code>estimate_alpha</code> to calculate a confidence interval with the specified coverage rate.</p>
</div>
</div>
<div id="estimator-performance" class="section level2 hasAnchor" number="10.5">
<h2><span class="header-section-number">10.5</span> Estimator performance<a href="case_Cronbach.html#estimator-performance" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The next section of the template deals with performance calculations.</p>
<div class="sourceCode" id="cb347"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb347-1"><a href="case_Cronbach.html#cb347-1" tabindex="-1"></a><span class="co">#------------------------------------------------------</span></span>
<span id="cb347-2"><a href="case_Cronbach.html#cb347-2" tabindex="-1"></a><span class="co"># Calculate performance measures</span></span>
<span id="cb347-3"><a href="case_Cronbach.html#cb347-3" tabindex="-1"></a><span class="co"># (For some simulations, it may make more sense</span></span>
<span id="cb347-4"><a href="case_Cronbach.html#cb347-4" tabindex="-1"></a><span class="co"># to do this as part of the simulation driver.)</span></span>
<span id="cb347-5"><a href="case_Cronbach.html#cb347-5" tabindex="-1"></a><span class="co">#------------------------------------------------------</span></span>
<span id="cb347-6"><a href="case_Cronbach.html#cb347-6" tabindex="-1"></a></span>
<span id="cb347-7"><a href="case_Cronbach.html#cb347-7" tabindex="-1"></a>performance <span class="ot">&lt;-</span> <span class="cf">function</span>(results, model_params) {</span>
<span id="cb347-8"><a href="case_Cronbach.html#cb347-8" tabindex="-1"></a></span>
<span id="cb347-9"><a href="case_Cronbach.html#cb347-9" tabindex="-1"></a>  <span class="fu">return</span>(performance_measures)</span>
<span id="cb347-10"><a href="case_Cronbach.html#cb347-10" tabindex="-1"></a>}</span>
<span id="cb347-11"><a href="case_Cronbach.html#cb347-11" tabindex="-1"></a></span>
<span id="cb347-12"><a href="case_Cronbach.html#cb347-12" tabindex="-1"></a><span class="co"># Check performance calculations</span></span></code></pre></div>
<p>The <code>performance()</code> function takes as input a bunch of simulated data (which we might call <code>results</code>) and the true values of the model parameters (<code>model_params</code>) and returns as output a set of summary performance measures. As noted in the comments above, for simple simulations it might not be necessary to write a separate function to do these calculations. For more complex simulations, though, it can be helpful to break these calculations out in a function.</p>
<p>To start to get the code working that we would put into this function, it is useful to start with some simulation replicates to practice on.
We can generate 1000 replicates using samples of size <span class="math inline">\(n = 40\)</span>, <span class="math inline">\(p = 6\)</span> items, a true <span class="math inline">\(\alpha = 0.8\)</span>, and <span class="math inline">\(v = 5\)</span> degrees of freedom.
We use the <code>simhelpers</code> <code>repeat_and_stack()</code> method to do our replication:</p>
<div class="sourceCode" id="cb348"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb348-1"><a href="case_Cronbach.html#cb348-1" tabindex="-1"></a>one_run <span class="ot">&lt;-</span> <span class="cf">function</span>( n, p, alpha, df ) {</span>
<span id="cb348-2"><a href="case_Cronbach.html#cb348-2" tabindex="-1"></a>  dat <span class="ot">&lt;-</span> <span class="fu">r_mvt_items</span>(<span class="at">n =</span> n, <span class="at">p =</span> p, <span class="at">alpha =</span> alpha, <span class="at">df =</span> df)</span>
<span id="cb348-3"><a href="case_Cronbach.html#cb348-3" tabindex="-1"></a>  <span class="fu">estimate_alpha</span>(dat)</span>
<span id="cb348-4"><a href="case_Cronbach.html#cb348-4" tabindex="-1"></a>}</span>
<span id="cb348-5"><a href="case_Cronbach.html#cb348-5" tabindex="-1"></a>true_alpha <span class="ot">=</span> <span class="fl">0.7</span></span>
<span id="cb348-6"><a href="case_Cronbach.html#cb348-6" tabindex="-1"></a>results <span class="ot">=</span> <span class="fu">repeat_and_stack</span>( <span class="dv">1000</span>, </span>
<span id="cb348-7"><a href="case_Cronbach.html#cb348-7" tabindex="-1"></a>                            <span class="fu">one_run</span>(<span class="dv">40</span>, <span class="dv">6</span>, <span class="at">alpha=</span>true_alpha, <span class="at">df=</span><span class="dv">5</span>) ) <span class="sc">%&gt;%</span></span>
<span id="cb348-8"><a href="case_Cronbach.html#cb348-8" tabindex="-1"></a>  <span class="fu">bind_rows</span>()</span></code></pre></div>
<div id="exercises-calculating-performance" class="section level3 hasAnchor" number="10.5.1">
<h3><span class="header-section-number">10.5.1</span> Exercises (Calculating Performance)<a href="case_Cronbach.html#exercises-calculating-performance" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>For the Cronbach alpha simulation, we might want to calculate the following performance measures:</p>
<ol style="list-style-type: decimal">
<li><p>With the parameters specified above, calculate the bias of <span class="math inline">\(A\)</span>. Also calculate the Monte Carlo standard error (MCSE) of the bias estimate.</p></li>
<li><p>Estimate the true Standard Error of <span class="math inline">\(A\)</span>.</p></li>
<li><p>Calculate the mean squared error of <span class="math inline">\(A\)</span>.</p></li>
<li><p>Calculate the relative bias of the asymptotic variance estimator.</p></li>
<li><p>Using the work from above, wrap your code in an <code>alpha_performance()</code> function that takes the simulation results returned by <code>run_alpha_sim</code> and returns a one-row data frame with columns corresponding to the bias, mean squared error, and relative bias of the asymptotic variance estimator.</p></li>
</ol>
<p>E.g., a function that behaves like so:</p>
<div class="sourceCode" id="cb349"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb349-1"><a href="case_Cronbach.html#cb349-1" tabindex="-1"></a><span class="fu">alpha_performance</span>(results, true_alpha)</span></code></pre></div>
<pre><code>##          bias     bias_SE        SE       MSE
## 1 -0.02329445 0.003741931 0.1183302 0.1205433
##    bias_Var
## 1 0.5078144</code></pre>
<ol start="6" style="list-style-type: decimal">
<li><p>Extend your function to add in the MCSEs for the SE and MSE. Code up the skewness and kurtosis values by hand, using the formula in the MCSE section of the performance measure chapter.</p></li>
<li><p><strong>(Challenge problem)</strong> Code up a jackknife MCSE function to calculate the MCSE for the relative bias of the asymptotic variance estimator.
Use the following template that takes a vector of point estimates and associated standard errors.</p></li>
</ol>
<div class="sourceCode" id="cb351"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb351-1"><a href="case_Cronbach.html#cb351-1" tabindex="-1"></a>jackknife_MCSE <span class="ot">&lt;-</span> <span class="cf">function</span>( estimates, SEs ) {</span>
<span id="cb351-2"><a href="case_Cronbach.html#cb351-2" tabindex="-1"></a>  <span class="co"># code</span></span>
<span id="cb351-3"><a href="case_Cronbach.html#cb351-3" tabindex="-1"></a>}</span></code></pre></div>
<p>You would use this function as:</p>
<div class="sourceCode" id="cb352"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb352-1"><a href="case_Cronbach.html#cb352-1" tabindex="-1"></a><span class="fu">jackknife_MCSE</span>( alpha_reps<span class="sc">$</span>A, <span class="fu">sqrt</span>( alpha_reps<span class="sc">$</span>Var ) )</span></code></pre></div>
</div>
</div>
<div id="replication-and-the-simulation" class="section level2 hasAnchor" number="10.6">
<h2><span class="header-section-number">10.6</span> Replication (and the simulation)<a href="case_Cronbach.html#replication-and-the-simulation" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We now have all the components we need to get simulation results, given a set of parameter values.
In the next section of the template, we put all these pieces together in a function—which we might call the <em>simulation driver</em>—that takes as input 1) parameter values, 2) the desired number of replications, and 3) optionally, a seed value (this allows for reproducability, see Chapter <a href="#sec-reproducability"><strong>??</strong></a>. The function produces as output a single set of performance estimates. Generically, the function looks like this:</p>
<div class="sourceCode" id="cb353"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb353-1"><a href="case_Cronbach.html#cb353-1" tabindex="-1"></a><span class="co">#-----------------------------------------------------------</span></span>
<span id="cb353-2"><a href="case_Cronbach.html#cb353-2" tabindex="-1"></a><span class="co"># Simulation Driver - should return a data.frame or tibble</span></span>
<span id="cb353-3"><a href="case_Cronbach.html#cb353-3" tabindex="-1"></a><span class="co">#-----------------------------------------------------------</span></span>
<span id="cb353-4"><a href="case_Cronbach.html#cb353-4" tabindex="-1"></a></span>
<span id="cb353-5"><a href="case_Cronbach.html#cb353-5" tabindex="-1"></a>runSim <span class="ot">&lt;-</span> <span class="cf">function</span>(iterations, model_params, design_params, <span class="at">seed =</span> <span class="cn">NULL</span>) {</span>
<span id="cb353-6"><a href="case_Cronbach.html#cb353-6" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.null</span>(seed)) <span class="fu">set.seed</span>(seed)</span>
<span id="cb353-7"><a href="case_Cronbach.html#cb353-7" tabindex="-1"></a></span>
<span id="cb353-8"><a href="case_Cronbach.html#cb353-8" tabindex="-1"></a>  results <span class="ot">&lt;-</span> <span class="fu">rerun</span>(iterations, {</span>
<span id="cb353-9"><a href="case_Cronbach.html#cb353-9" tabindex="-1"></a>                dat <span class="ot">&lt;-</span> <span class="fu">dgm</span>(model_params)</span>
<span id="cb353-10"><a href="case_Cronbach.html#cb353-10" tabindex="-1"></a>                <span class="fu">estimate</span>(dat, design_params)</span>
<span id="cb353-11"><a href="case_Cronbach.html#cb353-11" tabindex="-1"></a>              }) <span class="sc">%&gt;%</span></span>
<span id="cb353-12"><a href="case_Cronbach.html#cb353-12" tabindex="-1"></a>    <span class="fu">bind_rows</span>()</span>
<span id="cb353-13"><a href="case_Cronbach.html#cb353-13" tabindex="-1"></a>  </span>
<span id="cb353-14"><a href="case_Cronbach.html#cb353-14" tabindex="-1"></a></span>
<span id="cb353-15"><a href="case_Cronbach.html#cb353-15" tabindex="-1"></a>  <span class="fu">performance</span>(results, model_params)</span>
<span id="cb353-16"><a href="case_Cronbach.html#cb353-16" tabindex="-1"></a>}</span>
<span id="cb353-17"><a href="case_Cronbach.html#cb353-17" tabindex="-1"></a></span>
<span id="cb353-18"><a href="case_Cronbach.html#cb353-18" tabindex="-1"></a><span class="co"># demonstrate the simulation driver</span></span></code></pre></div>
<p>The <code>runSim</code> function should require very little modification for a new simulation. Essentially, all we need to change is the names of the functions that are called, so that they line up with the functions we have designed for our simulation. Here’s what this looks like for the Cronbach alpha simulation (we pull out the code to replicate into its own method, <code>one_run()</code>, which helps with debugging):</p>
<div class="sourceCode" id="cb354"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb354-1"><a href="case_Cronbach.html#cb354-1" tabindex="-1"></a><span class="co">#-----------------------------------------------------------</span></span>
<span id="cb354-2"><a href="case_Cronbach.html#cb354-2" tabindex="-1"></a><span class="co"># Simulation Driver - should return a data.frame or tibble</span></span>
<span id="cb354-3"><a href="case_Cronbach.html#cb354-3" tabindex="-1"></a><span class="co">#-----------------------------------------------------------</span></span>
<span id="cb354-4"><a href="case_Cronbach.html#cb354-4" tabindex="-1"></a></span>
<span id="cb354-5"><a href="case_Cronbach.html#cb354-5" tabindex="-1"></a></span>
<span id="cb354-6"><a href="case_Cronbach.html#cb354-6" tabindex="-1"></a>one_run <span class="ot">&lt;-</span> <span class="cf">function</span>( n, p, alpha, df ) {</span>
<span id="cb354-7"><a href="case_Cronbach.html#cb354-7" tabindex="-1"></a>    dat <span class="ot">&lt;-</span> <span class="fu">r_mvt_items</span>(<span class="at">n =</span> n, <span class="at">p =</span> p, <span class="at">alpha =</span> alpha, <span class="at">df =</span> df)</span>
<span id="cb354-8"><a href="case_Cronbach.html#cb354-8" tabindex="-1"></a>    <span class="fu">estimate_alpha</span>(dat)</span>
<span id="cb354-9"><a href="case_Cronbach.html#cb354-9" tabindex="-1"></a>}</span>
<span id="cb354-10"><a href="case_Cronbach.html#cb354-10" tabindex="-1"></a></span>
<span id="cb354-11"><a href="case_Cronbach.html#cb354-11" tabindex="-1"></a></span>
<span id="cb354-12"><a href="case_Cronbach.html#cb354-12" tabindex="-1"></a>run_alpha_sim <span class="ot">&lt;-</span> <span class="cf">function</span>(iterations, n, p, alpha, df, <span class="at">seed =</span> <span class="cn">NULL</span>) {</span>
<span id="cb354-13"><a href="case_Cronbach.html#cb354-13" tabindex="-1"></a>  </span>
<span id="cb354-14"><a href="case_Cronbach.html#cb354-14" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.null</span>(seed)) <span class="fu">set.seed</span>(seed)</span>
<span id="cb354-15"><a href="case_Cronbach.html#cb354-15" tabindex="-1"></a></span>
<span id="cb354-16"><a href="case_Cronbach.html#cb354-16" tabindex="-1"></a>  results <span class="ot">&lt;-</span> </span>
<span id="cb354-17"><a href="case_Cronbach.html#cb354-17" tabindex="-1"></a>    <span class="fu">rerun</span>(iterations, <span class="fu">one_run</span>(n, p, alpha, df) ) <span class="sc">%&gt;%</span></span>
<span id="cb354-18"><a href="case_Cronbach.html#cb354-18" tabindex="-1"></a>    <span class="fu">bind_rows</span>()</span>
<span id="cb354-19"><a href="case_Cronbach.html#cb354-19" tabindex="-1"></a>  </span>
<span id="cb354-20"><a href="case_Cronbach.html#cb354-20" tabindex="-1"></a>  <span class="fu">alpha_performance</span>(results, <span class="at">alpha =</span> alpha)</span>
<span id="cb354-21"><a href="case_Cronbach.html#cb354-21" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="extension-confidence-interval-coverage" class="section level2 hasAnchor" number="10.7">
<h2><span class="header-section-number">10.7</span> Extension: Confidence interval coverage<a href="case_Cronbach.html#extension-confidence-interval-coverage" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>However, van Zyl, Neudecker, and Nel (2000) suggest that a better approximation involves first applying a transformation to <span class="math inline">\(A\)</span> (to make it more normal in shape), then calculating a confidence interval, then back-transforming to the original scale (this is very similar to the procedure for calculating confidence intervals for correlation coefficients, using Fisher’s <span class="math inline">\(z\)</span> transformation). Let our transformed parameter and estimator be</p>
<p><span class="math display">\[
\begin{aligned}
\beta &amp;= \frac{1}{2} \ln\left(1 - \alpha\right) \\
B &amp;= \frac{1}{2} \ln\left(1 - A\right)
\end{aligned}
\]</span></p>
<p>and our transformed variance estimator be</p>
<p><span class="math display">\[
V^B = \frac{p}{2 n (p - 1)}.
\]</span>
(This expression comes from a Delta method expansion on <span class="math inline">\(A\)</span>.)</p>
<p>An approximate confidence interval for <span class="math inline">\(\beta\)</span> is given by <span class="math inline">\([B_L, B_U]\)</span>, where</p>
<p><span class="math display">\[
B_L = B - z \sqrt{V^B}, \qquad B_U = B + z \sqrt{V^B}.
\]</span></p>
<p>Applying the inverse of the transformation gives a confidence interval for <span class="math inline">\(\alpha\)</span>:</p>
<p><span class="math display">\[
\left[1 - \exp(2B_U), \ 1 - \exp(2 B_L)\right].
\]</span></p>
</div>
<div id="a-taste-of-multiple-scenarios" class="section level2 hasAnchor" number="10.8">
<h2><span class="header-section-number">10.8</span> A taste of multiple scenarios<a href="case_Cronbach.html#a-taste-of-multiple-scenarios" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In the previous sections, we’ve created code that will generate a set of performance estimates, given a set of parameter values. We can created a dataset that represents every combination of parameter values that we want to examine. How do we put the pieces together?</p>
<p>If we only had a couple of parameter combinations, it would be easy enough to just call our <code>run_alpha_sim</code> function a couple of times:</p>
<div class="sourceCode" id="cb355"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb355-1"><a href="case_Cronbach.html#cb355-1" tabindex="-1"></a><span class="fu">run_alpha_sim</span>(<span class="at">iterations =</span> <span class="dv">100</span>, <span class="at">n =</span> <span class="dv">50</span>, <span class="at">p =</span> <span class="dv">4</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>, <span class="at">df =</span> <span class="dv">5</span>)</span></code></pre></div>
<pre><code>## Warning: `rerun()` was deprecated in purrr 1.0.0.
## ℹ Please use `map()` instead.
##   # Previously
##   rerun(100, one_run(n, p, alpha, df))
## 
##   # Now
##   map(1:100, ~ one_run(n, p, alpha, df))
## This warning is displayed once every 8 hours.
## Call `lifecycle::last_lifecycle_warnings()` to
## see where this warning was generated.</code></pre>
<pre><code>##          bias    bias_SE        SE       MSE
## 1 -0.01211522 0.01088426 0.1088426 0.1089725
##    bias_Var
## 1 0.4913622</code></pre>
<div class="sourceCode" id="cb358"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb358-1"><a href="case_Cronbach.html#cb358-1" tabindex="-1"></a><span class="fu">run_alpha_sim</span>(<span class="at">iterations =</span> <span class="dv">100</span>, <span class="at">n =</span> <span class="dv">100</span>, <span class="at">p =</span> <span class="dv">4</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>, <span class="at">df =</span> <span class="dv">5</span>)</span></code></pre></div>
<pre><code>##         bias    bias_SE        SE        MSE
## 1 -0.0117337 0.00761985 0.0761985 0.07671916
##    bias_Var
## 1 0.4727169</code></pre>
<div class="sourceCode" id="cb360"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb360-1"><a href="case_Cronbach.html#cb360-1" tabindex="-1"></a><span class="fu">run_alpha_sim</span>(<span class="at">iterations =</span> <span class="dv">100</span>, <span class="at">n =</span> <span class="dv">50</span>, <span class="at">p =</span> <span class="dv">8</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>, <span class="at">df =</span> <span class="dv">5</span>)</span></code></pre></div>
<pre><code>##          bias    bias_SE        SE       MSE
## 1 -0.02601087 0.01120983 0.1120983 0.1145292
##    bias_Var
## 1 0.4319068</code></pre>
<div class="sourceCode" id="cb362"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb362-1"><a href="case_Cronbach.html#cb362-1" tabindex="-1"></a><span class="fu">run_alpha_sim</span>(<span class="at">iterations =</span> <span class="dv">100</span>, <span class="at">n =</span> <span class="dv">100</span>, <span class="at">p =</span> <span class="dv">8</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>, <span class="at">df =</span> <span class="dv">5</span>)</span></code></pre></div>
<pre><code>##          bias     bias_SE         SE        MSE
## 1 0.007758062 0.006203414 0.06203414 0.06220884
##    bias_Var
## 1 0.5299059</code></pre>
<p>But in an actual simulation we will probably have too many different combinations to do this “by hand.”
The final sections of the simulation template demonstrate two different approaches to doing the calculations for <em>every</em> combination of parameter values, given a set of parameter values one wants to explore.</p>
<p>This is discussed further in Chapter @ref(exp_design), but let’s get a small taste of doing this now.
In particular, the following code will evaluate the performance of <span class="math inline">\(A\)</span> for true values of <span class="math inline">\(\alpha\)</span> ranging from 0.5 to 0.9 (i.e., <code>alpha_true_seq &lt;- seq(0.5, 0.9, 0.1)</code>) via <code>map_df()</code>:</p>
<div class="sourceCode" id="cb364"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb364-1"><a href="case_Cronbach.html#cb364-1" tabindex="-1"></a>alpha_true_seq <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="fl">0.5</span>, <span class="fl">0.9</span>, <span class="fl">0.1</span>)</span>
<span id="cb364-2"><a href="case_Cronbach.html#cb364-2" tabindex="-1"></a>results <span class="ot">&lt;-</span> <span class="fu">map_df</span>( alpha_true_seq, </span>
<span id="cb364-3"><a href="case_Cronbach.html#cb364-3" tabindex="-1"></a>                   run_simulation,</span>
<span id="cb364-4"><a href="case_Cronbach.html#cb364-4" tabindex="-1"></a>                   <span class="at">R =</span> <span class="dv">100</span>,</span>
<span id="cb364-5"><a href="case_Cronbach.html#cb364-5" tabindex="-1"></a>                   <span class="at">n =</span> <span class="dv">50</span>, <span class="at">p =</span> <span class="dv">5</span>, <span class="at">df =</span> <span class="dv">5</span> )</span></code></pre></div>
<p>How does coverage change for different values of <span class="math inline">\(A\)</span>?</p>
<div id="exercises-7" class="section level3 hasAnchor" number="10.8.1">
<h3><span class="header-section-number">10.8.1</span> Exercises<a href="case_Cronbach.html#exercises-7" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li><p>Show the inverse transform of <span class="math inline">\(B = g(A)\)</span> gives the above expression.</p></li>
<li><p>Make a new function, <code>estimate_alpha_xform()</code> that, given a dataset, calculates a confidence interval for <span class="math inline">\(\alpha\)</span> following the method described above.</p></li>
<li><p>Using the modified <code>estimate_alpha_xform()</code>, generate 1000 replicated confidence intervals for <span class="math inline">\(n = 40\)</span>, <span class="math inline">\(p = 6\)</span> items, a true <span class="math inline">\(\alpha = 0.8\)</span>, and <span class="math inline">\(v = 5\)</span> degrees of freedom. Using these replicates, calculate the true coverage rate of the confidence interval. Also calculate the Monte Carlo standard error (MCSE) of this coverage rate.</p></li>
<li><p>Calculate the average length of the confidence interval for <span class="math inline">\(\alpha\)</span>, along with its MCSE.</p></li>
<li><p>Compare the results of this approach to the more naive approach. Are there gains in performance?</p></li>
<li><p><em>Challenge</em> Derive the variance expression for the transformed estimator using the Delta method on the variance expression for <span class="math inline">\(A\)</span> coupled with the transform. The Delta method says that:</p></li>
</ol>
<p><span class="math display">\[ var( f(A) ) \approx \frac{1}{f&#39;(\alpha)} (A - \alpha)^2 . \]</span></p>

</div>
</div>
</div>



            </section>

          </div>
        </div>
      </div>
<a href="performance-criteria.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="exp-design.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": false,
    "facebook": true,
    "twitter": true,
    "linkedin": false,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": {
    "link": "https://github.com/jepusto/Designing-Simulations-in-R/edit/master/060-case-study-cronbach-alpha.Rmd",
    "text": "Edit"
  },
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": ["Designing-Simulations-in-R.pdf", "Designing-Simulations-in-R.epub"],
  "search": {
    "engine": "lunr",
    "options": null
  },
  "toc": {
    "collapse": "section",
    "scroll_highlight": true
  },
  "toolbar": {
    "position": "fixed"
  },
  "info": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
