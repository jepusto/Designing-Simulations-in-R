<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 18 Simulation under the Potential Outcomes Framework | Designing Monte Carlo Simulations in R</title>
  <meta name="description" content="A text on designing, implementing, and reporting on Monte Carlo simulation studies" />
  <meta name="generator" content="bookdown 0.26 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 18 Simulation under the Potential Outcomes Framework | Designing Monte Carlo Simulations in R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="A text on designing, implementing, and reporting on Monte Carlo simulation studies" />
  <meta name="github-repo" content="jepusto/Designing-Simulations-in-R" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 18 Simulation under the Potential Outcomes Framework | Designing Monte Carlo Simulations in R" />
  
  <meta name="twitter:description" content="A text on designing, implementing, and reporting on Monte Carlo simulation studies" />
  

<meta name="author" content="James E. Pustejovsky and Luke W. Miratrix" />


<meta name="date" content="2022-05-12" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="design-analysis-and-presentation-of-simulation-results.html"/>
<link rel="next" href="simulations-as-evidence.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Designing Simulations in R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#license"><i class="fa fa-check"></i>License</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="about-the-authors.html"><a href="about-the-authors.html"><i class="fa fa-check"></i>About the authors</a></li>
<li class="chapter" data-level="" data-path="acknowledgements.html"><a href="acknowledgements.html"><i class="fa fa-check"></i>Acknowledgements</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#some-of-simulations-many-uses"><i class="fa fa-check"></i><b>1.1</b> Some of simulation’s many uses</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="introduction.html"><a href="introduction.html#comparing-statistical-approaches"><i class="fa fa-check"></i><b>1.1.1</b> Comparing statistical approaches</a></li>
<li class="chapter" data-level="1.1.2" data-path="introduction.html"><a href="introduction.html#assessing-performance-of-complex-pipelines"><i class="fa fa-check"></i><b>1.1.2</b> Assessing performance of complex pipelines</a></li>
<li class="chapter" data-level="1.1.3" data-path="introduction.html"><a href="introduction.html#assessing-performance-under-misspecification"><i class="fa fa-check"></i><b>1.1.3</b> Assessing performance under misspecification</a></li>
<li class="chapter" data-level="1.1.4" data-path="introduction.html"><a href="introduction.html#assessing-the-finite-sample-performance-of-a-statistical-approach"><i class="fa fa-check"></i><b>1.1.4</b> Assessing the finite sample performance of a statistical approach</a></li>
<li class="chapter" data-level="1.1.5" data-path="introduction.html"><a href="introduction.html#conducting-power-analyses"><i class="fa fa-check"></i><b>1.1.5</b> Conducting Power Analyses</a></li>
<li class="chapter" data-level="1.1.6" data-path="introduction.html"><a href="introduction.html#simulating-processess"><i class="fa fa-check"></i><b>1.1.6</b> Simulating processess</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#the-perils-of-simulation-as-evidence"><i class="fa fa-check"></i><b>1.2</b> The perils of simulation as evidence</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#why-r-and-rstudio"><i class="fa fa-check"></i><b>1.3</b> Why R and RStudio?</a></li>
<li class="chapter" data-level="1.4" data-path="introduction.html"><a href="introduction.html#some-preliminaries"><i class="fa fa-check"></i><b>1.4</b> Some preliminaries</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="introduction.html"><a href="introduction.html#functions"><i class="fa fa-check"></i><b>1.4.1</b> Functions</a></li>
<li class="chapter" data-level="1.4.2" data-path="introduction.html"><a href="introduction.html#a-dangerous-function"><i class="fa fa-check"></i><b>1.4.2</b> A dangerous function</a></li>
<li class="chapter" data-level="1.4.3" data-path="introduction.html"><a href="introduction.html#function-skeletons"><i class="fa fa-check"></i><b>1.4.3</b> Function skeletons</a></li>
<li class="chapter" data-level="1.4.4" data-path="introduction.html"><a href="introduction.html#pipe-dreams"><i class="fa fa-check"></i><b>1.4.4</b> <code>%&gt;%</code> (Pipe) dreams</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="an-initial-simulation.html"><a href="an-initial-simulation.html"><i class="fa fa-check"></i><b>2</b> An initial simulation</a>
<ul>
<li class="chapter" data-level="2.1" data-path="an-initial-simulation.html"><a href="an-initial-simulation.html#simulation-for-a-single-scenario"><i class="fa fa-check"></i><b>2.1</b> Simulation for a single scenario</a></li>
<li class="chapter" data-level="2.2" data-path="an-initial-simulation.html"><a href="an-initial-simulation.html#simulating-across-different-scenarios"><i class="fa fa-check"></i><b>2.2</b> Simulating across different scenarios</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="structure-of-a-simulation-study.html"><a href="structure-of-a-simulation-study.html"><i class="fa fa-check"></i><b>3</b> Structure of a simulation study</a>
<ul>
<li class="chapter" data-level="3.1" data-path="structure-of-a-simulation-study.html"><a href="structure-of-a-simulation-study.html#general-structure-of-a-simulation"><i class="fa fa-check"></i><b>3.1</b> General structure of a simulation</a></li>
<li class="chapter" data-level="3.2" data-path="structure-of-a-simulation-study.html"><a href="structure-of-a-simulation-study.html#tidy-simulations"><i class="fa fa-check"></i><b>3.2</b> Tidy simulations</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="structure-of-a-simulation-study.html"><a href="structure-of-a-simulation-study.html#data-generating-model"><i class="fa fa-check"></i><b>3.2.1</b> Data-generating model</a></li>
<li class="chapter" data-level="3.2.2" data-path="structure-of-a-simulation-study.html"><a href="structure-of-a-simulation-study.html#estimation-methods"><i class="fa fa-check"></i><b>3.2.2</b> Estimation methods</a></li>
<li class="chapter" data-level="3.2.3" data-path="structure-of-a-simulation-study.html"><a href="structure-of-a-simulation-study.html#repetition"><i class="fa fa-check"></i><b>3.2.3</b> Repetition</a></li>
<li class="chapter" data-level="3.2.4" data-path="structure-of-a-simulation-study.html"><a href="structure-of-a-simulation-study.html#performance-summaries"><i class="fa fa-check"></i><b>3.2.4</b> Performance summaries</a></li>
<li class="chapter" data-level="3.2.5" data-path="structure-of-a-simulation-study.html"><a href="structure-of-a-simulation-study.html#results"><i class="fa fa-check"></i><b>3.2.5</b> Results</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="structure-of-a-simulation-study.html"><a href="structure-of-a-simulation-study.html#multiple-scenarios"><i class="fa fa-check"></i><b>3.3</b> Multiple Scenarios</a></li>
<li class="chapter" data-level="3.4" data-path="structure-of-a-simulation-study.html"><a href="structure-of-a-simulation-study.html#keeping-the-pieces-organized"><i class="fa fa-check"></i><b>3.4</b> Keeping the pieces organized</a></li>
<li class="chapter" data-level="3.5" data-path="structure-of-a-simulation-study.html"><a href="structure-of-a-simulation-study.html#further-readings-resources"><i class="fa fa-check"></i><b>3.5</b> Further readings &amp; resources</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="case_ANOVA.html"><a href="case_ANOVA.html"><i class="fa fa-check"></i><b>4</b> Case Study: Heteroskedastic ANOVA</a>
<ul>
<li class="chapter" data-level="4.1" data-path="case_ANOVA.html"><a href="case_ANOVA.html#the-data-generating-model"><i class="fa fa-check"></i><b>4.1</b> The data-generating model</a></li>
<li class="chapter" data-level="4.2" data-path="case_ANOVA.html"><a href="case_ANOVA.html#the-estimation-procedures"><i class="fa fa-check"></i><b>4.2</b> The estimation procedures</a></li>
<li class="chapter" data-level="4.3" data-path="case_ANOVA.html"><a href="case_ANOVA.html#replication"><i class="fa fa-check"></i><b>4.3</b> Replication</a></li>
<li class="chapter" data-level="4.4" data-path="case_ANOVA.html"><a href="case_ANOVA.html#calculating-rejection-rates"><i class="fa fa-check"></i><b>4.4</b> Calculating rejection rates</a></li>
<li class="chapter" data-level="4.5" data-path="case_ANOVA.html"><a href="case_ANOVA.html#exAnovaExercises"><i class="fa fa-check"></i><b>4.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="data-generating-models.html"><a href="data-generating-models.html"><i class="fa fa-check"></i><b>5</b> Data-generating models</a>
<ul>
<li class="chapter" data-level="5.1" data-path="data-generating-models.html"><a href="data-generating-models.html#computational-efficiency-versus-simplicity"><i class="fa fa-check"></i><b>5.1</b> Computational efficiency versus simplicity</a></li>
<li class="chapter" data-level="5.2" data-path="data-generating-models.html"><a href="data-generating-models.html#checking-the-data-generating-function"><i class="fa fa-check"></i><b>5.2</b> Checking the data-generating function</a></li>
<li class="chapter" data-level="5.3" data-path="data-generating-models.html"><a href="data-generating-models.html#exercises"><i class="fa fa-check"></i><b>5.3</b> Exercises</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="data-generating-models.html"><a href="data-generating-models.html#shifted-and-scaled-t-distribution"><i class="fa fa-check"></i><b>5.3.1</b> Shifted-and-scaled t distribution</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="estimation-procedures.html"><a href="estimation-procedures.html"><i class="fa fa-check"></i><b>6</b> Estimation procedures</a>
<ul>
<li class="chapter" data-level="6.1" data-path="estimation-procedures.html"><a href="estimation-procedures.html#further-notes-on-computational-efficiency"><i class="fa fa-check"></i><b>6.1</b> Further notes on computational efficiency</a></li>
<li class="chapter" data-level="6.2" data-path="estimation-procedures.html"><a href="estimation-procedures.html#checking-the-estimation-function"><i class="fa fa-check"></i><b>6.2</b> Checking the estimation function</a></li>
<li class="chapter" data-level="6.3" data-path="estimation-procedures.html"><a href="estimation-procedures.html#exercises-1"><i class="fa fa-check"></i><b>6.3</b> Exercises</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="estimation-procedures.html"><a href="estimation-procedures.html#adding-the-bff-test"><i class="fa fa-check"></i><b>6.3.1</b> Adding the BFF* test</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="performance-criteria.html"><a href="performance-criteria.html"><i class="fa fa-check"></i><b>7</b> Performance criteria</a>
<ul>
<li class="chapter" data-level="7.1" data-path="performance-criteria.html"><a href="performance-criteria.html#inference-vs.-estimation"><i class="fa fa-check"></i><b>7.1</b> Inference vs. Estimation</a></li>
<li class="chapter" data-level="7.2" data-path="performance-criteria.html"><a href="performance-criteria.html#evaluation-of-estimation-methods"><i class="fa fa-check"></i><b>7.2</b> Evaluation of Estimation Methods</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="performance-criteria.html"><a href="performance-criteria.html#assessing-actual-properties"><i class="fa fa-check"></i><b>7.2.1</b> Assessing actual properties</a></li>
<li class="chapter" data-level="7.2.2" data-path="performance-criteria.html"><a href="performance-criteria.html#assessing-estimated-properties"><i class="fa fa-check"></i><b>7.2.2</b> Assessing estimated properties</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="performance-criteria.html"><a href="performance-criteria.html#assessing-a-point-estimator"><i class="fa fa-check"></i><b>7.3</b> Assessing a point estimator</a></li>
<li class="chapter" data-level="7.4" data-path="performance-criteria.html"><a href="performance-criteria.html#assessing-a-standard-error-estimator"><i class="fa fa-check"></i><b>7.4</b> Assessing a standard error estimator</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="performance-criteria.html"><a href="performance-criteria.html#why-not-assess-widehatse-directly"><i class="fa fa-check"></i><b>7.4.1</b> Why not assess <span class="math inline">\(widehat{SE}\)</span> directly?</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="performance-criteria.html"><a href="performance-criteria.html#assessing-a-hypothesis-testing-procedure"><i class="fa fa-check"></i><b>7.5</b> Assessing a hypothesis testing procedure</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="performance-criteria.html"><a href="performance-criteria.html#validity"><i class="fa fa-check"></i><b>7.5.1</b> Validity</a></li>
<li class="chapter" data-level="7.5.2" data-path="performance-criteria.html"><a href="performance-criteria.html#power"><i class="fa fa-check"></i><b>7.5.2</b> Power</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="performance-criteria.html"><a href="performance-criteria.html#assessing-confidence-intervals"><i class="fa fa-check"></i><b>7.6</b> Assessing confidence intervals</a></li>
<li class="chapter" data-level="7.7" data-path="performance-criteria.html"><a href="performance-criteria.html#uncertainty-in-our-performance-estimates-the-mcse"><i class="fa fa-check"></i><b>7.7</b> Uncertainty in our performance estimates (the MCSE)</a>
<ul>
<li class="chapter" data-level="7.7.1" data-path="performance-criteria.html"><a href="performance-criteria.html#mcse-for-variance-estimators"><i class="fa fa-check"></i><b>7.7.1</b> MCSE for variance estimators</a></li>
<li class="chapter" data-level="7.7.2" data-path="performance-criteria.html"><a href="performance-criteria.html#the-simhelpers-package-and-mcses"><i class="fa fa-check"></i><b>7.7.2</b> The simhelpers package and MCSEs</a></li>
</ul></li>
<li class="chapter" data-level="7.8" data-path="performance-criteria.html"><a href="performance-criteria.html#absolute-vs.-relative-performance-measures"><i class="fa fa-check"></i><b>7.8</b> Absolute vs. relative performance measures</a></li>
<li class="chapter" data-level="7.9" data-path="performance-criteria.html"><a href="performance-criteria.html#exercises-simulating-cronbachs-alpha"><i class="fa fa-check"></i><b>7.9</b> Exercises: Simulating Cronbach’s alpha</a>
<ul>
<li class="chapter" data-level="7.9.1" data-path="performance-criteria.html"><a href="performance-criteria.html#the-data-generating-function"><i class="fa fa-check"></i><b>7.9.1</b> The data-generating function</a></li>
<li class="chapter" data-level="7.9.2" data-path="performance-criteria.html"><a href="performance-criteria.html#the-estimation-function"><i class="fa fa-check"></i><b>7.9.2</b> The estimation function</a></li>
<li class="chapter" data-level="7.9.3" data-path="performance-criteria.html"><a href="performance-criteria.html#replicates"><i class="fa fa-check"></i><b>7.9.3</b> Replicates</a></li>
<li class="chapter" data-level="7.9.4" data-path="performance-criteria.html"><a href="performance-criteria.html#estimator-performance"><i class="fa fa-check"></i><b>7.9.4</b> Estimator performance</a></li>
<li class="chapter" data-level="7.9.5" data-path="performance-criteria.html"><a href="performance-criteria.html#confidence-interval-coverage"><i class="fa fa-check"></i><b>7.9.5</b> Confidence interval coverage</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="case_Cronbach.html"><a href="case_Cronbach.html"><i class="fa fa-check"></i><b>8</b> Case study: Cronbach Alpha</a>
<ul>
<li class="chapter" data-level="8.1" data-path="case_Cronbach.html"><a href="case_Cronbach.html#data-generating-model-1"><i class="fa fa-check"></i><b>8.1</b> Data-generating model</a></li>
<li class="chapter" data-level="8.2" data-path="case_Cronbach.html"><a href="case_Cronbach.html#estimation-procedures-1"><i class="fa fa-check"></i><b>8.2</b> Estimation procedures</a></li>
<li class="chapter" data-level="8.3" data-path="case_Cronbach.html"><a href="case_Cronbach.html#performance-calculations"><i class="fa fa-check"></i><b>8.3</b> Performance calculations</a></li>
<li class="chapter" data-level="8.4" data-path="case_Cronbach.html"><a href="case_Cronbach.html#simulation-driver"><i class="fa fa-check"></i><b>8.4</b> Simulation driver</a></li>
<li class="chapter" data-level="8.5" data-path="case_Cronbach.html"><a href="case_Cronbach.html#running-the-simulation"><i class="fa fa-check"></i><b>8.5</b> Running the simulation</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="ensuring-reproducibility.html"><a href="ensuring-reproducibility.html"><i class="fa fa-check"></i><b>9</b> Ensuring reproducibility</a>
<ul>
<li class="chapter" data-level="9.1" data-path="ensuring-reproducibility.html"><a href="ensuring-reproducibility.html#seeds-and-pseudo-random-number-generators"><i class="fa fa-check"></i><b>9.1</b> Seeds and pseudo-random number generators</a></li>
<li class="chapter" data-level="9.2" data-path="ensuring-reproducibility.html"><a href="ensuring-reproducibility.html#including-seed-in-our-simulation-driver"><i class="fa fa-check"></i><b>9.2</b> Including seed in our simulation driver</a></li>
<li class="chapter" data-level="9.3" data-path="ensuring-reproducibility.html"><a href="ensuring-reproducibility.html#reasons-for-setting-the-seed"><i class="fa fa-check"></i><b>9.3</b> Reasons for setting the seed</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="introduction.html"><a href="introduction.html#functions"><i class="fa fa-check"></i><b>10</b> More on functions</a>
<ul>
<li class="chapter" data-level="10.1" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>10.1</b> Default arguments for functions</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="case_cluster.html"><a href="case_cluster.html"><i class="fa fa-check"></i><b>11</b> Case study: A simulation with clustered data</a>
<ul>
<li class="chapter" data-level="11.1" data-path="case_cluster.html"><a href="case_cluster.html#a-design-decision-what-do-we-want-to-manipulate"><i class="fa fa-check"></i><b>11.1</b> A design decision: What do we want to manipulate?</a></li>
<li class="chapter" data-level="11.2" data-path="case_cluster.html"><a href="case_cluster.html#a-mathematical-model-for-cluster-randomized-data"><i class="fa fa-check"></i><b>11.2</b> A mathematical model for cluster-randomized data</a></li>
<li class="chapter" data-level="11.3" data-path="case_cluster.html"><a href="case_cluster.html#multilevel-data-generation-is-a-recipe-using-a-statistical-model"><i class="fa fa-check"></i><b>11.3</b> Multilevel data generation is a recipe using a statistical model</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="case_cluster.html"><a href="case_cluster.html#generating-the-multisite-data"><i class="fa fa-check"></i><b>11.3.1</b> Generating the multisite data</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="case_cluster.html"><a href="case_cluster.html#analyzing-our-data"><i class="fa fa-check"></i><b>11.4</b> Analyzing our data</a></li>
<li class="chapter" data-level="11.5" data-path="case_cluster.html"><a href="case_cluster.html#the-simulation"><i class="fa fa-check"></i><b>11.5</b> The simulation</a></li>
<li class="chapter" data-level="11.6" data-path="case_cluster.html"><a href="case_cluster.html#analysis-of-our-single-scenario"><i class="fa fa-check"></i><b>11.6</b> Analysis of our single scenario</a>
<ul>
<li class="chapter" data-level="11.6.1" data-path="case_cluster.html"><a href="case_cluster.html#are-the-estimators-biased"><i class="fa fa-check"></i><b>11.6.1</b> Are the estimators biased?</a></li>
<li class="chapter" data-level="11.6.2" data-path="case_cluster.html"><a href="case_cluster.html#which-method-has-the-smallest-standard-error"><i class="fa fa-check"></i><b>11.6.2</b> Which method has the smallest standard error?</a></li>
<li class="chapter" data-level="11.6.3" data-path="case_cluster.html"><a href="case_cluster.html#which-method-has-the-smallest-root-mean-squared-error"><i class="fa fa-check"></i><b>11.6.3</b> Which method has the smallest Root Mean Squared Error?</a></li>
<li class="chapter" data-level="11.6.4" data-path="case_cluster.html"><a href="case_cluster.html#do-the-methods-have-correctly-estimated-standard-errors"><i class="fa fa-check"></i><b>11.6.4</b> Do the methods have correctly estimated standard errors?</a></li>
<li class="chapter" data-level="11.6.5" data-path="case_cluster.html"><a href="case_cluster.html#did-we-have-enough-simulation-trials"><i class="fa fa-check"></i><b>11.6.5</b> Did we have enough simulation trials?</a></li>
</ul></li>
<li class="chapter" data-level="11.7" data-path="case_cluster.html"><a href="case_cluster.html#extending-to-a-multifactor-simulation"><i class="fa fa-check"></i><b>11.7</b> Extending to a multifactor simulation</a></li>
<li class="chapter" data-level="11.8" data-path="case_cluster.html"><a href="case_cluster.html#standardization-in-a-data-generating-process"><i class="fa fa-check"></i><b>11.8</b> Standardization in a data generating process</a></li>
<li class="chapter" data-level="11.9" data-path="case_cluster.html"><a href="case_cluster.html#making-analyze_data-quiet"><i class="fa fa-check"></i><b>11.9</b> Making analyze_data() quiet</a></li>
<li class="chapter" data-level="11.10" data-path="case_cluster.html"><a href="case_cluster.html#where-to-compute-performance-measures-inside-vs.-outside"><i class="fa fa-check"></i><b>11.10</b> Where to compute performance measures: inside vs. outside?</a></li>
<li class="chapter" data-level="11.11" data-path="case_cluster.html"><a href="case_cluster.html#run-the-simulation"><i class="fa fa-check"></i><b>11.11</b> Run the simulation</a></li>
<li class="chapter" data-level="11.12" data-path="case_cluster.html"><a href="case_cluster.html#analyzing-our-results"><i class="fa fa-check"></i><b>11.12</b> Analyzing our results</a>
<ul>
<li class="chapter" data-level="11.12.1" data-path="case_cluster.html"><a href="case_cluster.html#checking-on-convergence-issues"><i class="fa fa-check"></i><b>11.12.1</b> Checking on convergence issues</a></li>
<li class="chapter" data-level="11.12.2" data-path="case_cluster.html"><a href="case_cluster.html#calculating-standard-metrics"><i class="fa fa-check"></i><b>11.12.2</b> Calculating standard metrics</a></li>
<li class="chapter" data-level="11.12.3" data-path="case_cluster.html"><a href="case_cluster.html#bias-analysis"><i class="fa fa-check"></i><b>11.12.3</b> Bias analysis</a></li>
</ul></li>
<li class="chapter" data-level="11.13" data-path="case_cluster.html"><a href="case_cluster.html#exercises-2"><i class="fa fa-check"></i><b>11.13</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="error-trapping-and-other-headaches.html"><a href="error-trapping-and-other-headaches.html"><i class="fa fa-check"></i><b>12</b> Error trapping and other headaches</a>
<ul>
<li class="chapter" data-level="12.1" data-path="error-trapping-and-other-headaches.html"><a href="error-trapping-and-other-headaches.html#safe_code"><i class="fa fa-check"></i><b>12.1</b> Safe code</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="error-trapping-and-other-headaches.html"><a href="error-trapping-and-other-headaches.html#what-to-do-with-warnings"><i class="fa fa-check"></i><b>12.1.1</b> What to do with warnings</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="error-trapping-and-other-headaches.html"><a href="error-trapping-and-other-headaches.html#saving-files-and-results"><i class="fa fa-check"></i><b>12.2</b> Saving files and results</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="error-trapping-and-other-headaches.html"><a href="error-trapping-and-other-headaches.html#saving-simulations-as-you-go"><i class="fa fa-check"></i><b>12.2.1</b> Saving simulations as you go</a></li>
<li class="chapter" data-level="12.2.2" data-path="error-trapping-and-other-headaches.html"><a href="error-trapping-and-other-headaches.html#dynamically-making-directories"><i class="fa fa-check"></i><b>12.2.2</b> Dynamically making directories</a></li>
<li class="chapter" data-level="12.2.3" data-path="error-trapping-and-other-headaches.html"><a href="error-trapping-and-other-headaches.html#loading-and-combining-files-of-simulation-results"><i class="fa fa-check"></i><b>12.2.3</b> Loading and combining files of simulation results</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="exp_design.html"><a href="exp_design.html"><i class="fa fa-check"></i><b>13</b> Designing the multifactor simulation experiment</a>
<ul>
<li class="chapter" data-level="13.1" data-path="exp_design.html"><a href="exp_design.html#choosing-parameter-combinations"><i class="fa fa-check"></i><b>13.1</b> Choosing parameter combinations</a></li>
<li class="chapter" data-level="13.2" data-path="exp_design.html"><a href="exp_design.html#using-pmap-to-run-multifactor-simulations"><i class="fa fa-check"></i><b>13.2</b> Using pmap to run multifactor simulations</a></li>
<li class="chapter" data-level="13.3" data-path="exp_design.html"><a href="exp_design.html#keeping-things-organized-and-the-source-command"><i class="fa fa-check"></i><b>13.3</b> Keeping things organized and the source command</a></li>
<li class="chapter" data-level="13.4" data-path="exp_design.html"><a href="exp_design.html#analyzing-results-from-a-multifactor-experiment"><i class="fa fa-check"></i><b>13.4</b> Analyzing results from a multifactor experiment</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="exp_design.html"><a href="exp_design.html#bundling"><i class="fa fa-check"></i><b>13.4.1</b> Bundling</a></li>
<li class="chapter" data-level="13.4.2" data-path="exp_design.html"><a href="exp_design.html#aggregation"><i class="fa fa-check"></i><b>13.4.2</b> Aggregation</a></li>
<li class="chapter" data-level="13.4.3" data-path="exp_design.html"><a href="exp_design.html#regression-summarization"><i class="fa fa-check"></i><b>13.4.3</b> Regression Summarization</a></li>
<li class="chapter" data-level="13.4.4" data-path="exp_design.html"><a href="exp_design.html#focus-on-subset-kick-rest-to-supplement"><i class="fa fa-check"></i><b>13.4.4</b> Focus on subset, kick rest to supplement</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="case-study-a-simulation-to-compare-different-estimators.html"><a href="case-study-a-simulation-to-compare-different-estimators.html"><i class="fa fa-check"></i><b>14</b> Case study: A simulation to compare different estimators</a>
<ul>
<li class="chapter" data-level="14.1" data-path="case-study-a-simulation-to-compare-different-estimators.html"><a href="case-study-a-simulation-to-compare-different-estimators.html#the-data-generating-process"><i class="fa fa-check"></i><b>14.1</b> The data generating process</a></li>
<li class="chapter" data-level="14.2" data-path="case-study-a-simulation-to-compare-different-estimators.html"><a href="case-study-a-simulation-to-compare-different-estimators.html#the-data-analysis-methods"><i class="fa fa-check"></i><b>14.2</b> The data analysis methods</a></li>
<li class="chapter" data-level="14.3" data-path="case-study-a-simulation-to-compare-different-estimators.html"><a href="case-study-a-simulation-to-compare-different-estimators.html#the-simulation-itself"><i class="fa fa-check"></i><b>14.3</b> The simulation itself</a></li>
<li class="chapter" data-level="14.4" data-path="case-study-a-simulation-to-compare-different-estimators.html"><a href="case-study-a-simulation-to-compare-different-estimators.html#calculating-performance-measures-for-all-our-estimators"><i class="fa fa-check"></i><b>14.4</b> Calculating performance measures for all our estimators</a></li>
<li class="chapter" data-level="14.5" data-path="case-study-a-simulation-to-compare-different-estimators.html"><a href="case-study-a-simulation-to-compare-different-estimators.html#improving-the-visualization-of-the-results"><i class="fa fa-check"></i><b>14.5</b> Improving the visualization of the results</a></li>
<li class="chapter" data-level="14.6" data-path="case-study-a-simulation-to-compare-different-estimators.html"><a href="case-study-a-simulation-to-compare-different-estimators.html#extension-the-bias-variance-tradeoff"><i class="fa fa-check"></i><b>14.6</b> Extension: The Bias-variance tradeoff</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="parallel-processing.html"><a href="parallel-processing.html"><i class="fa fa-check"></i><b>15</b> Parallel Processing</a>
<ul>
<li class="chapter" data-level="15.1" data-path="parallel-processing.html"><a href="parallel-processing.html#parallel-on-your-computer"><i class="fa fa-check"></i><b>15.1</b> Parallel on your computer</a></li>
<li class="chapter" data-level="15.2" data-path="parallel-processing.html"><a href="parallel-processing.html#parallel-off-your-computer"><i class="fa fa-check"></i><b>15.2</b> Parallel off your computer</a>
<ul>
<li class="chapter" data-level="15.2.1" data-path="parallel-processing.html"><a href="parallel-processing.html#what-is-a-command-line-interface"><i class="fa fa-check"></i><b>15.2.1</b> What is a command-line interface?</a></li>
<li class="chapter" data-level="15.2.2" data-path="parallel-processing.html"><a href="parallel-processing.html#running-a-job-on-a-cluster"><i class="fa fa-check"></i><b>15.2.2</b> Running a job on a cluster</a></li>
<li class="chapter" data-level="15.2.3" data-path="parallel-processing.html"><a href="parallel-processing.html#checking-on-a-job"><i class="fa fa-check"></i><b>15.2.3</b> Checking on a job</a></li>
<li class="chapter" data-level="15.2.4" data-path="parallel-processing.html"><a href="parallel-processing.html#running-lots-of-jobs-on-a-cluster"><i class="fa fa-check"></i><b>15.2.4</b> Running lots of jobs on a cluster</a></li>
<li class="chapter" data-level="15.2.5" data-path="parallel-processing.html"><a href="parallel-processing.html#resources-for-harvards-odyssey"><i class="fa fa-check"></i><b>15.2.5</b> Resources for Harvard’s Odyssey</a></li>
<li class="chapter" data-level="15.2.6" data-path="parallel-processing.html"><a href="parallel-processing.html#acknowledgements-1"><i class="fa fa-check"></i><b>15.2.6</b> Acknowledgements</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="case-study-the-power-and-validity-of-neymans-ate-estimate.html"><a href="case-study-the-power-and-validity-of-neymans-ate-estimate.html"><i class="fa fa-check"></i><b>16</b> Case study: The Power and Validity of Neyman’s ATE Estimate</a>
<ul>
<li class="chapter" data-level="16.1" data-path="case-study-the-power-and-validity-of-neymans-ate-estimate.html"><a href="case-study-the-power-and-validity-of-neymans-ate-estimate.html#step-1-write-a-function-for-a-specific-simulation-given-specific-parameters."><i class="fa fa-check"></i><b>16.1</b> Step 1: Write a function for a specific simulation given specific parameters.</a>
<ul>
<li class="chapter" data-level="16.1.1" data-path="case-study-the-power-and-validity-of-neymans-ate-estimate.html"><a href="case-study-the-power-and-validity-of-neymans-ate-estimate.html#running-our-single-trial-more-than-once"><i class="fa fa-check"></i><b>16.1.1</b> Running our single trial more than once</a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="case-study-the-power-and-validity-of-neymans-ate-estimate.html"><a href="case-study-the-power-and-validity-of-neymans-ate-estimate.html#step-2-make-a-dataframe-of-all-experimental-combinations-desired"><i class="fa fa-check"></i><b>16.2</b> Step 2: Make a dataframe of all experimental combinations desired</a></li>
<li class="chapter" data-level="16.3" data-path="case-study-the-power-and-validity-of-neymans-ate-estimate.html"><a href="case-study-the-power-and-validity-of-neymans-ate-estimate.html#step-3-explore-results"><i class="fa fa-check"></i><b>16.3</b> Step 3: Explore results</a>
<ul>
<li class="chapter" data-level="16.3.1" data-path="case-study-the-power-and-validity-of-neymans-ate-estimate.html"><a href="case-study-the-power-and-validity-of-neymans-ate-estimate.html#visualizing-experimental-results"><i class="fa fa-check"></i><b>16.3.1</b> Visualizing experimental results</a></li>
<li class="chapter" data-level="16.3.2" data-path="case-study-the-power-and-validity-of-neymans-ate-estimate.html"><a href="case-study-the-power-and-validity-of-neymans-ate-estimate.html#looking-at-main-effects"><i class="fa fa-check"></i><b>16.3.2</b> Looking at main effects</a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="case-study-the-power-and-validity-of-neymans-ate-estimate.html"><a href="case-study-the-power-and-validity-of-neymans-ate-estimate.html#addendum-saving-more-details"><i class="fa fa-check"></i><b>16.4</b> Addendum: Saving more details</a>
<ul>
<li class="chapter" data-level="16.4.1" data-path="case-study-the-power-and-validity-of-neymans-ate-estimate.html"><a href="case-study-the-power-and-validity-of-neymans-ate-estimate.html#getting-results-ready-for-analysis"><i class="fa fa-check"></i><b>16.4.1</b> Getting results ready for analysis</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="design-analysis-and-presentation-of-simulation-results.html"><a href="design-analysis-and-presentation-of-simulation-results.html"><i class="fa fa-check"></i><b>17</b> Design, analysis, and presentation of simulation results</a>
<ul>
<li class="chapter" data-level="17.1" data-path="design-analysis-and-presentation-of-simulation-results.html"><a href="design-analysis-and-presentation-of-simulation-results.html#designing-the-simulation-experiment"><i class="fa fa-check"></i><b>17.1</b> Designing the simulation experiment</a></li>
<li class="chapter" data-level="17.2" data-path="design-analysis-and-presentation-of-simulation-results.html"><a href="design-analysis-and-presentation-of-simulation-results.html#choosing-parameter-levels"><i class="fa fa-check"></i><b>17.2</b> Choosing parameter levels</a></li>
<li class="chapter" data-level="17.3" data-path="design-analysis-and-presentation-of-simulation-results.html"><a href="design-analysis-and-presentation-of-simulation-results.html#presentation"><i class="fa fa-check"></i><b>17.3</b> Presentation</a></li>
<li class="chapter" data-level="17.4" data-path="design-analysis-and-presentation-of-simulation-results.html"><a href="design-analysis-and-presentation-of-simulation-results.html#tabulation"><i class="fa fa-check"></i><b>17.4</b> Tabulation</a></li>
<li class="chapter" data-level="17.5" data-path="design-analysis-and-presentation-of-simulation-results.html"><a href="design-analysis-and-presentation-of-simulation-results.html#visualization"><i class="fa fa-check"></i><b>17.5</b> Visualization</a>
<ul>
<li class="chapter" data-level="17.5.1" data-path="design-analysis-and-presentation-of-simulation-results.html"><a href="design-analysis-and-presentation-of-simulation-results.html#example-1-biserial-correlation-estimation"><i class="fa fa-check"></i><b>17.5.1</b> Example 1: Biserial correlation estimation</a></li>
<li class="chapter" data-level="17.5.2" data-path="design-analysis-and-presentation-of-simulation-results.html"><a href="design-analysis-and-presentation-of-simulation-results.html#example-2-variance-estimation-and-meta-regression"><i class="fa fa-check"></i><b>17.5.2</b> Example 2: Variance estimation and Meta-regression</a></li>
<li class="chapter" data-level="17.5.3" data-path="design-analysis-and-presentation-of-simulation-results.html"><a href="design-analysis-and-presentation-of-simulation-results.html#example-heat-maps-of-coverage"><i class="fa fa-check"></i><b>17.5.3</b> Example: Heat maps of coverage</a></li>
</ul></li>
<li class="chapter" data-level="17.6" data-path="design-analysis-and-presentation-of-simulation-results.html"><a href="design-analysis-and-presentation-of-simulation-results.html#modeling"><i class="fa fa-check"></i><b>17.6</b> Modeling</a></li>
<li class="chapter" data-level="17.7" data-path="design-analysis-and-presentation-of-simulation-results.html"><a href="design-analysis-and-presentation-of-simulation-results.html#presentation-1"><i class="fa fa-check"></i><b>17.7</b> Presentation</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="simulation-under-the-potential-outcomes-framework.html"><a href="simulation-under-the-potential-outcomes-framework.html"><i class="fa fa-check"></i><b>18</b> Simulation under the Potential Outcomes Framework</a>
<ul>
<li class="chapter" data-level="18.1" data-path="simulation-under-the-potential-outcomes-framework.html"><a href="simulation-under-the-potential-outcomes-framework.html#finite-vs.-superpopulation-inference"><i class="fa fa-check"></i><b>18.1</b> Finite vs. Superpopulation inference</a></li>
<li class="chapter" data-level="18.2" data-path="simulation-under-the-potential-outcomes-framework.html"><a href="simulation-under-the-potential-outcomes-framework.html#data-generation-processes-for-potential-outcomes"><i class="fa fa-check"></i><b>18.2</b> Data generation processes for potential outcomes</a></li>
<li class="chapter" data-level="18.3" data-path="simulation-under-the-potential-outcomes-framework.html"><a href="simulation-under-the-potential-outcomes-framework.html#finite-sample-performance-measures"><i class="fa fa-check"></i><b>18.3</b> Finite sample performance measures</a></li>
<li class="chapter" data-level="18.4" data-path="simulation-under-the-potential-outcomes-framework.html"><a href="simulation-under-the-potential-outcomes-framework.html#nested-finite-simulation-procedure"><i class="fa fa-check"></i><b>18.4</b> Nested finite simulation procedure</a></li>
<li class="chapter" data-level="18.5" data-path="simulation-under-the-potential-outcomes-framework.html"><a href="simulation-under-the-potential-outcomes-framework.html#calibrated-simulations-and-the-potential-outcomes-framework"><i class="fa fa-check"></i><b>18.5</b> Calibrated simulations and the potential outcomes framework</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="simulations-as-evidence.html"><a href="simulations-as-evidence.html"><i class="fa fa-check"></i><b>19</b> Simulations as evidence</a>
<ul>
<li class="chapter" data-level="19.1" data-path="simulations-as-evidence.html"><a href="simulations-as-evidence.html#use-extensive-multi-factor-simulations"><i class="fa fa-check"></i><b>19.1</b> Use extensive multi-factor simulations</a></li>
<li class="chapter" data-level="19.2" data-path="simulations-as-evidence.html"><a href="simulations-as-evidence.html#beat-them-at-their-own-game"><i class="fa fa-check"></i><b>19.2</b> Beat them at their own game</a></li>
<li class="chapter" data-level="19.3" data-path="simulations-as-evidence.html"><a href="simulations-as-evidence.html#calibrated-simulations"><i class="fa fa-check"></i><b>19.3</b> Calibrated simulations</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="the-parametric-bootstrap.html"><a href="the-parametric-bootstrap.html"><i class="fa fa-check"></i><b>20</b> The Parametric bootstrap</a>
<ul>
<li class="chapter" data-level="20.1" data-path="the-parametric-bootstrap.html"><a href="the-parametric-bootstrap.html#air-conditioners-a-stolen-case-study"><i class="fa fa-check"></i><b>20.1</b> Air conditioners: a stolen case study</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Designing Monte Carlo Simulations in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="simulation-under-the-potential-outcomes-framework" class="section level1 hasAnchor" number="18">
<h1><span class="header-section-number">Chapter 18</span> Simulation under the Potential Outcomes Framework<a href="simulation-under-the-potential-outcomes-framework.html#simulation-under-the-potential-outcomes-framework" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>If we are in the business of evaluating how various methods such as matching or propensity score weighting work in practice, we would probably turn to the potential outcomes framework for our simulations.
The potential outcomes framework is a framework typically used in the causal inference literature to make very explicit statements regarding the mechanics of causality and the associated estimands one might target when estimating causal effects.
While we recommend reading, for a more thourough overview, either [CITE Raudenbush or Field Experiments textbook], we briefly outline this framework here to set out our notation.</p>
<p>Take a sample of experimental units, indexed by <span class="math inline">\(i\)</span>.
For each unit, we can treat it or not.
Denote treatment as <span class="math inline">\(Z_i = 1\)</span> for treated or <span class="math inline">\(Z_i = 0\)</span> for not treated.
Now we imagine each unit has two potential outcomes being the outcome we would see if we treated it (<span class="math inline">\(Y_i(1)\)</span>) or if we did not (<span class="math inline">\(Y_i(0)\)</span>).
Finally, our observed outcome is then
<span class="math display">\[ Y_i^{obs} = Z_i Y_i(1) + (1-Z_i)Y_i(0) .\]</span>
For a unit, the treatment effect is <span class="math inline">\(\tau_i = Y_i(1) - Y_i(0)\)</span>; it is how much our outcome changes if we treat vs. not treat.
Frustratingly, for each unit we can only see one of its two potential outcomes, so we can never get an estimate of these individual <span class="math inline">\(\tau_i\)</span>.
Under this view, causality is a missing data problem: if we only were able to impute the missing potential outcomes, we could have a dataset where we could calculate any estimands we wanted. E.g., the true average treatment effect <em>for the sample</em> <span class="math inline">\(\mathcal{S}\)</span> would be:</p>
<p><span class="math display">\[ ATE_{\mathcal{S}} = \frac{1}{N} \sum_{i} Y_i(1) - Y_i( 0 ) . \]</span>
The average proportion increase, by contrast, would be</p>
<p><span class="math display">\[ API_{\mathcal{S}} = \frac{1}{N} \sum_{i} \frac{Y_i(1)}{Y_i(0)} \]</span></p>
<div id="finite-vs.-superpopulation-inference" class="section level2 hasAnchor" number="18.1">
<h2><span class="header-section-number">18.1</span> Finite vs. Superpopulation inference<a href="simulation-under-the-potential-outcomes-framework.html#finite-vs.-superpopulation-inference" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Consider a sample of <span class="math inline">\(n\)</span> units, <span class="math inline">\(\mathcal{S}\)</span>, along with their set of potential outcomes.
We can talk about the true ATE of the sample, or, if we thought of the sample as being drawn from some larger population, we could talk about the true ATE of that larger population.</p>
<p>This is a tension that often arises in potential outcomes based simulations: if we are focused on <span class="math inline">\(ATE_{\mathcal{S}}\)</span> then for each sample we generate, our estimand could be (maybe only slightly) different, depending on whether our sample has more or fewer units with high <span class="math inline">\(\tau_i\)</span>.
If, on the other hand, we are focused on where the units came from (which is our data generating model), our estimand is a property of the DGP, and would be the same for each sample generated.</p>
<p>The catch is when we calculate our performance metrics, we now have two possible targets to pick from.
Furthermore, if we are targeting the superpopulation ATE, then our error in estimation may be due in part to the representativeness of the sample, <em>not</em> the estimation or uncertainty due to the random assignment.</p>
<p>We will follow this theme throughout this chapter.</p>
</div>
<div id="data-generation-processes-for-potential-outcomes" class="section level2 hasAnchor" number="18.2">
<h2><span class="header-section-number">18.2</span> Data generation processes for potential outcomes<a href="simulation-under-the-potential-outcomes-framework.html#data-generation-processes-for-potential-outcomes" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>If we want to write a simulation using the potential outcomes framework, it is clear and transparent to first generate a complete set of potential outcomes, then generate a random assignment based on some assignment mechanism, and finally generate the observed outcomes as a function of assignment and original potential outcomes.</p>
<p>For example, we might say that our data generation process is as follows: First generate each unit <span class="math inline">\(i = 1, \ldots, n\)</span>, as
<span class="math display">\[
\begin{aligned}
X_i &amp;\sim exp( 1 ) - 1 \\
Y_i(0) &amp;= \beta_0 + \beta_1 X_i + \epsilon_i \mbox{ with } \epsilon_i \sim N( 0, \sigma^2 ) \\
\tau_i &amp;= \tau_0 + \tau_1 X_i + \alpha u_i \mbox{ with } u_i \sim t_{df} \\
Y_i(1) &amp;= Y_i(0) + \tau_i
\end{aligned}
\]</span>
with <span class="math inline">\(exp(1)\)</span> being the standard exponential distribution and <span class="math inline">\(t_{df}\)</span> being a <span class="math inline">\(t\)</span> distribution with <span class="math inline">\(df\)</span> degrees of freedom.
We subtract 1 from <span class="math inline">\(X_i\)</span> to zero-center it (it is often convenient to have zero-centered covariates so we can then, e.g., interpret <span class="math inline">\(\tau_0\)</span> as the true superpopulation ATE of our experiment).</p>
<p>The above model is saying that we first, for each unit, generate a covariate.
We then generate our two potential outcomes.
I.e., we are generating what the outcome would be for each unit if it were treated and if it were not treated.
We are driving both the level and the treatment effect with <span class="math inline">\(X_i\)</span>, assuming <span class="math inline">\(\beta_1\)</span> and <span class="math inline">\(\tau_1\)</span> are non-zero.</p>
<p>One advantage of generating all the potential outcomes is we can then calculate the finite-sample estimands such as the true average treatment effect for the generated sample: we just take the average of <span class="math inline">\(Y_i(1) - Y_i(0)\)</span> for our sample.</p>
<p>Here is some code to illustrate the first part of the data generating process (we leave treatment assignment to later):</p>
<div class="sourceCode" id="cb432"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb432-1"><a href="simulation-under-the-potential-outcomes-framework.html#cb432-1" aria-hidden="true" tabindex="-1"></a>gen_data <span class="ot">&lt;-</span> <span class="cf">function</span>( <span class="at">n =</span> <span class="dv">100</span>,</span>
<span id="cb432-2"><a href="simulation-under-the-potential-outcomes-framework.html#cb432-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">R2 =</span> <span class="fl">0.5</span>,</span>
<span id="cb432-3"><a href="simulation-under-the-potential-outcomes-framework.html#cb432-3" aria-hidden="true" tabindex="-1"></a>                      <span class="at">beta_0 =</span> <span class="dv">0</span>, <span class="at">beta_1 =</span> <span class="dv">1</span>,</span>
<span id="cb432-4"><a href="simulation-under-the-potential-outcomes-framework.html#cb432-4" aria-hidden="true" tabindex="-1"></a>                      <span class="at">tau_0 =</span> <span class="dv">1</span>, <span class="at">tau_1 =</span> <span class="dv">1</span>, </span>
<span id="cb432-5"><a href="simulation-under-the-potential-outcomes-framework.html#cb432-5" aria-hidden="true" tabindex="-1"></a>                      <span class="at">alpha =</span> <span class="dv">1</span>, <span class="at">df =</span> <span class="dv">3</span> ) {</span>
<span id="cb432-6"><a href="simulation-under-the-potential-outcomes-framework.html#cb432-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stopifnot</span>( R2 <span class="sc">&gt;=</span> <span class="dv">0</span> <span class="sc">&amp;&amp;</span> R2 <span class="sc">&lt;</span> <span class="dv">1</span> )</span>
<span id="cb432-7"><a href="simulation-under-the-potential-outcomes-framework.html#cb432-7" aria-hidden="true" tabindex="-1"></a>  X_i <span class="ot">=</span> <span class="fu">rexp</span>( n, <span class="at">rate =</span> <span class="dv">1</span> ) <span class="sc">-</span> <span class="dv">1</span></span>
<span id="cb432-8"><a href="simulation-under-the-potential-outcomes-framework.html#cb432-8" aria-hidden="true" tabindex="-1"></a>  beta_1 <span class="ot">=</span> <span class="fu">sqrt</span>( <span class="dv">1</span> <span class="sc">-</span> R2 )</span>
<span id="cb432-9"><a href="simulation-under-the-potential-outcomes-framework.html#cb432-9" aria-hidden="true" tabindex="-1"></a>  sigma_e <span class="ot">=</span> <span class="fu">sqrt</span>( R2 )</span>
<span id="cb432-10"><a href="simulation-under-the-potential-outcomes-framework.html#cb432-10" aria-hidden="true" tabindex="-1"></a>  Y0_i <span class="ot">=</span> beta_0 <span class="sc">+</span> beta_1 <span class="sc">*</span> X_i <span class="sc">+</span> <span class="fu">rnorm</span>( n, <span class="at">sd=</span>sigma_e )</span>
<span id="cb432-11"><a href="simulation-under-the-potential-outcomes-framework.html#cb432-11" aria-hidden="true" tabindex="-1"></a>  tau_i <span class="ot">=</span> tau_0 <span class="sc">+</span> tau_1 <span class="sc">*</span> X_i <span class="sc">+</span> alpha <span class="sc">*</span> <span class="fu">rt</span>( n, <span class="at">df =</span> df )</span>
<span id="cb432-12"><a href="simulation-under-the-potential-outcomes-framework.html#cb432-12" aria-hidden="true" tabindex="-1"></a>  Y1_i <span class="ot">=</span> Y0_i <span class="sc">+</span> tau_i</span>
<span id="cb432-13"><a href="simulation-under-the-potential-outcomes-framework.html#cb432-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb432-14"><a href="simulation-under-the-potential-outcomes-framework.html#cb432-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>( <span class="at">X =</span> X_i, <span class="at">Y0 =</span> Y0_i, <span class="at">Y1 =</span> Y1_i )</span>
<span id="cb432-15"><a href="simulation-under-the-potential-outcomes-framework.html#cb432-15" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>And now we see our estimand can change:</p>
<div class="sourceCode" id="cb433"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb433-1"><a href="simulation-under-the-potential-outcomes-framework.html#cb433-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>( <span class="dv">40454</span> )</span>
<span id="cb433-2"><a href="simulation-under-the-potential-outcomes-framework.html#cb433-2" aria-hidden="true" tabindex="-1"></a>d1 <span class="ot">&lt;-</span> <span class="fu">gen_data</span>( <span class="dv">50</span> )</span>
<span id="cb433-3"><a href="simulation-under-the-potential-outcomes-framework.html#cb433-3" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>( d1<span class="sc">$</span>Y1 <span class="sc">-</span> d1<span class="sc">$</span>Y0 )</span></code></pre></div>
<pre><code>## [1] 0.6374925</code></pre>
<div class="sourceCode" id="cb435"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb435-1"><a href="simulation-under-the-potential-outcomes-framework.html#cb435-1" aria-hidden="true" tabindex="-1"></a>d2 <span class="ot">&lt;-</span> <span class="fu">gen_data</span>( <span class="dv">50</span> )</span>
<span id="cb435-2"><a href="simulation-under-the-potential-outcomes-framework.html#cb435-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>( d2<span class="sc">$</span>Y1 <span class="sc">-</span> d2<span class="sc">$</span>Y0 )</span></code></pre></div>
<pre><code>## [1] 0.5479788</code></pre>
<p>In reviewing our code, we know our superpopulation ATE should be <code>tau</code>, or 1 exactly.
If our estimate for <code>d1</code> is 0.6 do we say that is close or far from the target?
From a finite sample performance approach, we nailed it.
From superpopulation, less so.</p>
<p>Also in looking at the above, there are a few details to call out:</p>
<ul>
<li>We can store the latent, intermediate quantities (both potential outcomes, in particular) so we can calculate the estimands of interest or learn about our data generating process. When we hand the data to an estimator, we would not provide this “secret” information.</li>
<li>We are using a trick to index our DGP by an R2 value rather than coefficients on X so we can have a standardized control-side outcome (the expected variation of <span class="math inline">\(Y_i(0)\)</span> will be 1). The treatment outcomes will have more variation due to the heterogeniety of the treatment impacts.</li>
<li>If we were generating data with a constant treatment impact, then <span class="math inline">\(ATE_{\mathcal{S}} = ATE\)</span> always; this is typical for many similations in the literature. That being said, treatment variation is what causes a lot of methods to fail and so having simulations that have this variation is usually important.</li>
</ul>
<p>Once we have our <em>schedule of potential outcomes</em>, we would then generate the <em>observed outcomes</em> by assigning our (synthetic, randomly generated) <span class="math inline">\(n\)</span> units to treatment or control.
For example, say we wanted to simulate an observational context where treatment was a function of our covariate.
We could model each unit as flipping a weighted coin with some probability that was a function of <span class="math inline">\(X_i\)</span> as so:</p>
<p><span class="math display">\[
\begin{aligned}
p_i &amp;= logit^{-1}( \xi_0 + \xi_1 X_i ) \\
Z_i &amp;= Bern( p_i ) \\
Y_i &amp;= Z_i Y_i(1) + (1-Z_i) Y_i(0)
\end{aligned}
\]</span></p>
<p>Here is code for assigning our data to treatment and control:</p>
<div class="sourceCode" id="cb437"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb437-1"><a href="simulation-under-the-potential-outcomes-framework.html#cb437-1" aria-hidden="true" tabindex="-1"></a>assign_data <span class="ot">&lt;-</span> <span class="cf">function</span>( dat,</span>
<span id="cb437-2"><a href="simulation-under-the-potential-outcomes-framework.html#cb437-2" aria-hidden="true" tabindex="-1"></a>                         <span class="at">xi_0 =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">xi_1 =</span> <span class="dv">1</span> ) {</span>
<span id="cb437-3"><a href="simulation-under-the-potential-outcomes-framework.html#cb437-3" aria-hidden="true" tabindex="-1"></a>  n <span class="ot">=</span> <span class="fu">nrow</span>(dat)</span>
<span id="cb437-4"><a href="simulation-under-the-potential-outcomes-framework.html#cb437-4" aria-hidden="true" tabindex="-1"></a>  dat <span class="ot">=</span> <span class="fu">mutate</span>( dat,</span>
<span id="cb437-5"><a href="simulation-under-the-potential-outcomes-framework.html#cb437-5" aria-hidden="true" tabindex="-1"></a>                <span class="at">p =</span> arm<span class="sc">::</span><span class="fu">invlogit</span>( xi_0 <span class="sc">+</span> xi_1 <span class="sc">*</span> X ),</span>
<span id="cb437-6"><a href="simulation-under-the-potential-outcomes-framework.html#cb437-6" aria-hidden="true" tabindex="-1"></a>                <span class="at">Z =</span> <span class="fu">rbinom</span>( n, <span class="dv">1</span>, <span class="at">prob=</span>p ),</span>
<span id="cb437-7"><a href="simulation-under-the-potential-outcomes-framework.html#cb437-7" aria-hidden="true" tabindex="-1"></a>                <span class="at">Yobs =</span> <span class="fu">ifelse</span>( Z <span class="sc">==</span> <span class="dv">1</span>, Y1, Y0 ) )</span>
<span id="cb437-8"><a href="simulation-under-the-potential-outcomes-framework.html#cb437-8" aria-hidden="true" tabindex="-1"></a>  dat</span>
<span id="cb437-9"><a href="simulation-under-the-potential-outcomes-framework.html#cb437-9" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>We can then add our assignment variable to our given data as so:</p>
<div class="sourceCode" id="cb438"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb438-1"><a href="simulation-under-the-potential-outcomes-framework.html#cb438-1" aria-hidden="true" tabindex="-1"></a><span class="fu">assign_data</span>( d2 )</span></code></pre></div>
<pre><code>## # A tibble: 50 × 6
##           X     Y0      Y1     p     Z    Yobs
##       &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt;
##  1  0.670    0.667   2.58  0.418     1   2.58 
##  2  0.371    0.314   4.57  0.348     1   4.57 
##  3  1.94     1.29    3.03  0.719     0   1.29 
##  4 -0.244    0.119 -10.0   0.224     1 -10.0  
##  5  0.00850  1.44    2.88  0.271     0   1.44 
##  6  1.41     1.14    5.02  0.600     1   5.02 
##  7 -0.864    0.461   0.802 0.134     1   0.802
##  8 -0.00533 -0.914  -1.17  0.268     0  -0.914
##  9 -0.907   -0.202   0.555 0.129     1   0.555
## 10 -0.363   -0.141   1.16  0.204     1   1.16 
## # … with 40 more rows</code></pre>
<p>Note how <code>Yobs</code> is, depending on <code>Z</code>, either <code>Y0</code> or <code>Y1</code>.
Separating our our DGP and our random assignment underscores the potential outcomes framework adage of the data are what they are, and we the experimenters (or nature) is randomly assigning these whole units to various conditions and observing the consequences.</p>
<p>In general, we might instead put the <code>p_i</code> part of the model in our code generating the outcomes, if we wanted to view the chance of treatment assignment as inherent to the unit (which is what we usually expect in an observational context).</p>
</div>
<div id="finite-sample-performance-measures" class="section level2 hasAnchor" number="18.3">
<h2><span class="header-section-number">18.3</span> Finite sample performance measures<a href="simulation-under-the-potential-outcomes-framework.html#finite-sample-performance-measures" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Let’s generate a single dataset with our DGP from above, and run a small experiment where we actually randomize units to treatment and control:</p>
<div class="sourceCode" id="cb440"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb440-1"><a href="simulation-under-the-potential-outcomes-framework.html#cb440-1" aria-hidden="true" tabindex="-1"></a>n <span class="ot">=</span> <span class="dv">100</span></span>
<span id="cb440-2"><a href="simulation-under-the-potential-outcomes-framework.html#cb440-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">442423</span>)</span>
<span id="cb440-3"><a href="simulation-under-the-potential-outcomes-framework.html#cb440-3" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">=</span> <span class="fu">gen_data</span>(n, <span class="at">tau_1 =</span> <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb440-4"><a href="simulation-under-the-potential-outcomes-framework.html#cb440-4" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">=</span> <span class="fu">mutate</span>( dat,</span>
<span id="cb440-5"><a href="simulation-under-the-potential-outcomes-framework.html#cb440-5" aria-hidden="true" tabindex="-1"></a>              <span class="at">Z =</span> <span class="dv">0</span> <span class="sc">+</span> (<span class="fu">sample</span>( n ) <span class="sc">&lt;=</span> n<span class="sc">/</span><span class="dv">2</span>),</span>
<span id="cb440-6"><a href="simulation-under-the-potential-outcomes-framework.html#cb440-6" aria-hidden="true" tabindex="-1"></a>              <span class="at">Yobs =</span> <span class="fu">ifelse</span>( Z <span class="sc">==</span> <span class="dv">1</span>, Y1, Y0 ) )</span>
<span id="cb440-7"><a href="simulation-under-the-potential-outcomes-framework.html#cb440-7" aria-hidden="true" tabindex="-1"></a>mod <span class="ot">=</span> <span class="fu">lm</span>( Yobs <span class="sc">~</span> Z, <span class="at">data=</span>dat )</span>
<span id="cb440-8"><a href="simulation-under-the-potential-outcomes-framework.html#cb440-8" aria-hidden="true" tabindex="-1"></a><span class="fu">coef</span>(mod)[[<span class="st">&quot;Z&quot;</span>]]</span></code></pre></div>
<pre><code>## [1] 0.8914992</code></pre>
<p>We can compare this to the true finite-sample ATE:</p>
<div class="sourceCode" id="cb442"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb442-1"><a href="simulation-under-the-potential-outcomes-framework.html#cb442-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>( dat<span class="sc">$</span>Y1 <span class="sc">-</span> dat<span class="sc">$</span>Y0 )</span></code></pre></div>
<pre><code>## [1] 1.154018</code></pre>
<p>Our finite-population simulation would be:</p>
<div class="sourceCode" id="cb444"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb444-1"><a href="simulation-under-the-potential-outcomes-framework.html#cb444-1" aria-hidden="true" tabindex="-1"></a>rps <span class="ot">&lt;-</span> <span class="fu">rerun</span>( <span class="dv">1000</span>, {</span>
<span id="cb444-2"><a href="simulation-under-the-potential-outcomes-framework.html#cb444-2" aria-hidden="true" tabindex="-1"></a>  dat <span class="ot">=</span> <span class="fu">mutate</span>( dat,</span>
<span id="cb444-3"><a href="simulation-under-the-potential-outcomes-framework.html#cb444-3" aria-hidden="true" tabindex="-1"></a>              <span class="at">Z =</span> <span class="dv">0</span> <span class="sc">+</span> (<span class="fu">sample</span>( n ) <span class="sc">&lt;=</span> n<span class="sc">/</span><span class="dv">2</span>),</span>
<span id="cb444-4"><a href="simulation-under-the-potential-outcomes-framework.html#cb444-4" aria-hidden="true" tabindex="-1"></a>              <span class="at">Yobs =</span> <span class="fu">ifelse</span>( Z <span class="sc">==</span> <span class="dv">1</span>, Y1, Y0 ) )</span>
<span id="cb444-5"><a href="simulation-under-the-potential-outcomes-framework.html#cb444-5" aria-hidden="true" tabindex="-1"></a>  mod <span class="ot">=</span> <span class="fu">lm</span>( Yobs <span class="sc">~</span> Z, <span class="at">data=</span>dat )</span>
<span id="cb444-6"><a href="simulation-under-the-potential-outcomes-framework.html#cb444-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>( <span class="at">ATE_hat =</span> <span class="fu">coef</span>(mod)[[<span class="st">&quot;Z&quot;</span>]],</span>
<span id="cb444-7"><a href="simulation-under-the-potential-outcomes-framework.html#cb444-7" aria-hidden="true" tabindex="-1"></a>          <span class="at">SE_hat =</span> arm<span class="sc">::</span><span class="fu">se.coef</span>(mod)[[<span class="st">&quot;Z&quot;</span>]] )</span>
<span id="cb444-8"><a href="simulation-under-the-potential-outcomes-framework.html#cb444-8" aria-hidden="true" tabindex="-1"></a>  }) <span class="sc">%&gt;%</span></span>
<span id="cb444-9"><a href="simulation-under-the-potential-outcomes-framework.html#cb444-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>()</span>
<span id="cb444-10"><a href="simulation-under-the-potential-outcomes-framework.html#cb444-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb444-11"><a href="simulation-under-the-potential-outcomes-framework.html#cb444-11" aria-hidden="true" tabindex="-1"></a>rps <span class="sc">%&gt;%</span> <span class="fu">summarise</span>( <span class="at">EATE_hat =</span> <span class="fu">mean</span>( ATE_hat ),</span>
<span id="cb444-12"><a href="simulation-under-the-potential-outcomes-framework.html#cb444-12" aria-hidden="true" tabindex="-1"></a>                   <span class="at">SE =</span> <span class="fu">sd</span>( ATE_hat ),</span>
<span id="cb444-13"><a href="simulation-under-the-potential-outcomes-framework.html#cb444-13" aria-hidden="true" tabindex="-1"></a>                   <span class="at">ESE_hat =</span> <span class="fu">mean</span>( SE_hat ) )</span></code></pre></div>
<pre><code>## # A tibble: 1 × 3
##   EATE_hat    SE ESE_hat
##      &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
## 1     1.16 0.248   0.307</code></pre>
<p>We are simulating on a single dataset.
In particular, our set of potential outcomes is entirely fixed; the only source of randomness (and thus the randomness behind our SE) is the random assignment.
Now this opens up some room for critique: what if our single dataset is non-standard?</p>
<p>Our super-population simulation would be, by contrast:</p>
<div class="sourceCode" id="cb446"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb446-1"><a href="simulation-under-the-potential-outcomes-framework.html#cb446-1" aria-hidden="true" tabindex="-1"></a>rps_sup <span class="ot">&lt;-</span> <span class="fu">rerun</span>( <span class="dv">1000</span>, {</span>
<span id="cb446-2"><a href="simulation-under-the-potential-outcomes-framework.html#cb446-2" aria-hidden="true" tabindex="-1"></a>  dat <span class="ot">=</span> <span class="fu">gen_data</span>(n)</span>
<span id="cb446-3"><a href="simulation-under-the-potential-outcomes-framework.html#cb446-3" aria-hidden="true" tabindex="-1"></a>  dat <span class="ot">=</span> <span class="fu">mutate</span>( dat,</span>
<span id="cb446-4"><a href="simulation-under-the-potential-outcomes-framework.html#cb446-4" aria-hidden="true" tabindex="-1"></a>              <span class="at">Z =</span> <span class="dv">0</span> <span class="sc">+</span> (<span class="fu">sample</span>( n ) <span class="sc">&lt;=</span> n<span class="sc">/</span><span class="dv">2</span>),</span>
<span id="cb446-5"><a href="simulation-under-the-potential-outcomes-framework.html#cb446-5" aria-hidden="true" tabindex="-1"></a>              <span class="at">Yobs =</span> <span class="fu">ifelse</span>( Z <span class="sc">==</span> <span class="dv">1</span>, Y1, Y0 ) )</span>
<span id="cb446-6"><a href="simulation-under-the-potential-outcomes-framework.html#cb446-6" aria-hidden="true" tabindex="-1"></a>  mod <span class="ot">=</span> <span class="fu">lm</span>( Yobs <span class="sc">~</span> Z, <span class="at">data=</span>dat )</span>
<span id="cb446-7"><a href="simulation-under-the-potential-outcomes-framework.html#cb446-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>( <span class="at">ATE_hat =</span> <span class="fu">coef</span>(mod)[[<span class="st">&quot;Z&quot;</span>]],</span>
<span id="cb446-8"><a href="simulation-under-the-potential-outcomes-framework.html#cb446-8" aria-hidden="true" tabindex="-1"></a>          <span class="at">SE_hat =</span> arm<span class="sc">::</span><span class="fu">se.coef</span>(mod)[[<span class="st">&quot;Z&quot;</span>]] )</span>
<span id="cb446-9"><a href="simulation-under-the-potential-outcomes-framework.html#cb446-9" aria-hidden="true" tabindex="-1"></a>  }) <span class="sc">%&gt;%</span></span>
<span id="cb446-10"><a href="simulation-under-the-potential-outcomes-framework.html#cb446-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>()</span>
<span id="cb446-11"><a href="simulation-under-the-potential-outcomes-framework.html#cb446-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb446-12"><a href="simulation-under-the-potential-outcomes-framework.html#cb446-12" aria-hidden="true" tabindex="-1"></a>rps_sup <span class="sc">%&gt;%</span> <span class="fu">summarise</span>( <span class="at">EATE_hat =</span> <span class="fu">mean</span>( ATE_hat ),</span>
<span id="cb446-13"><a href="simulation-under-the-potential-outcomes-framework.html#cb446-13" aria-hidden="true" tabindex="-1"></a>                   <span class="at">SE =</span> <span class="fu">sd</span>( ATE_hat ),</span>
<span id="cb446-14"><a href="simulation-under-the-potential-outcomes-framework.html#cb446-14" aria-hidden="true" tabindex="-1"></a>                   <span class="at">ESE_hat =</span> <span class="fu">mean</span>( SE_hat ))</span></code></pre></div>
<pre><code>## # A tibble: 1 × 3
##   EATE_hat    SE ESE_hat
##      &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
## 1     1.00 0.381   0.378</code></pre>
<p>First, note our superpopulation simulation is not biased for the superpopulation ATE.
Also note the true SE is larger than our finite-sample simulation; this is because part of the uncertainty in our estimator is the uncertainty of whether our sample is representative of the superpopulation.</p>
<p>Finally, this clarifies that our linear regression estimator is estimating standard errors assuming a superpopulation model.
The true finite sample standard error is less than the expected estimated error: from a finite sample perspective, our estimator is giving overly conservative uncertainty estimates.
(This discrepancy is often called the correlation of potential outcomes problem.)</p>
</div>
<div id="nested-finite-simulation-procedure" class="section level2 hasAnchor" number="18.4">
<h2><span class="header-section-number">18.4</span> Nested finite simulation procedure<a href="simulation-under-the-potential-outcomes-framework.html#nested-finite-simulation-procedure" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We just saw a difference between a specific, single, finite-sample dataset and a superpopulation.
What if we wanted to know if this phenomenon was more general across a set of datasets?
This question can be levied more broadly: if we run a simulation on a single dataset, this is even more narrow than running on a single scenario: if we compare methods and find one is superior to another for our single dataset, how do we know this is not an artifact of some specific characteristic of <em>that data</em> and not a general phenomonen at all?</p>
<p>One way forward is to run a nested simulation, where we generate a series of finite sample datasets, and then for each dataset run a small simulation.
We then calculate the expected finite sample performance across the datasets.
One could almost think of the datasets themselves as a “factor” in our multifactor experiment.
This is what we did in [CITE estimands paper]</p>
<p>Borrowing from the simulation appendix of [CITE estimands paper], repeat <span class="math inline">\(R\)</span> times:</p>
<ol style="list-style-type: decimal">
<li><p>Generate a dataset using a particular DGP. This data generation is the “sampling step” for a superpopulation (SP) framework. The DGP represents an inﬁnite superpopulation. Each dataset includes, for each observation, the potential outcome under treatment or control.</p></li>
<li><p>Record the true finite-sample ATE, both person and site weighted.</p></li>
<li><p>Then, three times, do a finite simulation as follows:</p></li>
</ol>
<ol style="list-style-type: lower-alpha">
<li>Randomize units to treatment and control.</li>
<li>Calculate the corresponding observed outcomes.</li>
<li>Analyze the results using the methods of interest, recording both the point estimate and estimated standard error for each.</li>
</ol>
<p>Having only three trials will give a poor estimate of within-dataset variability for each dataset, but the average across the
<span class="math inline">\(R\)</span> datasets in a given scenario gives a reasonable estimate of expected variability across datasets of the type we would see given the scenario parameters.</p>
<p>To demonstrate we first make a mini-finite sample driver:</p>
<div class="sourceCode" id="cb448"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb448-1"><a href="simulation-under-the-potential-outcomes-framework.html#cb448-1" aria-hidden="true" tabindex="-1"></a>one_finite_run <span class="ot">&lt;-</span> <span class="cf">function</span>( <span class="at">R0 =</span> <span class="dv">3</span>, <span class="at">n =</span> <span class="dv">100</span>, ... ) {</span>
<span id="cb448-2"><a href="simulation-under-the-potential-outcomes-framework.html#cb448-2" aria-hidden="true" tabindex="-1"></a>  dat <span class="ot">=</span> <span class="fu">gen_data</span>( <span class="at">n =</span> n, ... )</span>
<span id="cb448-3"><a href="simulation-under-the-potential-outcomes-framework.html#cb448-3" aria-hidden="true" tabindex="-1"></a>  rps <span class="ot">&lt;-</span> <span class="fu">rerun</span>( R0, {</span>
<span id="cb448-4"><a href="simulation-under-the-potential-outcomes-framework.html#cb448-4" aria-hidden="true" tabindex="-1"></a>         dat <span class="ot">=</span> <span class="fu">mutate</span>( dat,</span>
<span id="cb448-5"><a href="simulation-under-the-potential-outcomes-framework.html#cb448-5" aria-hidden="true" tabindex="-1"></a>                    <span class="at">Z =</span> <span class="dv">0</span> <span class="sc">+</span> (<span class="fu">sample</span>( n ) <span class="sc">&lt;=</span> n<span class="sc">/</span><span class="dv">2</span>),</span>
<span id="cb448-6"><a href="simulation-under-the-potential-outcomes-framework.html#cb448-6" aria-hidden="true" tabindex="-1"></a>                    <span class="at">Yobs =</span> <span class="fu">ifelse</span>( Z <span class="sc">==</span> <span class="dv">1</span>, Y1, Y0 ) )</span>
<span id="cb448-7"><a href="simulation-under-the-potential-outcomes-framework.html#cb448-7" aria-hidden="true" tabindex="-1"></a>        mod <span class="ot">=</span> <span class="fu">lm</span>( Yobs <span class="sc">~</span> Z, <span class="at">data=</span>dat )</span>
<span id="cb448-8"><a href="simulation-under-the-potential-outcomes-framework.html#cb448-8" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tibble</span>( <span class="at">ATE_hat =</span> <span class="fu">coef</span>(mod)[[<span class="st">&quot;Z&quot;</span>]],</span>
<span id="cb448-9"><a href="simulation-under-the-potential-outcomes-framework.html#cb448-9" aria-hidden="true" tabindex="-1"></a>                <span class="at">SE_hat =</span> arm<span class="sc">::</span><span class="fu">se.coef</span>(mod)[[<span class="st">&quot;Z&quot;</span>]] )</span>
<span id="cb448-10"><a href="simulation-under-the-potential-outcomes-framework.html#cb448-10" aria-hidden="true" tabindex="-1"></a>    }) <span class="sc">%&gt;%</span></span>
<span id="cb448-11"><a href="simulation-under-the-potential-outcomes-framework.html#cb448-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">bind_rows</span>()</span>
<span id="cb448-12"><a href="simulation-under-the-potential-outcomes-framework.html#cb448-12" aria-hidden="true" tabindex="-1"></a>  rps<span class="sc">$</span>ATE <span class="ot">=</span> <span class="fu">mean</span>( dat<span class="sc">$</span>Y1 <span class="sc">-</span> dat<span class="sc">$</span>Y0 )</span>
<span id="cb448-13"><a href="simulation-under-the-potential-outcomes-framework.html#cb448-13" aria-hidden="true" tabindex="-1"></a>  rps</span>
<span id="cb448-14"><a href="simulation-under-the-potential-outcomes-framework.html#cb448-14" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>This driver also stores the finite sample ATE for future reference:</p>
<div class="sourceCode" id="cb449"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb449-1"><a href="simulation-under-the-potential-outcomes-framework.html#cb449-1" aria-hidden="true" tabindex="-1"></a><span class="fu">one_finite_run</span>()</span></code></pre></div>
<pre><code>## # A tibble: 3 × 3
##   ATE_hat SE_hat   ATE
##     &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;
## 1   0.348  0.421 0.768
## 2   1.32   0.472 0.768
## 3   1.17   0.549 0.768</code></pre>
<p>We then run a bunch of finite runs.</p>
<div class="sourceCode" id="cb451"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb451-1"><a href="simulation-under-the-potential-outcomes-framework.html#cb451-1" aria-hidden="true" tabindex="-1"></a>runs <span class="ot">&lt;-</span> <span class="fu">rerun</span>( <span class="dv">500</span>, <span class="fu">one_finite_run</span>() ) <span class="sc">%&gt;%</span></span>
<span id="cb451-2"><a href="simulation-under-the-potential-outcomes-framework.html#cb451-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>( <span class="at">.id =</span> <span class="st">&quot;runID&quot;</span> )</span></code></pre></div>
<p>We use <code>.id</code> because we will need to separate out each finite run and analyze separately, and then aggregate.</p>
<p>Each finite run is a very noisy simulation for a fixed dataset.
This means when we calculate performance measures we have to be careful to avoid bias in the calculations; in particular, we need to focus on estimating <span class="math inline">\(SE^2\)</span> across the finite runs, not <span class="math inline">\(SE\)</span>, to avoid the bias caused by having a few observations with every estimate.</p>
<div class="sourceCode" id="cb452"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb452-1"><a href="simulation-under-the-potential-outcomes-framework.html#cb452-1" aria-hidden="true" tabindex="-1"></a>fruns <span class="ot">&lt;-</span> runs <span class="sc">%&gt;%</span> <span class="fu">group_by</span>( runID ) <span class="sc">%&gt;%</span></span>
<span id="cb452-2"><a href="simulation-under-the-potential-outcomes-framework.html#cb452-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>( <span class="at">EATE_hat =</span> <span class="fu">mean</span>( ATE_hat ),</span>
<span id="cb452-3"><a href="simulation-under-the-potential-outcomes-framework.html#cb452-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">SE2 =</span> <span class="fu">var</span>( ATE_hat ),</span>
<span id="cb452-4"><a href="simulation-under-the-potential-outcomes-framework.html#cb452-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">ESE_hat =</span> <span class="fu">mean</span>( SE_hat ),</span>
<span id="cb452-5"><a href="simulation-under-the-potential-outcomes-framework.html#cb452-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">.groups =</span> <span class="st">&quot;drop&quot;</span> )</span></code></pre></div>
<p>And then we aggregate our finite sample runs:</p>
<div class="sourceCode" id="cb453"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb453-1"><a href="simulation-under-the-potential-outcomes-framework.html#cb453-1" aria-hidden="true" tabindex="-1"></a>res <span class="ot">&lt;-</span> fruns <span class="sc">%&gt;%</span></span>
<span id="cb453-2"><a href="simulation-under-the-potential-outcomes-framework.html#cb453-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>( <span class="at">EEATE_hat =</span> <span class="fu">mean</span>( EATE_hat ),</span>
<span id="cb453-3"><a href="simulation-under-the-potential-outcomes-framework.html#cb453-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">EESE_hat =</span> <span class="fu">sqrt</span>( <span class="fu">mean</span>( ESE_hat<span class="sc">^</span><span class="dv">2</span> ) ),</span>
<span id="cb453-4"><a href="simulation-under-the-potential-outcomes-framework.html#cb453-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">ESE =</span> <span class="fu">sqrt</span>( <span class="fu">mean</span>( SE2 ) ) ) <span class="sc">%&gt;%</span></span>
<span id="cb453-5"><a href="simulation-under-the-potential-outcomes-framework.html#cb453-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>( <span class="at">calib =</span> <span class="dv">100</span> <span class="sc">*</span> EESE_hat <span class="sc">/</span> ESE )</span>
<span id="cb453-6"><a href="simulation-under-the-potential-outcomes-framework.html#cb453-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb453-7"><a href="simulation-under-the-potential-outcomes-framework.html#cb453-7" aria-hidden="true" tabindex="-1"></a>res</span></code></pre></div>
<pre><code>## # A tibble: 1 × 4
##   EEATE_hat EESE_hat   ESE calib
##       &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1     0.996    0.380 0.331  115.</code></pre>
<p>We see our expected standard error estimate is, across the collection of finite sample scenarios all sharing a similar parent superpopulation DGP, 15% too large for the true expected finite-sample standard error.</p>
<p>We need to keep the squaring. If we look at the SEs themselves, we have further apparent bias due to our <em>estimated</em> <code>ESE_hat</code> being so unstable due to too few observations:</p>
<div class="sourceCode" id="cb455"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb455-1"><a href="simulation-under-the-potential-outcomes-framework.html#cb455-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>( <span class="fu">sqrt</span>( fruns<span class="sc">$</span>SE2 ) )</span></code></pre></div>
<pre><code>## [1] 0.2944556</code></pre>
<p>We can use our collection of mini-finite-sample runs to estimate superpopulation quantities as well.
Given that the simulation datasets are i.i.d. draws, we can simply take expectations across all our simulations.
The only concern is our estimates of MCSE will be off due to the clustering in our simulation runs.</p>
<p>Here we calculate superpopulation performance measures (both with the squared SE and without; we prefer the squared version):</p>
<div class="sourceCode" id="cb457"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb457-1"><a href="simulation-under-the-potential-outcomes-framework.html#cb457-1" aria-hidden="true" tabindex="-1"></a>runs <span class="sc">%&gt;%</span></span>
<span id="cb457-2"><a href="simulation-under-the-potential-outcomes-framework.html#cb457-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>( <span class="at">EATE_hat =</span> <span class="fu">mean</span>( ATE_hat ),</span>
<span id="cb457-3"><a href="simulation-under-the-potential-outcomes-framework.html#cb457-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">SE_true =</span> <span class="fu">sd</span>( ATE_hat ),</span>
<span id="cb457-4"><a href="simulation-under-the-potential-outcomes-framework.html#cb457-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">SE_hat =</span> <span class="fu">mean</span>( SE_hat ),</span>
<span id="cb457-5"><a href="simulation-under-the-potential-outcomes-framework.html#cb457-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">SE2_true =</span> <span class="fu">var</span>( ATE_hat ),</span>
<span id="cb457-6"><a href="simulation-under-the-potential-outcomes-framework.html#cb457-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">SE2_hat =</span> <span class="fu">mean</span>( SE_hat<span class="sc">^</span><span class="dv">2</span> ) ) <span class="sc">%&gt;%</span></span>
<span id="cb457-7"><a href="simulation-under-the-potential-outcomes-framework.html#cb457-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>( <span class="at">cols =</span> <span class="fu">c</span>(SE_true<span class="sc">:</span>SE2_hat ),</span>
<span id="cb457-8"><a href="simulation-under-the-potential-outcomes-framework.html#cb457-8" aria-hidden="true" tabindex="-1"></a>                <span class="at">names_to =</span> <span class="fu">c</span>( <span class="st">&quot;estimand&quot;</span>, <span class="st">&quot;.value&quot;</span> ),</span>
<span id="cb457-9"><a href="simulation-under-the-potential-outcomes-framework.html#cb457-9" aria-hidden="true" tabindex="-1"></a>                <span class="at">names_sep =</span><span class="st">&quot;_&quot;</span> ) <span class="sc">%&gt;%</span></span>
<span id="cb457-10"><a href="simulation-under-the-potential-outcomes-framework.html#cb457-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>( <span class="at">inflate =</span> <span class="dv">100</span> <span class="sc">*</span> hat <span class="sc">/</span> true )</span></code></pre></div>
<pre><code>## # A tibble: 2 × 5
##   EATE_hat estimand  true   hat inflate
##      &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
## 1    0.996 SE       0.389 0.377    96.9
## 2    0.996 SE2      0.151 0.142    93.9</code></pre>
</div>
<div id="calibrated-simulations-and-the-potential-outcomes-framework" class="section level2 hasAnchor" number="18.5">
<h2><span class="header-section-number">18.5</span> Calibrated simulations and the potential outcomes framework<a href="simulation-under-the-potential-outcomes-framework.html#calibrated-simulations-and-the-potential-outcomes-framework" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The potential outcomes framework provides a natural way of generating calibrated simulations [CITE Stuart].
Calbirated simulations are simulations tailored to specific real-world scenarios, to maximize their face validity as being representative of something we would see in practice.
One way to generate a calibrated simulation is to use an existing datasets to generate plausible scenarios.</p>
<p>One way to do this with potential outcomes is to take an existing randomized experiment or observational study and impute all the missing potential outcomes under some specific scheme.
This fully defines the sample of interest and thus any target parameters, such as a measure of heterogeneity, are then known.
We will then synthetically, and repeatedly, randomize and ``observe’’ outcomes to be analyzed with the methods we are testing.
We could also resample from our dataset to generate datasets of different size, or to have a superpopulation target as our estimand.</p>
<p>The key feature is the imputation step.
One baseline method one can use is to generate a matched-pairs dataset by, for each unit, finding a close match given all the demographic and other covariate information of the sample. We then use the matched unit as the imputed potential outcome.<br />
By doing this (with replacement) for all units we can generate a fully imputed dataset which we then use as our population.
This can preserve complex relationships in the data that are not model dependent.
In particular, if outcomes tend to be coarsely defined (e.g., on an integer scale) or have specific clumps (such as zero-inflation or rounding), this structure will be preserved.</p>
<p>One concern with this approach is the noise in the matching will in general dilute the structure of the treatment effect.<br />
This is akin to measurement error diluting found relationships in linear models.
We can then sharpen these relationships towards a given model by first imputing missing outcomes using a specified model, and then matching on all units including the imputed potential outcome.
This is not a data analysis strategy, but instead a method of generating synthetic data that both has a given structure of interest and also remains faithful to the idiosyncrasies of an actual dataset.</p>
<p>A second approach that allows for varying the level of a systematic effect is to specify the treatment effect model and impute treatment outcomes for all control units.<br />
Then the complex structure between covariates and <span class="math inline">\(Y(0)\)</span> would be perfectly preserved.
Unfortunately, this would give 0 idiosyncratic treatment variation (unit-to-unit variation in the <span class="math inline">\(\tau_i\)</span> that is not explained by a model).
To add in idiosyncratic variation we would then need to generate a distribution of perturbations and add these to the imputed outcomes just as an error term in a regression model.</p>
<p>Regardless, once a fully observed sample has been obtained we can investigate several aspects of our estimators as above.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="design-analysis-and-presentation-of-simulation-results.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="simulations-as-evidence.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/jepusto/Designing-Simulations-in-R/edit/master/080-potential-outcomes-framework.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Designing-Simulations-in-R.pdf", "Designing-Simulations-in-R.epub"],
"search": {
"engine": "lunr",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"toolbar": {
"position": "fixed"
},
"info": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
