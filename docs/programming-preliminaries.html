<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 Programming Preliminaries | Designing Monte Carlo Simulations in R</title>
  <meta name="description" content="A text on designing, implementing, and reporting on Monte Carlo simulation studies" />
  <meta name="generator" content="bookdown 0.43 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 Programming Preliminaries | Designing Monte Carlo Simulations in R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="A text on designing, implementing, and reporting on Monte Carlo simulation studies" />
  <meta name="github-repo" content="jepusto/Designing-Simulations-in-R" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 Programming Preliminaries | Designing Monte Carlo Simulations in R" />
  
  <meta name="twitter:description" content="A text on designing, implementing, and reporting on Monte Carlo simulation studies" />
  

<meta name="author" content="Luke W. Miratrix and James E. Pustejovsky (Equal authors)" />


<meta name="date" content="2025-06-19" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="introduction.html"/>
<link rel="next" href="t-test-simulation.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Designing Simulations in R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#license"><i class="fa fa-check"></i>License</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#about-the-authors"><i class="fa fa-check"></i>About the authors</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i>Acknowledgements</a></li>
</ul></li>
<li class="part"><span><b>I An Introductory Look</b></span></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#some-of-simulations-many-uses"><i class="fa fa-check"></i><b>1.1</b> Some of simulation’s many uses</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="introduction.html"><a href="introduction.html#comparing-statistical-approaches"><i class="fa fa-check"></i><b>1.1.1</b> Comparing statistical approaches</a></li>
<li class="chapter" data-level="1.1.2" data-path="introduction.html"><a href="introduction.html#assessing-performance-of-complex-pipelines"><i class="fa fa-check"></i><b>1.1.2</b> Assessing performance of complex pipelines</a></li>
<li class="chapter" data-level="1.1.3" data-path="introduction.html"><a href="introduction.html#assessing-performance-under-misspecification"><i class="fa fa-check"></i><b>1.1.3</b> Assessing performance under misspecification</a></li>
<li class="chapter" data-level="1.1.4" data-path="introduction.html"><a href="introduction.html#assessing-the-finite-sample-performance-of-a-statistical-approach"><i class="fa fa-check"></i><b>1.1.4</b> Assessing the finite-sample performance of a statistical approach</a></li>
<li class="chapter" data-level="1.1.5" data-path="introduction.html"><a href="introduction.html#conducting-power-analyses"><i class="fa fa-check"></i><b>1.1.5</b> Conducting Power Analyses</a></li>
<li class="chapter" data-level="1.1.6" data-path="introduction.html"><a href="introduction.html#simulating-processess"><i class="fa fa-check"></i><b>1.1.6</b> Simulating processess</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#the-perils-of-simulation-as-evidence"><i class="fa fa-check"></i><b>1.2</b> The perils of simulation as evidence</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#simulating-to-learn"><i class="fa fa-check"></i><b>1.3</b> Simulating to learn</a></li>
<li class="chapter" data-level="1.4" data-path="introduction.html"><a href="introduction.html#why-r"><i class="fa fa-check"></i><b>1.4</b> Why R?</a></li>
<li class="chapter" data-level="1.5" data-path="introduction.html"><a href="introduction.html#organization-of-the-text"><i class="fa fa-check"></i><b>1.5</b> Organization of the text</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="programming-preliminaries.html"><a href="programming-preliminaries.html"><i class="fa fa-check"></i><b>2</b> Programming Preliminaries</a>
<ul>
<li class="chapter" data-level="2.1" data-path="programming-preliminaries.html"><a href="programming-preliminaries.html#welcome-to-the-tidyverse"><i class="fa fa-check"></i><b>2.1</b> Welcome to the tidyverse</a></li>
<li class="chapter" data-level="2.2" data-path="programming-preliminaries.html"><a href="programming-preliminaries.html#functions"><i class="fa fa-check"></i><b>2.2</b> Functions</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="programming-preliminaries.html"><a href="programming-preliminaries.html#rolling-your-own"><i class="fa fa-check"></i><b>2.2.1</b> Rolling your own</a></li>
<li class="chapter" data-level="2.2.2" data-path="programming-preliminaries.html"><a href="programming-preliminaries.html#a-dangerous-function"><i class="fa fa-check"></i><b>2.2.2</b> A dangerous function</a></li>
<li class="chapter" data-level="2.2.3" data-path="programming-preliminaries.html"><a href="programming-preliminaries.html#using-named-arguments"><i class="fa fa-check"></i><b>2.2.3</b> Using Named Arguments</a></li>
<li class="chapter" data-level="2.2.4" data-path="programming-preliminaries.html"><a href="programming-preliminaries.html#argument-defaults"><i class="fa fa-check"></i><b>2.2.4</b> Argument Defaults</a></li>
<li class="chapter" data-level="2.2.5" data-path="programming-preliminaries.html"><a href="programming-preliminaries.html#function-skeletons"><i class="fa fa-check"></i><b>2.2.5</b> Function skeletons</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="programming-preliminaries.html"><a href="programming-preliminaries.html#pipe-dreams"><i class="fa fa-check"></i><b>2.3</b> <code>\&gt;</code> (Pipe) dreams</a></li>
<li class="chapter" data-level="2.4" data-path="programming-preliminaries.html"><a href="programming-preliminaries.html#recipes-versus-patterns"><i class="fa fa-check"></i><b>2.4</b> Recipes versus Patterns</a></li>
<li class="chapter" data-level="2.5" data-path="programming-preliminaries.html"><a href="programming-preliminaries.html#exercises"><i class="fa fa-check"></i><b>2.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="t-test-simulation.html"><a href="t-test-simulation.html"><i class="fa fa-check"></i><b>3</b> An initial simulation</a>
<ul>
<li class="chapter" data-level="3.1" data-path="t-test-simulation.html"><a href="t-test-simulation.html#simulating-a-single-scenario"><i class="fa fa-check"></i><b>3.1</b> Simulating a single scenario</a></li>
<li class="chapter" data-level="3.2" data-path="t-test-simulation.html"><a href="t-test-simulation.html#a-non-normal-population-distribution"><i class="fa fa-check"></i><b>3.2</b> A non-normal population distribution</a></li>
<li class="chapter" data-level="3.3" data-path="t-test-simulation.html"><a href="t-test-simulation.html#simulating-across-different-scenarios"><i class="fa fa-check"></i><b>3.3</b> Simulating across different scenarios</a></li>
<li class="chapter" data-level="3.4" data-path="t-test-simulation.html"><a href="t-test-simulation.html#extending-the-simulation-design"><i class="fa fa-check"></i><b>3.4</b> Extending the simulation design</a></li>
<li class="chapter" data-level="3.5" data-path="t-test-simulation.html"><a href="t-test-simulation.html#exercises-1"><i class="fa fa-check"></i><b>3.5</b> Exercises</a></li>
</ul></li>
<li class="part"><span><b>II Structure and Mechanics of a Simulation Study</b></span></li>
<li class="chapter" data-level="4" data-path="simulation-structure.html"><a href="simulation-structure.html"><i class="fa fa-check"></i><b>4</b> Structure of a simulation study</a>
<ul>
<li class="chapter" data-level="4.1" data-path="simulation-structure.html"><a href="simulation-structure.html#general-structure-of-a-simulation"><i class="fa fa-check"></i><b>4.1</b> General structure of a simulation</a></li>
<li class="chapter" data-level="4.2" data-path="simulation-structure.html"><a href="simulation-structure.html#tidy-modular-simulations"><i class="fa fa-check"></i><b>4.2</b> Tidy, modular simulations</a></li>
<li class="chapter" data-level="4.3" data-path="simulation-structure.html"><a href="simulation-structure.html#skeleton-of-a-simulation-study"><i class="fa fa-check"></i><b>4.3</b> Skeleton of a simulation study</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="simulation-structure.html"><a href="simulation-structure.html#data-generating-process"><i class="fa fa-check"></i><b>4.3.1</b> Data-Generating Process</a></li>
<li class="chapter" data-level="4.3.2" data-path="simulation-structure.html"><a href="simulation-structure.html#data-analysis-procedure"><i class="fa fa-check"></i><b>4.3.2</b> Data Analysis Procedure</a></li>
<li class="chapter" data-level="4.3.3" data-path="simulation-structure.html"><a href="simulation-structure.html#repetition"><i class="fa fa-check"></i><b>4.3.3</b> Repetition</a></li>
<li class="chapter" data-level="4.3.4" data-path="simulation-structure.html"><a href="simulation-structure.html#performance-summaries"><i class="fa fa-check"></i><b>4.3.4</b> Performance summaries</a></li>
<li class="chapter" data-level="4.3.5" data-path="simulation-structure.html"><a href="simulation-structure.html#multifactor-simulations"><i class="fa fa-check"></i><b>4.3.5</b> Multifactor simulations</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="simulation-structure.html"><a href="simulation-structure.html#exercises-2"><i class="fa fa-check"></i><b>4.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="case-ANOVA.html"><a href="case-ANOVA.html"><i class="fa fa-check"></i><b>5</b> Case Study: Heteroskedastic ANOVA</a>
<ul>
<li class="chapter" data-level="5.1" data-path="case-ANOVA.html"><a href="case-ANOVA.html#case-anova-DGP"><i class="fa fa-check"></i><b>5.1</b> The data-generating model</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="case-ANOVA.html"><a href="case-ANOVA.html#now-make-a-function"><i class="fa fa-check"></i><b>5.1.1</b> Now make a function</a></li>
<li class="chapter" data-level="5.1.2" data-path="case-ANOVA.html"><a href="case-ANOVA.html#cautious-coding"><i class="fa fa-check"></i><b>5.1.2</b> Cautious coding</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="case-ANOVA.html"><a href="case-ANOVA.html#the-hypothesis-testing-procedures"><i class="fa fa-check"></i><b>5.2</b> The hypothesis testing procedures</a></li>
<li class="chapter" data-level="5.3" data-path="case-ANOVA.html"><a href="case-ANOVA.html#running-the-simulation"><i class="fa fa-check"></i><b>5.3</b> Running the simulation</a></li>
<li class="chapter" data-level="5.4" data-path="case-ANOVA.html"><a href="case-ANOVA.html#summarizing-test-performance"><i class="fa fa-check"></i><b>5.4</b> Summarizing test performance</a></li>
<li class="chapter" data-level="5.5" data-path="case-ANOVA.html"><a href="case-ANOVA.html#exAnovaExercises"><i class="fa fa-check"></i><b>5.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="data-generating-processes.html"><a href="data-generating-processes.html"><i class="fa fa-check"></i><b>6</b> Data-generating processes</a>
<ul>
<li class="chapter" data-level="6.1" data-path="data-generating-processes.html"><a href="data-generating-processes.html#DGP-examples"><i class="fa fa-check"></i><b>6.1</b> Examples</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="data-generating-processes.html"><a href="data-generating-processes.html#ANOVA-example"><i class="fa fa-check"></i><b>6.1.1</b> One-way analysis of variance</a></li>
<li class="chapter" data-level="6.1.2" data-path="data-generating-processes.html"><a href="data-generating-processes.html#BVPois-example"><i class="fa fa-check"></i><b>6.1.2</b> Bivariate Poisson model</a></li>
<li class="chapter" data-level="6.1.3" data-path="data-generating-processes.html"><a href="data-generating-processes.html#CRT-example"><i class="fa fa-check"></i><b>6.1.3</b> Hierarchical linear model for a cluster-randomized trial</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="data-generating-processes.html"><a href="data-generating-processes.html#components-of-a-dgp"><i class="fa fa-check"></i><b>6.2</b> Components of a DGP</a></li>
<li class="chapter" data-level="6.3" data-path="data-generating-processes.html"><a href="data-generating-processes.html#DGP-functions"><i class="fa fa-check"></i><b>6.3</b> A statistical model is a recipe for data generation</a></li>
<li class="chapter" data-level="6.4" data-path="data-generating-processes.html"><a href="data-generating-processes.html#DGP-plotting"><i class="fa fa-check"></i><b>6.4</b> Plot the artificial data</a></li>
<li class="chapter" data-level="6.5" data-path="data-generating-processes.html"><a href="data-generating-processes.html#check-the-data-generating-function"><i class="fa fa-check"></i><b>6.5</b> Check the data-generating function</a></li>
<li class="chapter" data-level="6.6" data-path="data-generating-processes.html"><a href="data-generating-processes.html#case-cluster"><i class="fa fa-check"></i><b>6.6</b> Example: Simulating clustered data</a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="data-generating-processes.html"><a href="data-generating-processes.html#a-design-decision-what-do-we-want-to-manipulate"><i class="fa fa-check"></i><b>6.6.1</b> A design decision: What do we want to manipulate?</a></li>
<li class="chapter" data-level="6.6.2" data-path="data-generating-processes.html"><a href="data-generating-processes.html#a-model-for-a-cluster-rct"><i class="fa fa-check"></i><b>6.6.2</b> A model for a cluster RCT</a></li>
<li class="chapter" data-level="6.6.3" data-path="data-generating-processes.html"><a href="data-generating-processes.html#from-equations-to-code"><i class="fa fa-check"></i><b>6.6.3</b> From equations to code</a></li>
<li class="chapter" data-level="6.6.4" data-path="data-generating-processes.html"><a href="data-generating-processes.html#standardization-in-the-dgp"><i class="fa fa-check"></i><b>6.6.4</b> Standardization in the DGP</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="data-generating-processes.html"><a href="data-generating-processes.html#three-parameter-IRT"><i class="fa fa-check"></i><b>6.7</b> Sometimes a DGP is all you need</a></li>
<li class="chapter" data-level="6.8" data-path="data-generating-processes.html"><a href="data-generating-processes.html#more-to-explore"><i class="fa fa-check"></i><b>6.8</b> More to explore</a></li>
<li class="chapter" data-level="6.9" data-path="data-generating-processes.html"><a href="data-generating-processes.html#exercises-3"><i class="fa fa-check"></i><b>6.9</b> Exercises</a>
<ul>
<li class="chapter" data-level="6.9.1" data-path="data-generating-processes.html"><a href="data-generating-processes.html#Welch-t-dgp"><i class="fa fa-check"></i><b>6.9.1</b> The Welch test on a shifted-and-scaled <span class="math inline">\(t\)</span> distribution</a></li>
<li class="chapter" data-level="6.9.2" data-path="data-generating-processes.html"><a href="data-generating-processes.html#plot-the-bivariate-poisson"><i class="fa fa-check"></i><b>6.9.2</b> Plot the bivariate Poisson</a></li>
<li class="chapter" data-level="6.9.3" data-path="data-generating-processes.html"><a href="data-generating-processes.html#BVP-check"><i class="fa fa-check"></i><b>6.9.3</b> Check the bivariate Poisson function</a></li>
<li class="chapter" data-level="6.9.4" data-path="data-generating-processes.html"><a href="data-generating-processes.html#BVP-error"><i class="fa fa-check"></i><b>6.9.4</b> Add error-catching to the bivariate Poisson function</a></li>
<li class="chapter" data-level="6.9.5" data-path="data-generating-processes.html"><a href="data-generating-processes.html#BVNB1"><i class="fa fa-check"></i><b>6.9.5</b> A bivariate negative binomial distribution</a></li>
<li class="chapter" data-level="6.9.6" data-path="data-generating-processes.html"><a href="data-generating-processes.html#BVNB2"><i class="fa fa-check"></i><b>6.9.6</b> Another bivariate negative binomial distribution</a></li>
<li class="chapter" data-level="6.9.7" data-path="data-generating-processes.html"><a href="data-generating-processes.html#cluster-RCT-plot"><i class="fa fa-check"></i><b>6.9.7</b> Plot the data from a cluster-randomized trial</a></li>
<li class="chapter" data-level="6.9.8" data-path="data-generating-processes.html"><a href="data-generating-processes.html#cluster-RCT-checks"><i class="fa fa-check"></i><b>6.9.8</b> Checking the Cluster RCT DGP</a></li>
<li class="chapter" data-level="6.9.9" data-path="data-generating-processes.html"><a href="data-generating-processes.html#cluster-RCT-heterogeneity"><i class="fa fa-check"></i><b>6.9.9</b> More school-level variation</a></li>
<li class="chapter" data-level="6.9.10" data-path="data-generating-processes.html"><a href="data-generating-processes.html#cluster-RCT-baseline"><i class="fa fa-check"></i><b>6.9.10</b> Cluster-randomized trial with baseline predictors</a></li>
<li class="chapter" data-level="6.9.11" data-path="data-generating-processes.html"><a href="data-generating-processes.html#meta-regression-DGP"><i class="fa fa-check"></i><b>6.9.11</b> Random effects meta-regression</a></li>
<li class="chapter" data-level="6.9.12" data-path="data-generating-processes.html"><a href="data-generating-processes.html#Vevea-Hedges-DGP"><i class="fa fa-check"></i><b>6.9.12</b> Meta-regression with selective reporting</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="data-analysis-procedures.html"><a href="data-analysis-procedures.html"><i class="fa fa-check"></i><b>7</b> Data analysis procedures</a>
<ul>
<li class="chapter" data-level="7.1" data-path="data-analysis-procedures.html"><a href="data-analysis-procedures.html#estimation-functions"><i class="fa fa-check"></i><b>7.1</b> Writing estimation functions</a></li>
<li class="chapter" data-level="7.2" data-path="data-analysis-procedures.html"><a href="data-analysis-procedures.html#multiple-estimation-procedures"><i class="fa fa-check"></i><b>7.2</b> Including Multiple estimation procedures</a></li>
<li class="chapter" data-level="7.3" data-path="data-analysis-procedures.html"><a href="data-analysis-procedures.html#validating-estimation-procedures"><i class="fa fa-check"></i><b>7.3</b> Validating Estimation Procedures</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="data-analysis-procedures.html"><a href="data-analysis-procedures.html#checking-against-existing-implementations"><i class="fa fa-check"></i><b>7.3.1</b> Checking against existing implementations</a></li>
<li class="chapter" data-level="7.3.2" data-path="data-analysis-procedures.html"><a href="data-analysis-procedures.html#checking-novel-procedures"><i class="fa fa-check"></i><b>7.3.2</b> Checking novel procedures</a></li>
<li class="chapter" data-level="7.3.3" data-path="data-analysis-procedures.html"><a href="data-analysis-procedures.html#checking-with-simulations"><i class="fa fa-check"></i><b>7.3.3</b> Checking with simulations</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="data-analysis-procedures.html"><a href="data-analysis-procedures.html#handling-errors-warnings-and-other-hiccups"><i class="fa fa-check"></i><b>7.4</b> Handling errors, warnings, and other hiccups</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="data-analysis-procedures.html"><a href="data-analysis-procedures.html#capturing-errors-and-warnings"><i class="fa fa-check"></i><b>7.4.1</b> Capturing errors and warnings</a></li>
<li class="chapter" data-level="7.4.2" data-path="data-analysis-procedures.html"><a href="data-analysis-procedures.html#adapting-for-errors"><i class="fa fa-check"></i><b>7.4.2</b> Adapting estimation procedures for errors and warnings</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="data-analysis-procedures.html"><a href="data-analysis-procedures.html#exercises-4"><i class="fa fa-check"></i><b>7.5</b> Exercises</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="data-analysis-procedures.html"><a href="data-analysis-procedures.html#BFFs-forever"><i class="fa fa-check"></i><b>7.5.1</b> More Heteroskedastic ANOVA</a></li>
<li class="chapter" data-level="7.5.2" data-path="data-analysis-procedures.html"><a href="data-analysis-procedures.html#contingent-testing"><i class="fa fa-check"></i><b>7.5.2</b> Contingent testing</a></li>
<li class="chapter" data-level="7.5.3" data-path="data-analysis-procedures.html"><a href="data-analysis-procedures.html#cross-check-CRT-estimators"><i class="fa fa-check"></i><b>7.5.3</b> Check the cluster-RCT functions</a></li>
<li class="chapter" data-level="7.5.4" data-path="data-analysis-procedures.html"><a href="data-analysis-procedures.html#CRT-ANCOVA-estimators"><i class="fa fa-check"></i><b>7.5.4</b> Extending the cluster-RCT functions</a></li>
<li class="chapter" data-level="7.5.5" data-path="data-analysis-procedures.html"><a href="data-analysis-procedures.html#contingent-estimator-processing"><i class="fa fa-check"></i><b>7.5.5</b> Contingent estimator processing</a></li>
<li class="chapter" data-level="7.5.6" data-path="data-analysis-procedures.html"><a href="data-analysis-procedures.html#Vevea-Hedges-estimation"><i class="fa fa-check"></i><b>7.5.6</b> Meta-regression with selective reporting</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="running-the-simulation-process.html"><a href="running-the-simulation-process.html"><i class="fa fa-check"></i><b>8</b> Running the Simulation Process</a>
<ul>
<li class="chapter" data-level="8.1" data-path="running-the-simulation-process.html"><a href="running-the-simulation-process.html#writing-simulations-quick-with-the-simhelpers-package"><i class="fa fa-check"></i><b>8.1</b> Writing simulations quick with the simhelpers package</a></li>
<li class="chapter" data-level="8.2" data-path="running-the-simulation-process.html"><a href="running-the-simulation-process.html#adding-checks-and-balances"><i class="fa fa-check"></i><b>8.2</b> Adding Checks and Balances</a></li>
<li class="chapter" data-level="8.3" data-path="running-the-simulation-process.html"><a href="running-the-simulation-process.html#exercises-5"><i class="fa fa-check"></i><b>8.3</b> Exercises</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Designing Monte Carlo Simulations in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="programming-preliminaries" class="section level1 hasAnchor" number="2">
<h1><span class="header-section-number">Chapter 2</span> Programming Preliminaries<a href="programming-preliminaries.html#programming-preliminaries" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>In this chapter, we introduce some essential programming concepts that may be less familiar to readers, but which are central to how we approach writing code for simulation studies.
We also explain some of the rationale and reasoning behind how we present example code throughout the book.</p>
<div id="welcome-to-the-tidyverse" class="section level2 hasAnchor" number="2.1">
<h2><span class="header-section-number">2.1</span> Welcome to the tidyverse<a href="programming-preliminaries.html#welcome-to-the-tidyverse" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Layered on top of R are a collection of contributed packages that make data wrangling and management much, much easier.
This collection is called <code>tidyverse</code> and it includes popular packages such as <code>dplyr</code>, <code>tidyr</code>, and <code>ggplot2</code>.
We use methods from the “tidyverse” throughout the book because it facilitates writing clean, concise code.
In particular, we make heavy use of the <code>dplyr</code> package for group-wise data manipulation, the <code>purrr</code> package for functional programming, and the <code>ggplot2</code> package for statistical graphics.
The <a href="https://r4ds.had.co.nz/">1st edition</a> or <a href="https://r4ds.hadley.nz/">2nd edition</a> of the free online textbook <em>R for Data Science</em> provide an excellent, thorough introduction to these packages, along with much more background on the tidyverse.
We will cite portions of this text throughout the book.</p>
<p>Loading the tidyverse packages is straightforward:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="programming-preliminaries.html#cb1-1" tabindex="-1"></a><span class="fu">library</span>( tidyverse )</span>
<span id="cb1-2"><a href="programming-preliminaries.html#cb1-2" tabindex="-1"></a><span class="fu">options</span>(<span class="fu">list</span>(<span class="at">dplyr.summarise.inform =</span> <span class="cn">FALSE</span>))</span></code></pre></div>
<p>(The second line is to turn off some of the persistent warnings generated by the <code>dplyr</code> function <code>summarize()</code>.)
These lines of code appear in the header of nearly every script we use.</p>
</div>
<div id="functions" class="section level2 hasAnchor" number="2.2">
<h2><span class="header-section-number">2.2</span> Functions<a href="programming-preliminaries.html#functions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>If you are comfortable using R for data analysis tasks, you will be familiar with many of R’s functions.
R has function to do things like calculate a summary statistic from a list of numbers (e.g., <code>mean()</code>, <code>median()</code>, or <code>sd()</code>), calculate linear regression coefficient estimates from a dataset (<code>lm()</code>), or count the number of rows in a dataset (<code>nrow()</code>).
In the abstract, a function is a little machine for transforming ingredients into outputs, like a microwave (put a bag of kernels in and it will return hot, crunchy popcorn), a cheese shredder (put a block of mozzarella in and it transforms it into topping for your pizza), or a washing machine (put in dirty clothes and detergent and it will return clean but damp clothes).
A function takes in pieces of information specified by the user (the inputs), follows a set of instructions for transforming or summarizing those inputs, and then returns the result of the calculations (the outputs).</p>
<!--
![A function as a machine](image/function-machine.png){ width=50% }
LWM: Is this worth updating and including?  If included, cite in the text.
-->
<p>A function can do nearly anything as long as the calculation can be expressed in code—it can even produce output that is random.
For example, the <code>rnorm()</code> function takes as input a number <code>n</code> and returns that many random numbers, drawn from a standard normal distribution:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="programming-preliminaries.html#cb2-1" tabindex="-1"></a><span class="fu">rnorm</span>(<span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1]  0.7881078 -0.6695527 -0.3958219</code></pre>
<p>Each time the function is called, it returns a different set of numbers:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="programming-preliminaries.html#cb4-1" tabindex="-1"></a><span class="fu">rnorm</span>(<span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] -0.06561908 -1.40027561 -0.78383165</code></pre>
<p>The <code>rnorm()</code> function also has further input arguments that let the user specify the mean and standard deviation of the distribution from which numbers are drawn:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="programming-preliminaries.html#cb6-1" tabindex="-1"></a><span class="fu">rnorm</span>(<span class="dv">3</span>, <span class="at">mean =</span> <span class="dv">10</span>, <span class="at">sd =</span> <span class="fl">0.5</span>)</span></code></pre></div>
<pre><code>## [1] 10.23538 10.24451 10.71261</code></pre>
<p>In writing code for simulations, we will make extensive use of this particular function and other functions that produce sequences of random numbers.
We will have more to say about random number generation later.</p>
<div id="rolling-your-own" class="section level3 hasAnchor" number="2.2.1">
<h3><span class="header-section-number">2.2.1</span> Rolling your own<a href="programming-preliminaries.html#rolling-your-own" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In R, you can create your own function by specifying the pieces of input information, the steps to follow in transforming the inputs, and the result to return as output.
Learning to write your own functions to carry out calculations is an immensely useful skill that will greatly enhance your ability to accomplish a range of tasks.
Writing custom functions is also central to our approach to coding Monte Carlo simulations, and so we highlight some of the key considerations here.
<a href="https://r4ds.had.co.nz/functions.html">Chapter 19 of R for Data Science (1st edition)</a> provides an in-depth discussion of how to write your own functions.</p>
<p>Here is an example of a custom function called <code>one_run()</code>:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="programming-preliminaries.html#cb8-1" tabindex="-1"></a>one_run <span class="ot">&lt;-</span> <span class="cf">function</span>( N, mn, sd ) {</span>
<span id="cb8-2"><a href="programming-preliminaries.html#cb8-2" tabindex="-1"></a>  vals <span class="ot">&lt;-</span> <span class="fu">rnorm</span>( N, <span class="at">mean =</span> mn, <span class="at">sd =</span> sd )</span>
<span id="cb8-3"><a href="programming-preliminaries.html#cb8-3" tabindex="-1"></a>  tt <span class="ot">&lt;-</span> <span class="fu">t.test</span>( vals )</span>
<span id="cb8-4"><a href="programming-preliminaries.html#cb8-4" tabindex="-1"></a>  pvalue <span class="ot">&lt;-</span> tt<span class="sc">$</span>p.value</span>
<span id="cb8-5"><a href="programming-preliminaries.html#cb8-5" tabindex="-1"></a>  <span class="fu">return</span>(pvalue)</span>
<span id="cb8-6"><a href="programming-preliminaries.html#cb8-6" tabindex="-1"></a>}</span></code></pre></div>
<p>The first line specifies that we are creating a function that takes inputs <code>N</code>, <code>mn</code>, and <code>sd</code>. These are called the <em>parameters</em>, <em>inputs</em>, or <em>arguments</em> of the function. The remaining lines inside the curly brackets are called the <em>body</em> of the function. These lines specify the instructions to follow in transforming the inputs into an output:</p>
<ol style="list-style-type: decimal">
<li>Generate a random sample of <code>N</code> observations from a normal distribution with mean <code>mn</code> and store the result in <code>vals</code>.</li>
<li>Use the built-in function <code>t.test()</code> to compute a one-sample t-test for the null hypothesis that the population mean is zero, then store the result in <code>tt</code>.</li>
<li>Extract the p-value from the t-test store the result in <code>pvalue</code>.</li>
<li>Return <code>pvalue</code> as output.</li>
</ol>
<p>Having created the function, we can then use it with any inputs that we like:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="programming-preliminaries.html#cb9-1" tabindex="-1"></a><span class="fu">one_run</span>( <span class="dv">100</span>, <span class="dv">5</span>, <span class="dv">1</span> )</span></code></pre></div>
<pre><code>## [1] 5.01524e-77</code></pre>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="programming-preliminaries.html#cb11-1" tabindex="-1"></a><span class="fu">one_run</span>( <span class="dv">10</span>, <span class="fl">0.3</span>, <span class="dv">1</span> )</span></code></pre></div>
<pre><code>## [1] 0.5711102</code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="programming-preliminaries.html#cb13-1" tabindex="-1"></a><span class="fu">one_run</span>( <span class="dv">10</span>, <span class="fl">0.3</span>, <span class="fl">0.2</span> )</span></code></pre></div>
<pre><code>## [1] 0.0002693702</code></pre>
<p>In each case, the output of the function is a p-value from a simulated sample of data. The function produces a different answer each time because its instructions involve generating random numbers each time it is called.
In essence, our custom function is just a short-cut for carrying out its instructions.
Writing it saves us from having to repeatedly write or copy-paste the lines of code inside its body.</p>
</div>
<div id="a-dangerous-function" class="section level3 hasAnchor" number="2.2.2">
<h3><span class="header-section-number">2.2.2</span> A dangerous function<a href="programming-preliminaries.html#a-dangerous-function" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Writing custom functions will prove to be crucial for effectively implementing Monte Carlo simulations.
However, designing custom functions does take practice to master.
It also requires a degree of care above and beyond what is needed just to use R’s built-in functions.</p>
<p>One of the common mistakes encountered in writing custom functions is to let the function depend on information that is not part of the input arguments.
For example, consider the following script, which includes a nonsensical custom function called <code>funky()</code>:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="programming-preliminaries.html#cb15-1" tabindex="-1"></a>secret <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb15-2"><a href="programming-preliminaries.html#cb15-2" tabindex="-1"></a></span>
<span id="cb15-3"><a href="programming-preliminaries.html#cb15-3" tabindex="-1"></a>funky <span class="ot">&lt;-</span> <span class="cf">function</span>(input1, input2, input3) {</span>
<span id="cb15-4"><a href="programming-preliminaries.html#cb15-4" tabindex="-1"></a>  </span>
<span id="cb15-5"><a href="programming-preliminaries.html#cb15-5" tabindex="-1"></a>  <span class="co"># do funky stuff</span></span>
<span id="cb15-6"><a href="programming-preliminaries.html#cb15-6" tabindex="-1"></a>  ratio <span class="ot">&lt;-</span> input1 <span class="sc">/</span> (input2 <span class="sc">+</span> <span class="dv">4</span>)</span>
<span id="cb15-7"><a href="programming-preliminaries.html#cb15-7" tabindex="-1"></a>  funky_output <span class="ot">&lt;-</span> input3 <span class="sc">*</span> ratio <span class="sc">+</span> secret</span>
<span id="cb15-8"><a href="programming-preliminaries.html#cb15-8" tabindex="-1"></a>  </span>
<span id="cb15-9"><a href="programming-preliminaries.html#cb15-9" tabindex="-1"></a>  <span class="fu">return</span>(funky_output)  </span>
<span id="cb15-10"><a href="programming-preliminaries.html#cb15-10" tabindex="-1"></a>}</span>
<span id="cb15-11"><a href="programming-preliminaries.html#cb15-11" tabindex="-1"></a></span>
<span id="cb15-12"><a href="programming-preliminaries.html#cb15-12" tabindex="-1"></a><span class="fu">funky</span>(<span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1] 5.5</code></pre>
<p><code>funky</code> takes inputs <code>input1</code>, <code>input2</code>, and <code>input3</code>, but its instructions also depend on the quantity <code>secret</code>.
What happens if we change the value of <code>secret</code>?</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="programming-preliminaries.html#cb17-1" tabindex="-1"></a>secret <span class="ot">&lt;-</span> <span class="dv">100</span></span>
<span id="cb17-2"><a href="programming-preliminaries.html#cb17-2" tabindex="-1"></a><span class="fu">funky</span>(<span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1] 102.5</code></pre>
<p>Even though we give it the same arguments as previously, the output of the function is different.
This sort of behavior is confusing.
Unless the function involves generating random numbers, we would generally expect it to return the exact same output if we give it the same inputs.
Even worse, we get a rather cryptic error if the value of <code>secret</code> is not compatible with what the function expects:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="programming-preliminaries.html#cb19-1" tabindex="-1"></a>secret <span class="ot">&lt;-</span> <span class="st">&quot;A&quot;</span></span>
<span id="cb19-2"><a href="programming-preliminaries.html#cb19-2" tabindex="-1"></a><span class="fu">funky</span>(<span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">5</span>)</span></code></pre></div>
<pre><code>## Error in input3 * ratio + secret: non-numeric argument to binary operator</code></pre>
<p>If we are not careful, we will end up with very confusing code that can very easily lead to unintended results and errors.</p>
<p>To avoid this issue, it is important for functions to only use information that is explicitly provided to it through its arguments.
This is the principle of <em>isolating the inputs</em>.
If the result of a function is supposed to depend on a quantity, then we should include that quantity among the input arguments.
We can fix our example function by including <code>secret</code> as an argument:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="programming-preliminaries.html#cb21-1" tabindex="-1"></a>secret <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb21-2"><a href="programming-preliminaries.html#cb21-2" tabindex="-1"></a></span>
<span id="cb21-3"><a href="programming-preliminaries.html#cb21-3" tabindex="-1"></a>funkier <span class="ot">&lt;-</span> <span class="cf">function</span>(input1, input2, input3, secret) {</span>
<span id="cb21-4"><a href="programming-preliminaries.html#cb21-4" tabindex="-1"></a>  </span>
<span id="cb21-5"><a href="programming-preliminaries.html#cb21-5" tabindex="-1"></a>  <span class="co"># do funky stuff</span></span>
<span id="cb21-6"><a href="programming-preliminaries.html#cb21-6" tabindex="-1"></a>  ratio <span class="ot">&lt;-</span> input1 <span class="sc">/</span> (input2 <span class="sc">+</span> <span class="dv">4</span>)</span>
<span id="cb21-7"><a href="programming-preliminaries.html#cb21-7" tabindex="-1"></a>  funky_output <span class="ot">&lt;-</span> input3 <span class="sc">*</span> ratio <span class="sc">+</span> secret</span>
<span id="cb21-8"><a href="programming-preliminaries.html#cb21-8" tabindex="-1"></a>  </span>
<span id="cb21-9"><a href="programming-preliminaries.html#cb21-9" tabindex="-1"></a>  <span class="fu">return</span>(funky_output)  </span>
<span id="cb21-10"><a href="programming-preliminaries.html#cb21-10" tabindex="-1"></a>}</span>
<span id="cb21-11"><a href="programming-preliminaries.html#cb21-11" tabindex="-1"></a></span>
<span id="cb21-12"><a href="programming-preliminaries.html#cb21-12" tabindex="-1"></a><span class="fu">funkier</span>(<span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] 5.5</code></pre>
<p>Now the output of the function is always the same, regardless of the value of other objects in R:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="programming-preliminaries.html#cb23-1" tabindex="-1"></a>secret <span class="ot">&lt;-</span> <span class="dv">100</span></span>
<span id="cb23-2"><a href="programming-preliminaries.html#cb23-2" tabindex="-1"></a><span class="fu">funkier</span>(<span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] 5.5</code></pre>
<p>The <em>input parameter</em> <code>secret</code> holds sway here, even though there is also an object with the same name.<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a> If we want to try 100, we have to do so <em>explicitly</em>:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="programming-preliminaries.html#cb25-1" tabindex="-1"></a><span class="fu">funkier</span>(<span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] 102.5</code></pre>
<p>When writing your own functions, it may not be obvious that your function depends on external quantities and does not isolate the inputs.
In our experience, one of the best ways to detect this issue is to clear the R environment and start from a fresh palette, run the code to create the function, and call the function (perhaps more than once) to ensure that it works as expected.
Here is an illustration of what happens when we follow this process with our problematic custom function:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="programming-preliminaries.html#cb27-1" tabindex="-1"></a><span class="co"># clear environment</span></span>
<span id="cb27-2"><a href="programming-preliminaries.html#cb27-2" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list=</span><span class="fu">ls</span>()) </span>
<span id="cb27-3"><a href="programming-preliminaries.html#cb27-3" tabindex="-1"></a></span>
<span id="cb27-4"><a href="programming-preliminaries.html#cb27-4" tabindex="-1"></a><span class="co"># create function</span></span>
<span id="cb27-5"><a href="programming-preliminaries.html#cb27-5" tabindex="-1"></a>funky <span class="ot">&lt;-</span> <span class="cf">function</span>(input1, input2, input3) {</span>
<span id="cb27-6"><a href="programming-preliminaries.html#cb27-6" tabindex="-1"></a>  </span>
<span id="cb27-7"><a href="programming-preliminaries.html#cb27-7" tabindex="-1"></a>  <span class="co"># do funky stuff</span></span>
<span id="cb27-8"><a href="programming-preliminaries.html#cb27-8" tabindex="-1"></a>  ratio <span class="ot">&lt;-</span> input1 <span class="sc">/</span> (input2 <span class="sc">+</span> <span class="dv">4</span>)</span>
<span id="cb27-9"><a href="programming-preliminaries.html#cb27-9" tabindex="-1"></a>  funky_output <span class="ot">&lt;-</span> input3 <span class="sc">*</span> ratio <span class="sc">+</span> secret</span>
<span id="cb27-10"><a href="programming-preliminaries.html#cb27-10" tabindex="-1"></a>  </span>
<span id="cb27-11"><a href="programming-preliminaries.html#cb27-11" tabindex="-1"></a>  <span class="fu">return</span>(funky_output)  </span>
<span id="cb27-12"><a href="programming-preliminaries.html#cb27-12" tabindex="-1"></a>}</span>
<span id="cb27-13"><a href="programming-preliminaries.html#cb27-13" tabindex="-1"></a></span>
<span id="cb27-14"><a href="programming-preliminaries.html#cb27-14" tabindex="-1"></a><span class="co"># test the function</span></span>
<span id="cb27-15"><a href="programming-preliminaries.html#cb27-15" tabindex="-1"></a><span class="fu">funky</span>(<span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">5</span>)</span></code></pre></div>
<pre><code>## Error in funky(3, 2, 5): object &#39;secret&#39; not found</code></pre>
<p>We get an error because the external quantity is not available.
Here is the same process using our corrected function:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="programming-preliminaries.html#cb29-1" tabindex="-1"></a><span class="co"># clear environment</span></span>
<span id="cb29-2"><a href="programming-preliminaries.html#cb29-2" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list=</span><span class="fu">ls</span>()) </span>
<span id="cb29-3"><a href="programming-preliminaries.html#cb29-3" tabindex="-1"></a></span>
<span id="cb29-4"><a href="programming-preliminaries.html#cb29-4" tabindex="-1"></a><span class="co"># create function</span></span>
<span id="cb29-5"><a href="programming-preliminaries.html#cb29-5" tabindex="-1"></a>funkier <span class="ot">&lt;-</span> <span class="cf">function</span>(input1, input2, input3, secret) {</span>
<span id="cb29-6"><a href="programming-preliminaries.html#cb29-6" tabindex="-1"></a>  </span>
<span id="cb29-7"><a href="programming-preliminaries.html#cb29-7" tabindex="-1"></a>  <span class="co"># do funky stuff</span></span>
<span id="cb29-8"><a href="programming-preliminaries.html#cb29-8" tabindex="-1"></a>  ratio <span class="ot">&lt;-</span> input1 <span class="sc">/</span> (input2 <span class="sc">+</span> <span class="dv">4</span>)</span>
<span id="cb29-9"><a href="programming-preliminaries.html#cb29-9" tabindex="-1"></a>  funky_output <span class="ot">&lt;-</span> input3 <span class="sc">*</span> ratio <span class="sc">+</span> secret</span>
<span id="cb29-10"><a href="programming-preliminaries.html#cb29-10" tabindex="-1"></a>  </span>
<span id="cb29-11"><a href="programming-preliminaries.html#cb29-11" tabindex="-1"></a>  <span class="fu">return</span>(funky_output)  </span>
<span id="cb29-12"><a href="programming-preliminaries.html#cb29-12" tabindex="-1"></a>}</span>
<span id="cb29-13"><a href="programming-preliminaries.html#cb29-13" tabindex="-1"></a></span>
<span id="cb29-14"><a href="programming-preliminaries.html#cb29-14" tabindex="-1"></a></span>
<span id="cb29-15"><a href="programming-preliminaries.html#cb29-15" tabindex="-1"></a><span class="co"># test the function</span></span>
<span id="cb29-16"><a href="programming-preliminaries.html#cb29-16" tabindex="-1"></a><span class="fu">funkier</span>(<span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">5</span>, <span class="at">secret =</span> <span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] 5.5</code></pre>
</div>
<div id="using-named-arguments" class="section level3 hasAnchor" number="2.2.3">
<h3><span class="header-section-number">2.2.3</span> Using Named Arguments<a href="programming-preliminaries.html#using-named-arguments" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>When calling a function (whether it is a built-in function or a custom function that you developed), you can specify which values correspond to which arguments using argument names.
Using argument names greatly enhances the readability and flexibility of function calls.
When you specify inputs by name, R matches the values to the arguments based on the names rather than the order in which they appear.
This feature is particularly useful in complex functions with many optional arguments.</p>
<p>For example, consider the function <code>one_run()</code> from <a href="programming-preliminaries.html#rolling-your-own">2.2.1</a>:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="programming-preliminaries.html#cb31-1" tabindex="-1"></a>one_run <span class="ot">&lt;-</span> <span class="cf">function</span>( N, mn, sd ) {</span>
<span id="cb31-2"><a href="programming-preliminaries.html#cb31-2" tabindex="-1"></a>  vals <span class="ot">&lt;-</span> <span class="fu">rnorm</span>( N, <span class="at">mean =</span> mn, <span class="at">sd =</span> sd )</span>
<span id="cb31-3"><a href="programming-preliminaries.html#cb31-3" tabindex="-1"></a>  tt <span class="ot">&lt;-</span> <span class="fu">t.test</span>( vals )</span>
<span id="cb31-4"><a href="programming-preliminaries.html#cb31-4" tabindex="-1"></a>  pvalue <span class="ot">&lt;-</span> tt<span class="sc">$</span>p.value</span>
<span id="cb31-5"><a href="programming-preliminaries.html#cb31-5" tabindex="-1"></a>  <span class="fu">return</span>(pvalue)</span>
<span id="cb31-6"><a href="programming-preliminaries.html#cb31-6" tabindex="-1"></a>}</span></code></pre></div>
<p>You could call <code>one_run()</code> with <em>named</em> arguments in any order:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="programming-preliminaries.html#cb32-1" tabindex="-1"></a>result <span class="ot">&lt;-</span> <span class="fu">one_run</span>(<span class="at">sd =</span> <span class="fl">0.5</span>, <span class="at">mn =</span> <span class="dv">2</span>, <span class="at">N =</span> <span class="dv">500</span>)</span></code></pre></div>
<p>In this call, R knows which value to assign to each argument, so we could list the arguments however we like.</p>
<p>Without naming, we would have to specify the arguments in the exact order that they appear in the function definition:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="programming-preliminaries.html#cb33-1" tabindex="-1"></a>result <span class="ot">&lt;-</span> <span class="fu">one_run</span>( <span class="dv">500</span>, <span class="dv">2</span>, <span class="fl">0.5</span> )</span></code></pre></div>
<p>Without the argument names, this line of code is harder to follow—you have to know more about the design of the function to understand how it is being used in this instance.</p>
<p>Getting in the habit of using named arguments will help you avoid errors.
If you pass arguments without naming, and in the wrong order, you can end up with very strange results that are hard to diagnose.
Even if you get it right, if someone later changes the function (say by adding a new argument in the middle of the list), your code will suddenly break with no explanation.</p>
</div>
<div id="argument-defaults" class="section level3 hasAnchor" number="2.2.4">
<h3><span class="header-section-number">2.2.4</span> Argument Defaults<a href="programming-preliminaries.html#argument-defaults" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Default arguments allow you to specify typical values for parameters that a user might not need to change every time they use the function.
This can make the function easier to use and less error-prone because the defaults ensure that the function behaves sensibly even when some arguments are not explicitly provided. For example, let us revise the <code>one_run()</code> function from above to use default arguments:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="programming-preliminaries.html#cb34-1" tabindex="-1"></a>one_run <span class="ot">&lt;-</span> <span class="cf">function</span>( <span class="at">N =</span> <span class="dv">10</span>, <span class="at">mn =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">1</span> ) {</span>
<span id="cb34-2"><a href="programming-preliminaries.html#cb34-2" tabindex="-1"></a>  vals <span class="ot">&lt;-</span> <span class="fu">rnorm</span>( N, <span class="at">mean =</span> mn, <span class="at">sd =</span> sd )</span>
<span id="cb34-3"><a href="programming-preliminaries.html#cb34-3" tabindex="-1"></a>  tt <span class="ot">&lt;-</span> <span class="fu">t.test</span>( vals )</span>
<span id="cb34-4"><a href="programming-preliminaries.html#cb34-4" tabindex="-1"></a>  pvalue <span class="ot">&lt;-</span> tt<span class="sc">$</span>p.value</span>
<span id="cb34-5"><a href="programming-preliminaries.html#cb34-5" tabindex="-1"></a>  <span class="fu">return</span>(pvalue)</span>
<span id="cb34-6"><a href="programming-preliminaries.html#cb34-6" tabindex="-1"></a>}</span></code></pre></div>
<p>Now our function has a default for <code>N</code> of 10, for <code>mn</code> of 0, and for <code>s</code> of 1.
This means a user can run the function simply by calling <code>one_run()</code> without any inputs. Doing so will generate a p-value from a sample of 10 observations with a mean of zero and a standard deviation of 1.</p>
<p>Once we have our function with defaults, we can call the function while specifying only the inputs that differ from the default values:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="programming-preliminaries.html#cb35-1" tabindex="-1"></a>bigger_sample <span class="ot">&lt;-</span> <span class="fu">one_run</span>( <span class="at">N =</span> <span class="dv">50</span> )</span></code></pre></div>
<p>The function will use its default values for <code>mn</code> and <code>s</code>.
Using defaults lets the user call the function more succinctly.</p>
<p>Later chapters will have much more to say about the process of writing custom functions, as well as many further illustrations and examples.</p>
</div>
<div id="function-skeletons" class="section level3 hasAnchor" number="2.2.5">
<h3><span class="header-section-number">2.2.5</span> Function skeletons<a href="programming-preliminaries.html#function-skeletons" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In discussing how to write functions for simulations, we will often present <em>function skeletons</em>. By a skeleton, we mean code that creates a function with a specific set of input arguments, but where the body is left partially or fully unspecified.
Here is a cursory example of a function skeleton:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="programming-preliminaries.html#cb36-1" tabindex="-1"></a>run_simulation <span class="ot">&lt;-</span> <span class="cf">function</span>( N, J, mu, sigma, tau ) {</span>
<span id="cb36-2"><a href="programming-preliminaries.html#cb36-2" tabindex="-1"></a>  <span class="co"># simulate data</span></span>
<span id="cb36-3"><a href="programming-preliminaries.html#cb36-3" tabindex="-1"></a>  <span class="co"># apply estimation procedure</span></span>
<span id="cb36-4"><a href="programming-preliminaries.html#cb36-4" tabindex="-1"></a>  <span class="co"># repeat</span></span>
<span id="cb36-5"><a href="programming-preliminaries.html#cb36-5" tabindex="-1"></a>  <span class="co"># summarize results</span></span>
<span id="cb36-6"><a href="programming-preliminaries.html#cb36-6" tabindex="-1"></a>  <span class="fu">return</span>(results)</span>
<span id="cb36-7"><a href="programming-preliminaries.html#cb36-7" tabindex="-1"></a>}</span></code></pre></div>
<p>In subsequent chapters, we will use function skeletons to outline the organization of code for simulation studies.
The skeleton headers make clear what the inputs to the function need to be.
Sometimes, we will leave comments in the body of the skeleton to sketch out the general flow of calculations that need to happen.
Depending on the details of the simulation, the specifics of these steps might be quite different, but the general structure will often be quite consistent.
Finally, the last line of the skeleton indicates the value that should be returned as output of the function.
Thus, skeletons are kind of like <a href="https://www.madlibs.com/">Mad Libs</a>, but with R code instead of parts of speech.</p>
</div>
</div>
<div id="pipe-dreams" class="section level2 hasAnchor" number="2.3">
<h2><span class="header-section-number">2.3</span> <code>\&gt;</code> (Pipe) dreams<a href="programming-preliminaries.html#pipe-dreams" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Many of the functions from <code>tidyverse</code> packages are designed to make it easy to use them in sequence via the <code>|&gt;</code> symbol, or <em>pipe</em>.<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a>
The pipe allows us to <em>compose</em> several functions, meaning to write a chain of several functions as a sequence, where the result of each function becomes the first input to the next function.
In code written with the pipe, the order of function calls follows like a story book or cake recipe, making it easier to see what is happening at each step in the sequence.</p>
<p>Consider the hypothetical functions <code>f()</code>, <code>g()</code>, and <code>h()</code>, and suppose we want to do a calculation that involves composing all three functions.
One way to write this calculation is</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="programming-preliminaries.html#cb37-1" tabindex="-1"></a>res1 <span class="ot">&lt;-</span> <span class="fu">f</span>(my_data, <span class="at">a =</span> <span class="dv">4</span>)</span>
<span id="cb37-2"><a href="programming-preliminaries.html#cb37-2" tabindex="-1"></a>res2 <span class="ot">&lt;-</span> <span class="fu">g</span>(res1, <span class="at">b =</span> <span class="cn">FALSE</span>)</span>
<span id="cb37-3"><a href="programming-preliminaries.html#cb37-3" tabindex="-1"></a>result <span class="ot">&lt;-</span> <span class="fu">h</span>(res2, <span class="at">c =</span> <span class="st">&quot;hot sauce&quot;</span>)</span></code></pre></div>
<p>We have to store the result of each intermediate step in an object, and it takes a careful read of the code to see that we are using <code>res1</code> as input to <code>g()</code> and <code>res2</code> as input to <code>h()</code>.</p>
<p>Alternately, we could try to write all the calculations as one line:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="programming-preliminaries.html#cb38-1" tabindex="-1"></a>result <span class="ot">&lt;-</span> <span class="fu">h</span>( <span class="fu">g</span>( <span class="fu">f</span>( my_data, <span class="at">a =</span> <span class="dv">4</span> ), <span class="at">b =</span> <span class="cn">FALSE</span> ), <span class="at">c =</span> <span class="st">&quot;hot sauce&quot;</span> )</span></code></pre></div>
<p>This is a mess. It takes very careful parsing to see that the <code>b</code> argument is called as part of <code>g()</code> and the <code>c</code> argument is part of h()`, and the order in which the functions appear is not the same as the order in which they are calculated.</p>
<p>With the pipe we can write the same calculation as</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="programming-preliminaries.html#cb39-1" tabindex="-1"></a>result <span class="ot">&lt;-</span> </span>
<span id="cb39-2"><a href="programming-preliminaries.html#cb39-2" tabindex="-1"></a>  my_data <span class="sc">|&gt;</span>         <span class="co"># initial dataset</span></span>
<span id="cb39-3"><a href="programming-preliminaries.html#cb39-3" tabindex="-1"></a>  <span class="fu">f</span>(<span class="at">a =</span> <span class="dv">4</span>) <span class="sc">|&gt;</span>        <span class="co"># do f() to it</span></span>
<span id="cb39-4"><a href="programming-preliminaries.html#cb39-4" tabindex="-1"></a>  <span class="fu">g</span>(<span class="at">b =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span>    <span class="co"># then do g()</span></span>
<span id="cb39-5"><a href="programming-preliminaries.html#cb39-5" tabindex="-1"></a>  <span class="fu">h</span>(<span class="at">c =</span> <span class="st">&quot;hot sauce&quot;</span>) <span class="co"># then do h()</span></span></code></pre></div>
<p>This addresses the all the issues with our previous attempts:
the order in which the functions appear is the same as the order in which they are executed;
the additional arguments are clearly associated with the relevant functions;
and there is only a single object holding the results of the calculations.
Pipes are a very nice technique for writing clear code that is easy for others to follow.<a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a></p>
<!-- Should we add a section on tibbles, since using tibbles is a major design principle? -->
</div>
<div id="recipes-versus-patterns" class="section level2 hasAnchor" number="2.4">
<h2><span class="header-section-number">2.4</span> Recipes versus Patterns<a href="programming-preliminaries.html#recipes-versus-patterns" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>As we will elaborate in subsequent chapters, we follow a modular approach to writing simulations, in which each component of the simulation is represented by its own custom function or its own object in R.
This modular approach leads to code that always has the same broad structure and where the process of implementing the simulation follows a set sequence of steps.
We start by coding a data-generating process, then write one or more data-analysis methods, then determine how to evaluate the performance of the methods, and finally implement an experimental design to examine the performance of the methods across multiple scenarios.
Over the next several chapters, we will walk through this process several times.</p>
<p>Although we always follow the same broad process, the case studies that we will present are <em>not</em> intended as a cookbook that must be rigidly followed.
In our experience, the specific features of a data-generating model, estimator, or research question sometimes require tweaking the template or switching up how we implement some aspect of the simulation.
And sometimes, it might just be a question of style or preference.
Because of this, we have purposely constructed the examples presented throughout the book to use different variations of our central theme rather than always following the exact same style and structure.
We hope that presenting these variants and adaptations will both expand your sense of what is possible and also help you to recognize the core design principles—in other words, to distinguish the forest from the trees.
Of course, we would welcome and encourage you to take any of the code verbatim, tweak and adapt it for your own purposes, and use it however you see fit.
Adapting a good example is usually much easier than starting from a blank screen.</p>
</div>
<div id="exercises" class="section level2 hasAnchor" number="2.5">
<h2><span class="header-section-number">2.5</span> Exercises<a href="programming-preliminaries.html#exercises" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ol style="list-style-type: decimal">
<li><p>Revise the <code>one_run()</code> function to use <code>|&gt;</code> instead of storing the simulated sample in <code>vals</code>.</p></li>
<li><p>Modify the <code>one_run()</code> function to return a <code>tibble()</code> that includes separate columns for the test statistic (called <code>tt$statistic</code>), the p-value, and the lower and upper end-points of the confidence interval (called <code>tt$conf.int</code>).</p></li>
<li><p>Modify the <code>one_run()</code> function so that the sample of data is generated from a non-central t distribution by substituting R’s <code>rt()</code> function in place of <code>rnorm()</code>. Make sure to modify the arguments (and argument names) of <code>one_run()</code> to allow the user to specify the non-centrality and degrees of freedom parameters of the non-central t distribution.</p></li>
<li><p>The non-central t distribution is usually parameterized in terms of non-centrality parameter <span class="math inline">\(\delta\)</span> and degrees of freedom <span class="math inline">\(\nu\)</span>, and these parameters determine the mean and spread of the distribution. Specifically, the mean of the non-central t distribution is
<span class="math display">\[\text{E}(T) = \delta \times \sqrt{\frac{\nu}{2}} \times \frac{\Gamma((\nu - 1) / 2)}{\Gamma(\nu / 2)},\]</span>
where <span class="math inline">\(\Gamma()\)</span> is the gamma function (called <code>gamma()</code> in R). Create a version of the <code>one_run()</code> function that generates data based on a non-central t distribution, but where the input arguments are <code>mn</code> for the mean and <code>df</code> for the degrees of freedom. Here is a function skeleton to get started:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="programming-preliminaries.html#cb40-1" tabindex="-1"></a>one_run <span class="ot">&lt;-</span> <span class="cf">function</span>( <span class="at">N =</span> <span class="dv">10</span>, <span class="at">mn =</span> <span class="dv">5</span>, <span class="at">df =</span> <span class="dv">4</span>) {</span>
<span id="cb40-2"><a href="programming-preliminaries.html#cb40-2" tabindex="-1"></a></span>
<span id="cb40-3"><a href="programming-preliminaries.html#cb40-3" tabindex="-1"></a>  <span class="co"># generate data from non-central t distribution</span></span>
<span id="cb40-4"><a href="programming-preliminaries.html#cb40-4" tabindex="-1"></a>  <span class="co"># vals &lt;- </span></span>
<span id="cb40-5"><a href="programming-preliminaries.html#cb40-5" tabindex="-1"></a></span>
<span id="cb40-6"><a href="programming-preliminaries.html#cb40-6" tabindex="-1"></a>  <span class="co"># calculate one-sample t-test</span></span>
<span id="cb40-7"><a href="programming-preliminaries.html#cb40-7" tabindex="-1"></a>  tt <span class="ot">&lt;-</span> <span class="fu">t.test</span>( vals )</span>
<span id="cb40-8"><a href="programming-preliminaries.html#cb40-8" tabindex="-1"></a></span>
<span id="cb40-9"><a href="programming-preliminaries.html#cb40-9" tabindex="-1"></a>  <span class="co"># compile results into a tibble and return</span></span>
<span id="cb40-10"><a href="programming-preliminaries.html#cb40-10" tabindex="-1"></a>  <span class="co"># res &lt;- </span></span>
<span id="cb40-11"><a href="programming-preliminaries.html#cb40-11" tabindex="-1"></a></span>
<span id="cb40-12"><a href="programming-preliminaries.html#cb40-12" tabindex="-1"></a>  <span class="fu">return</span>(res)</span>
<span id="cb40-13"><a href="programming-preliminaries.html#cb40-13" tabindex="-1"></a>}</span></code></pre></div></li>
<li><p>Modify <code>one_run()</code> to allow the user to specify a hypothesized value for the population mean, to use when calculating the one-sample t-test results.</p></li>
</ol>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="2">
<li id="fn2"><p>To learn more about how R determines which values to use when executing a function, see <a href="https://adv-r.hadley.nz/functions.html#lexical-scoping">Section 6.4 of Advance R</a>.<a href="programming-preliminaries.html#fnref2" class="footnote-back">↩︎</a></p></li>
<li id="fn3"><p>The pipe is a relatively recent addition to R’s basic syntax. Prior to its inclusion in base R, the <code>magrittr</code> package provided—and still provides—a pipe symbol <code>%&gt;%</code> that works similarly but has some additional syntactic nuances. We use base R’s <code>|&gt;</code> because it is always available, even without loading any additional packages. To learn more about the nuanced <code>%&gt;%</code> pipe and similar operators, see <a href="https://magrittr.tidyverse.org/articles/magrittr.html">the magrittr package</a>.<a href="programming-preliminaries.html#fnref3" class="footnote-back">↩︎</a></p></li>
<li id="fn4"><p><a href="https://r4ds.hadley.nz/data-transform.html#sec-the-pipe">Chapter 3.4 of R for Data Science (2nd edition)</a> provides more discussion and examples of how to use <code>|&gt;</code>. <a href="https://r4ds.had.co.nz/pipes.html">Chapter 18 of R for Data Science (1st edition)</a> provides more discussion and examples of how to use <code>magrittr</code>’s <code>%&gt;%</code>.<a href="programming-preliminaries.html#fnref4" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="introduction.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="t-test-simulation.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": false,
    "facebook": true,
    "twitter": true,
    "linkedin": false,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": {
    "link": "https://github.com/jepusto/Designing-Simulations-in-R/edit/master/003-programming-preliminaries.Rmd",
    "text": "Edit"
  },
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": ["Designing-Simulations-in-R.pdf", "Designing-Simulations-in-R.epub"],
  "search": {
    "engine": "lunr",
    "options": null
  },
  "toc": {
    "collapse": "section",
    "scroll_highlight": true
  },
  "toolbar": {
    "position": "fixed"
  },
  "info": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
