<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="4.3 Skeleton of a simulation study | Designing Monte Carlo Simulations in R" />
<meta property="og:type" content="book" />

<meta property="og:description" content="A text on designing, implementing, and reporting on Monte Carlo simulation studies" />
<meta name="github-repo" content="jepusto/Designing-Simulations-in-R" />

<meta name="author" content="Luke W. Miratrix and James E. Pustejovsky (Equal authors)" />

<meta name="date" content="2025-06-19" />

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: { equationNumbers: { autoNumber: "AMS" } }
});
</script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<meta name="description" content="A text on designing, implementing, and reporting on Monte Carlo simulation studies">

<title>4.3 Skeleton of a simulation study | Designing Monte Carlo Simulations in R</title>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="libs/navigation-1.1/tabsets.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>


<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
/* show arrow before summary tag as in bootstrap
TODO: remove if bootstrap in updated in html_document (rmarkdown#1485) */
details > summary {
  display: list-item;
  cursor: pointer;
}
</style>
</head>

<body>

<div class="container-fluid main-container">


<div class="row">
<div class="col-sm-12">
<div id="TOC">
<ul>
<li class="has-sub"><a href="index.html#welcome" id="toc-welcome">Welcome</a>
<ul>
<li><a href="license.html#license" id="toc-license">License</a></li>
<li><a href="about-the-authors.html#about-the-authors" id="toc-about-the-authors">About the authors</a></li>
<li><a href="acknowledgements.html#acknowledgements" id="toc-acknowledgements">Acknowledgements</a></li>
</ul></li>
<li class="part"><span><b>I An Introductory Look</b></span></li>
<li class="has-sub"><a href="1-introduction.html#introduction" id="toc-introduction"><span class="toc-section-number">1</span> Introduction</a>
<ul>
<li class="has-sub"><a href="1.1-some-of-simulations-many-uses.html#some-of-simulations-many-uses" id="toc-some-of-simulations-many-uses"><span class="toc-section-number">1.1</span> Some of simulation’s many uses</a>
<ul>
<li><a href="1.1-some-of-simulations-many-uses.html#comparing-statistical-approaches" id="toc-comparing-statistical-approaches"><span class="toc-section-number">1.1.1</span> Comparing statistical approaches</a></li>
<li><a href="1.1-some-of-simulations-many-uses.html#assessing-performance-of-complex-pipelines" id="toc-assessing-performance-of-complex-pipelines"><span class="toc-section-number">1.1.2</span> Assessing performance of complex pipelines</a></li>
<li><a href="1.1-some-of-simulations-many-uses.html#assessing-performance-under-misspecification" id="toc-assessing-performance-under-misspecification"><span class="toc-section-number">1.1.3</span> Assessing performance under misspecification</a></li>
<li><a href="1.1-some-of-simulations-many-uses.html#assessing-the-finite-sample-performance-of-a-statistical-approach" id="toc-assessing-the-finite-sample-performance-of-a-statistical-approach"><span class="toc-section-number">1.1.4</span> Assessing the finite-sample performance of a statistical approach</a></li>
<li><a href="1.1-some-of-simulations-many-uses.html#conducting-power-analyses" id="toc-conducting-power-analyses"><span class="toc-section-number">1.1.5</span> Conducting Power Analyses</a></li>
<li><a href="1.1-some-of-simulations-many-uses.html#simulating-processess" id="toc-simulating-processess"><span class="toc-section-number">1.1.6</span> Simulating processess</a></li>
</ul></li>
<li><a href="1.2-the-perils-of-simulation-as-evidence.html#the-perils-of-simulation-as-evidence" id="toc-the-perils-of-simulation-as-evidence"><span class="toc-section-number">1.2</span> The perils of simulation as evidence</a></li>
<li><a href="1.3-simulating-to-learn.html#simulating-to-learn" id="toc-simulating-to-learn"><span class="toc-section-number">1.3</span> Simulating to learn</a></li>
<li><a href="1.4-why-r.html#why-r" id="toc-why-r"><span class="toc-section-number">1.4</span> Why R?</a></li>
<li><a href="1.5-organization-of-the-text.html#organization-of-the-text" id="toc-organization-of-the-text"><span class="toc-section-number">1.5</span> Organization of the text</a></li>
</ul></li>
<li class="has-sub"><a href="2-programming-preliminaries.html#programming-preliminaries" id="toc-programming-preliminaries"><span class="toc-section-number">2</span> Programming Preliminaries</a>
<ul>
<li><a href="2.1-welcome-to-the-tidyverse.html#welcome-to-the-tidyverse" id="toc-welcome-to-the-tidyverse"><span class="toc-section-number">2.1</span> Welcome to the tidyverse</a></li>
<li class="has-sub"><a href="2.2-functions.html#functions" id="toc-functions"><span class="toc-section-number">2.2</span> Functions</a>
<ul>
<li><a href="2.2-functions.html#rolling-your-own" id="toc-rolling-your-own"><span class="toc-section-number">2.2.1</span> Rolling your own</a></li>
<li><a href="2.2-functions.html#a-dangerous-function" id="toc-a-dangerous-function"><span class="toc-section-number">2.2.2</span> A dangerous function</a></li>
<li><a href="2.2-functions.html#using-named-arguments" id="toc-using-named-arguments"><span class="toc-section-number">2.2.3</span> Using Named Arguments</a></li>
<li><a href="2.2-functions.html#argument-defaults" id="toc-argument-defaults"><span class="toc-section-number">2.2.4</span> Argument Defaults</a></li>
<li><a href="2.2-functions.html#function-skeletons" id="toc-function-skeletons"><span class="toc-section-number">2.2.5</span> Function skeletons</a></li>
</ul></li>
<li><a href="2.3-pipe-dreams.html#pipe-dreams" id="toc-pipe-dreams"><span class="toc-section-number">2.3</span> <code>\&gt;</code> (Pipe) dreams</a></li>
<li><a href="2.4-recipes-versus-patterns.html#recipes-versus-patterns" id="toc-recipes-versus-patterns"><span class="toc-section-number">2.4</span> Recipes versus Patterns</a></li>
<li><a href="2.5-exercises.html#exercises" id="toc-exercises"><span class="toc-section-number">2.5</span> Exercises</a></li>
</ul></li>
<li class="has-sub"><a href="3-t-test-simulation.html#t-test-simulation" id="toc-t-test-simulation"><span class="toc-section-number">3</span> An initial simulation</a>
<ul>
<li><a href="3.1-simulating-a-single-scenario.html#simulating-a-single-scenario" id="toc-simulating-a-single-scenario"><span class="toc-section-number">3.1</span> Simulating a single scenario</a></li>
<li><a href="3.2-a-non-normal-population-distribution.html#a-non-normal-population-distribution" id="toc-a-non-normal-population-distribution"><span class="toc-section-number">3.2</span> A non-normal population distribution</a></li>
<li><a href="3.3-simulating-across-different-scenarios.html#simulating-across-different-scenarios" id="toc-simulating-across-different-scenarios"><span class="toc-section-number">3.3</span> Simulating across different scenarios</a></li>
<li><a href="3.4-extending-the-simulation-design.html#extending-the-simulation-design" id="toc-extending-the-simulation-design"><span class="toc-section-number">3.4</span> Extending the simulation design</a></li>
<li><a href="3.5-exercises-1.html#exercises-1" id="toc-exercises-1"><span class="toc-section-number">3.5</span> Exercises</a></li>
</ul></li>
<li class="part"><span><b>II Structure and Mechanics of a Simulation Study</b></span></li>
<li class="has-sub"><a href="4-simulation-structure.html#simulation-structure" id="toc-simulation-structure"><span class="toc-section-number">4</span> Structure of a simulation study</a>
<ul>
<li><a href="4.1-general-structure-of-a-simulation.html#general-structure-of-a-simulation" id="toc-general-structure-of-a-simulation"><span class="toc-section-number">4.1</span> General structure of a simulation</a></li>
<li><a href="4.2-tidy-modular-simulations.html#tidy-modular-simulations" id="toc-tidy-modular-simulations"><span class="toc-section-number">4.2</span> Tidy, modular simulations</a></li>
<li class="has-sub"><a href="4.3-skeleton-of-a-simulation-study.html#skeleton-of-a-simulation-study" id="toc-skeleton-of-a-simulation-study"><span class="toc-section-number">4.3</span> Skeleton of a simulation study</a>
<ul>
<li><a href="4.3-skeleton-of-a-simulation-study.html#data-generating-process" id="toc-data-generating-process"><span class="toc-section-number">4.3.1</span> Data-Generating Process</a></li>
<li><a href="4.3-skeleton-of-a-simulation-study.html#data-analysis-procedure" id="toc-data-analysis-procedure"><span class="toc-section-number">4.3.2</span> Data Analysis Procedure</a></li>
<li><a href="4.3-skeleton-of-a-simulation-study.html#repetition" id="toc-repetition"><span class="toc-section-number">4.3.3</span> Repetition</a></li>
<li><a href="4.3-skeleton-of-a-simulation-study.html#performance-summaries" id="toc-performance-summaries"><span class="toc-section-number">4.3.4</span> Performance summaries</a></li>
<li><a href="4.3-skeleton-of-a-simulation-study.html#multifactor-simulations" id="toc-multifactor-simulations"><span class="toc-section-number">4.3.5</span> Multifactor simulations</a></li>
</ul></li>
<li><a href="4.4-exercises-2.html#exercises-2" id="toc-exercises-2"><span class="toc-section-number">4.4</span> Exercises</a></li>
</ul></li>
<li class="has-sub"><a href="5-case-ANOVA.html#case-ANOVA" id="toc-case-ANOVA"><span class="toc-section-number">5</span> Case Study: Heteroskedastic ANOVA</a>
<ul>
<li class="has-sub"><a href="5.1-case-anova-DGP.html#case-anova-DGP" id="toc-case-anova-DGP"><span class="toc-section-number">5.1</span> The data-generating model</a>
<ul>
<li><a href="5.1-case-anova-DGP.html#now-make-a-function" id="toc-now-make-a-function"><span class="toc-section-number">5.1.1</span> Now make a function</a></li>
<li><a href="5.1-case-anova-DGP.html#cautious-coding" id="toc-cautious-coding"><span class="toc-section-number">5.1.2</span> Cautious coding</a></li>
</ul></li>
<li><a href="5.2-the-hypothesis-testing-procedures.html#the-hypothesis-testing-procedures" id="toc-the-hypothesis-testing-procedures"><span class="toc-section-number">5.2</span> The hypothesis testing procedures</a></li>
<li><a href="5.3-running-the-simulation.html#running-the-simulation" id="toc-running-the-simulation"><span class="toc-section-number">5.3</span> Running the simulation</a></li>
<li><a href="5.4-summarizing-test-performance.html#summarizing-test-performance" id="toc-summarizing-test-performance"><span class="toc-section-number">5.4</span> Summarizing test performance</a></li>
<li><a href="5.5-exAnovaExercises.html#exAnovaExercises" id="toc-exAnovaExercises"><span class="toc-section-number">5.5</span> Exercises</a></li>
</ul></li>
<li class="has-sub"><a href="6-data-generating-processes.html#data-generating-processes" id="toc-data-generating-processes"><span class="toc-section-number">6</span> Data-generating processes</a>
<ul>
<li class="has-sub"><a href="6.1-DGP-examples.html#DGP-examples" id="toc-DGP-examples"><span class="toc-section-number">6.1</span> Examples</a>
<ul>
<li><a href="6.1-DGP-examples.html#ANOVA-example" id="toc-ANOVA-example"><span class="toc-section-number">6.1.1</span> Example 1: One-way analysis of variance</a></li>
<li><a href="6.1-DGP-examples.html#BVPois-example" id="toc-BVPois-example"><span class="toc-section-number">6.1.2</span> Example 2: Bivariate Poisson model</a></li>
<li><a href="6.1-DGP-examples.html#CRT-example" id="toc-CRT-example"><span class="toc-section-number">6.1.3</span> Example 3: Hierarchical linear model for a cluster-randomized trial</a></li>
</ul></li>
<li><a href="6.2-components-of-a-dgp.html#components-of-a-dgp" id="toc-components-of-a-dgp"><span class="toc-section-number">6.2</span> Components of a DGP</a></li>
<li><a href="6.3-DGP-functions.html#DGP-functions" id="toc-DGP-functions"><span class="toc-section-number">6.3</span> A statistical model is a recipe for data generation</a></li>
<li><a href="6.4-DGP-plotting.html#DGP-plotting" id="toc-DGP-plotting"><span class="toc-section-number">6.4</span> Plot the artificial data</a></li>
<li><a href="6.5-check-the-data-generating-function.html#check-the-data-generating-function" id="toc-check-the-data-generating-function"><span class="toc-section-number">6.5</span> Check the data-generating function</a></li>
<li class="has-sub"><a href="6.6-case-cluster.html#case-cluster" id="toc-case-cluster"><span class="toc-section-number">6.6</span> Example: Simulating clustered data</a>
<ul>
<li><a href="6.6-case-cluster.html#a-design-decision-what-do-we-want-to-manipulate" id="toc-a-design-decision-what-do-we-want-to-manipulate"><span class="toc-section-number">6.6.1</span> A design decision: What do we want to manipulate?</a></li>
<li><a href="6.6-case-cluster.html#a-model-for-a-cluster-rct" id="toc-a-model-for-a-cluster-rct"><span class="toc-section-number">6.6.2</span> A model for a cluster RCT</a></li>
<li><a href="6.6-case-cluster.html#from-equations-to-code" id="toc-from-equations-to-code"><span class="toc-section-number">6.6.3</span> From equations to code</a></li>
<li><a href="6.6-case-cluster.html#standardization-in-the-dgp" id="toc-standardization-in-the-dgp"><span class="toc-section-number">6.6.4</span> Standardization in the DGP</a></li>
</ul></li>
<li><a href="6.7-three-parameter-IRT.html#three-parameter-IRT" id="toc-three-parameter-IRT"><span class="toc-section-number">6.7</span> Sometimes a DGP is all you need</a></li>
<li><a href="6.8-more-to-explore.html#more-to-explore" id="toc-more-to-explore"><span class="toc-section-number">6.8</span> More to explore</a></li>
<li class="has-sub"><a href="6.9-exercises-3.html#exercises-3" id="toc-exercises-3"><span class="toc-section-number">6.9</span> Exercises</a>
<ul>
<li><a href="6.9-exercises-3.html#Welch-t-dgp" id="toc-Welch-t-dgp"><span class="toc-section-number">6.9.1</span> The Welch test on a shifted-and-scaled <span class="math inline">\(t\)</span> distribution</a></li>
<li><a href="6.9-exercises-3.html#plot-the-bivariate-poisson" id="toc-plot-the-bivariate-poisson"><span class="toc-section-number">6.9.2</span> Plot the bivariate Poisson</a></li>
<li><a href="6.9-exercises-3.html#BVP-check" id="toc-BVP-check"><span class="toc-section-number">6.9.3</span> Check the bivariate Poisson function</a></li>
<li><a href="6.9-exercises-3.html#BVP-error" id="toc-BVP-error"><span class="toc-section-number">6.9.4</span> Add error-catching to the bivariate Poisson function</a></li>
<li><a href="6.9-exercises-3.html#BVNB1" id="toc-BVNB1"><span class="toc-section-number">6.9.5</span> A bivariate negative binomial distribution</a></li>
<li><a href="6.9-exercises-3.html#BVNB2" id="toc-BVNB2"><span class="toc-section-number">6.9.6</span> Another bivariate negative binomial distribution</a></li>
<li><a href="6.9-exercises-3.html#cluster-RCT-plot" id="toc-cluster-RCT-plot"><span class="toc-section-number">6.9.7</span> Plot the data from a cluster-randomized trial</a></li>
<li><a href="6.9-exercises-3.html#cluster-RCT-checks" id="toc-cluster-RCT-checks"><span class="toc-section-number">6.9.8</span> Checking the Cluster RCT DGP</a></li>
<li><a href="6.9-exercises-3.html#cluster-RCT-heterogeneity" id="toc-cluster-RCT-heterogeneity"><span class="toc-section-number">6.9.9</span> More school-level variation</a></li>
<li><a href="6.9-exercises-3.html#cluster-RCT-baseline" id="toc-cluster-RCT-baseline"><span class="toc-section-number">6.9.10</span> Cluster-randomized trial with baseline predictors</a></li>
<li><a href="6.9-exercises-3.html#IRT-DGP-parameters" id="toc-IRT-DGP-parameters"><span class="toc-section-number">6.9.11</span> 3-parameter IRT datasets</a></li>
<li><a href="6.9-exercises-3.html#IRT-DGP-checking" id="toc-IRT-DGP-checking"><span class="toc-section-number">6.9.12</span> Check the 3-parameter IRT DGP</a></li>
<li><a href="6.9-exercises-3.html#IRT-DGP-breaking" id="toc-IRT-DGP-breaking"><span class="toc-section-number">6.9.13</span> Explore the 3-parameter IRT model</a></li>
<li><a href="6.9-exercises-3.html#meta-regression-DGP" id="toc-meta-regression-DGP"><span class="toc-section-number">6.9.14</span> Random effects meta-regression</a></li>
<li><a href="6.9-exercises-3.html#Vevea-Hedges-DGP" id="toc-Vevea-Hedges-DGP"><span class="toc-section-number">6.9.15</span> Meta-regression with selective reporting</a></li>
</ul></li>
</ul></li>
<li class="has-sub"><a href="7-data-analysis-procedures.html#data-analysis-procedures" id="toc-data-analysis-procedures"><span class="toc-section-number">7</span> Data analysis procedures</a>
<ul>
<li><a href="7.1-estimation-functions.html#estimation-functions" id="toc-estimation-functions"><span class="toc-section-number">7.1</span> Writing estimation functions</a></li>
<li><a href="7.2-multiple-estimation-procedures.html#multiple-estimation-procedures" id="toc-multiple-estimation-procedures"><span class="toc-section-number">7.2</span> Including Multiple Data Analysis Procedures</a></li>
<li class="has-sub"><a href="7.3-validating-an-estimation-function.html#validating-an-estimation-function" id="toc-validating-an-estimation-function"><span class="toc-section-number">7.3</span> Validating an Estimation Function</a>
<ul>
<li><a href="7.3-validating-an-estimation-function.html#checking-against-existing-implementations" id="toc-checking-against-existing-implementations"><span class="toc-section-number">7.3.1</span> Checking against existing implementations</a></li>
<li><a href="7.3-validating-an-estimation-function.html#checking-novel-procedures" id="toc-checking-novel-procedures"><span class="toc-section-number">7.3.2</span> Checking novel procedures</a></li>
<li><a href="7.3-validating-an-estimation-function.html#checking-with-simulations" id="toc-checking-with-simulations"><span class="toc-section-number">7.3.3</span> Checking with simulations</a></li>
</ul></li>
<li class="has-sub"><a href="7.4-handling-errors-warnings-and-other-hiccups.html#handling-errors-warnings-and-other-hiccups" id="toc-handling-errors-warnings-and-other-hiccups"><span class="toc-section-number">7.4</span> Handling errors, warnings, and other hiccups</a>
<ul>
<li><a href="7.4-handling-errors-warnings-and-other-hiccups.html#capturing-errors-and-warnings" id="toc-capturing-errors-and-warnings"><span class="toc-section-number">7.4.1</span> Capturing errors and warnings</a></li>
<li><a href="7.4-handling-errors-warnings-and-other-hiccups.html#adapting-for-errors" id="toc-adapting-for-errors"><span class="toc-section-number">7.4.2</span> Adapting estimation procedures for errors and warnings</a></li>
</ul></li>
<li class="has-sub"><a href="7.5-exercises-4.html#exercises-4" id="toc-exercises-4"><span class="toc-section-number">7.5</span> Exercises</a>
<ul>
<li><a href="7.5-exercises-4.html#BFFs-forever" id="toc-BFFs-forever"><span class="toc-section-number">7.5.1</span> More Heteroskedastic ANOVA</a></li>
<li><a href="7.5-exercises-4.html#contingent-testing" id="toc-contingent-testing"><span class="toc-section-number">7.5.2</span> Contingent testing</a></li>
<li><a href="7.5-exercises-4.html#cross-check-CRT-estimators" id="toc-cross-check-CRT-estimators"><span class="toc-section-number">7.5.3</span> Check the cluster-RCT functions</a></li>
<li><a href="7.5-exercises-4.html#CRT-ANCOVA-estimators" id="toc-CRT-ANCOVA-estimators"><span class="toc-section-number">7.5.4</span> Extending the cluster-RCT functions</a></li>
<li><a href="7.5-exercises-4.html#contingent-estimator-processing" id="toc-contingent-estimator-processing"><span class="toc-section-number">7.5.5</span> Contingent estimator processing</a></li>
<li><a href="7.5-exercises-4.html#IRT-3PL-estimation" id="toc-IRT-3PL-estimation"><span class="toc-section-number">7.5.6</span> Estimating 3-parameter item response theory models</a></li>
<li><a href="7.5-exercises-4.html#Vevea-Hedges-estimation" id="toc-Vevea-Hedges-estimation"><span class="toc-section-number">7.5.7</span> Meta-regression with selective reporting</a></li>
</ul></li>
</ul></li>
<li class="has-sub"><a href="8-running-the-simulation-process.html#running-the-simulation-process" id="toc-running-the-simulation-process"><span class="toc-section-number">8</span> Running the Simulation Process</a>
<ul>
<li><a href="8.1-writing-simulations-quick-with-the-simhelpers-package.html#writing-simulations-quick-with-the-simhelpers-package" id="toc-writing-simulations-quick-with-the-simhelpers-package"><span class="toc-section-number">8.1</span> Writing simulations quick with the simhelpers package</a></li>
<li><a href="8.2-adding-checks-and-balances.html#adding-checks-and-balances" id="toc-adding-checks-and-balances"><span class="toc-section-number">8.2</span> Adding Checks and Balances</a></li>
<li><a href="8.3-exercises-5.html#exercises-5" id="toc-exercises-5"><span class="toc-section-number">8.3</span> Exercises</a></li>
</ul></li>
<li class="has-sub"><a href="9-performance-criteria.html#performance-criteria" id="toc-performance-criteria"><span class="toc-section-number">9</span> Performance criteria</a>
<ul>
<li><a href="9.1-different-kinds-of-performance.html#different-kinds-of-performance" id="toc-different-kinds-of-performance"><span class="toc-section-number">9.1</span> Different kinds of performance</a></li>
<li class="has-sub"><a href="9.2-assessing-a-point-estimator.html#assessing-a-point-estimator" id="toc-assessing-a-point-estimator"><span class="toc-section-number">9.2</span> Assessing a Point Estimator</a>
<ul>
<li><a href="9.2-assessing-a-point-estimator.html#comparing-the-performances-of-the-cluster-rct-estimation-procedures" id="toc-comparing-the-performances-of-the-cluster-rct-estimation-procedures"><span class="toc-section-number">9.2.1</span> Comparing the Performances of the Cluster RCT Estimation Procedures</a></li>
<li><a href="9.2-assessing-a-point-estimator.html#estimands-not-represented-by-a-parameter" id="toc-estimands-not-represented-by-a-parameter"><span class="toc-section-number">9.2.2</span> Estimands Not Represented By a Parameter</a></li>
</ul></li>
<li class="has-sub"><a href="9.3-assessing-a-standard-error-estimator.html#assessing-a-standard-error-estimator" id="toc-assessing-a-standard-error-estimator"><span class="toc-section-number">9.3</span> Assessing a Standard Error Estimator</a>
<ul>
<li><a href="9.3-assessing-a-standard-error-estimator.html#why-not-assess-the-estimated-se-directly" id="toc-why-not-assess-the-estimated-se-directly"><span class="toc-section-number">9.3.1</span> Why Not Assess the Estimated SE directly?</a></li>
<li><a href="9.3-assessing-a-standard-error-estimator.html#assessing-ses-for-our-cluster-rct-simulation" id="toc-assessing-ses-for-our-cluster-rct-simulation"><span class="toc-section-number">9.3.2</span> Assessing SEs for Our Cluster RCT Simulation</a></li>
</ul></li>
<li class="has-sub"><a href="9.4-assessing-an-inferential-procedure-hypothesis-testing.html#assessing-an-inferential-procedure-hypothesis-testing" id="toc-assessing-an-inferential-procedure-hypothesis-testing"><span class="toc-section-number">9.4</span> Assessing an Inferential Procedure (Hypothesis Testing)</a>
<ul>
<li><a href="9.4-assessing-an-inferential-procedure-hypothesis-testing.html#validity" id="toc-validity"><span class="toc-section-number">9.4.1</span> Validity</a></li>
<li><a href="9.4-assessing-an-inferential-procedure-hypothesis-testing.html#power" id="toc-power"><span class="toc-section-number">9.4.2</span> Power</a></li>
<li><a href="9.4-assessing-an-inferential-procedure-hypothesis-testing.html#the-rejection-rate" id="toc-the-rejection-rate"><span class="toc-section-number">9.4.3</span> The Rejection Rate</a></li>
<li><a href="9.4-assessing-an-inferential-procedure-hypothesis-testing.html#inference-in-our-cluster-rct-simulation" id="toc-inference-in-our-cluster-rct-simulation"><span class="toc-section-number">9.4.4</span> Inference in our Cluster RCT Simulation</a></li>
</ul></li>
<li class="has-sub"><a href="9.5-assessing-confidence-intervals.html#assessing-confidence-intervals" id="toc-assessing-confidence-intervals"><span class="toc-section-number">9.5</span> Assessing Confidence Intervals</a>
<ul>
<li><a href="9.5-assessing-confidence-intervals.html#confidence-intervals-in-our-cluster-rct-example" id="toc-confidence-intervals-in-our-cluster-rct-example"><span class="toc-section-number">9.5.1</span> Confidence Intervals in our Cluster RCT Example</a></li>
</ul></li>
<li class="has-sub"><a href="9.6-additional-thoughts-on-measuring-performance.html#additional-thoughts-on-measuring-performance" id="toc-additional-thoughts-on-measuring-performance"><span class="toc-section-number">9.6</span> Additional Thoughts on Measuring Performance</a>
<ul>
<li><a href="9.6-additional-thoughts-on-measuring-performance.html#sec-relative-performance" id="toc-sec-relative-performance"><span class="toc-section-number">9.6.1</span> Selecting Relative vs. Absolute Criteria</a></li>
<li><a href="9.6-additional-thoughts-on-measuring-performance.html#robust-measures-of-performance" id="toc-robust-measures-of-performance"><span class="toc-section-number">9.6.2</span> Robust Measures of Performance</a></li>
<li><a href="9.6-additional-thoughts-on-measuring-performance.html#summary-of-peformance-measures" id="toc-summary-of-peformance-measures"><span class="toc-section-number">9.6.3</span> Summary of Peformance Measures</a></li>
</ul></li>
<li class="has-sub"><a href="9.7-uncertainty-in-performance-estimates-the-monte-carlo-standard-error.html#uncertainty-in-performance-estimates-the-monte-carlo-standard-error" id="toc-uncertainty-in-performance-estimates-the-monte-carlo-standard-error"><span class="toc-section-number">9.7</span> Uncertainty in Performance Estimates (the Monte Carlo Standard Error)</a>
<ul>
<li><a href="9.7-uncertainty-in-performance-estimates-the-monte-carlo-standard-error.html#mcse-for-relative-variance-estimators" id="toc-mcse-for-relative-variance-estimators"><span class="toc-section-number">9.7.1</span> MCSE for Relative Variance Estimators</a></li>
<li><a href="9.7-uncertainty-in-performance-estimates-the-monte-carlo-standard-error.html#calculating-mcses-with-the-simhelpers-package" id="toc-calculating-mcses-with-the-simhelpers-package"><span class="toc-section-number">9.7.2</span> Calculating MCSEs With the <code>simhelpers</code> Package</a></li>
<li><a href="9.7-uncertainty-in-performance-estimates-the-monte-carlo-standard-error.html#mcse-calculation-in-our-cluster-rct-example" id="toc-mcse-calculation-in-our-cluster-rct-example"><span class="toc-section-number">9.7.3</span> MCSE Calculation in our Cluster RCT Example</a></li>
</ul></li>
<li><a href="9.8-exercises-6.html#exercises-6" id="toc-exercises-6"><span class="toc-section-number">9.8</span> Exercises</a></li>
</ul></li>
<li class="has-sub"><a href="10-case_Cronbach.html#case_Cronbach" id="toc-case_Cronbach"><span class="toc-section-number">10</span> Project: Cronbach Alpha</a>
<ul>
<li><a href="10.1-background.html#background" id="toc-background"><span class="toc-section-number">10.1</span> Background</a></li>
<li><a href="10.2-getting-started.html#getting-started" id="toc-getting-started"><span class="toc-section-number">10.2</span> Getting started</a></li>
<li><a href="10.3-the-data-generating-function.html#the-data-generating-function" id="toc-the-data-generating-function"><span class="toc-section-number">10.3</span> The data-generating function</a></li>
<li class="has-sub"><a href="10.4-the-estimation-function.html#the-estimation-function" id="toc-the-estimation-function"><span class="toc-section-number">10.4</span> The estimation function</a>
<ul>
<li><a href="10.4-the-estimation-function.html#exercises-naive-confidence-intervals" id="toc-exercises-naive-confidence-intervals"><span class="toc-section-number">10.4.1</span> Exercises (Naive confidence intervals)</a></li>
</ul></li>
<li class="has-sub"><a href="10.5-estimator-performance.html#estimator-performance" id="toc-estimator-performance"><span class="toc-section-number">10.5</span> Estimator performance</a>
<ul>
<li><a href="10.5-estimator-performance.html#exercises-calculating-performance" id="toc-exercises-calculating-performance"><span class="toc-section-number">10.5.1</span> Exercises (Calculating Performance)</a></li>
</ul></li>
<li><a href="10.6-replication-and-the-simulation.html#replication-and-the-simulation" id="toc-replication-and-the-simulation"><span class="toc-section-number">10.6</span> Replication (and the simulation)</a></li>
<li><a href="10.7-extension-confidence-interval-coverage.html#extension-confidence-interval-coverage" id="toc-extension-confidence-interval-coverage"><span class="toc-section-number">10.7</span> Extension: Confidence interval coverage</a></li>
<li class="has-sub"><a href="10.8-a-taste-of-multiple-scenarios.html#a-taste-of-multiple-scenarios" id="toc-a-taste-of-multiple-scenarios"><span class="toc-section-number">10.8</span> A taste of multiple scenarios</a>
<ul>
<li><a href="10.8-a-taste-of-multiple-scenarios.html#exercises-7" id="toc-exercises-7"><span class="toc-section-number">10.8.1</span> Exercises</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III Multifactor Simulations</b></span></li>
<li class="has-sub"><a href="11-exp-design.html#exp-design" id="toc-exp-design"><span class="toc-section-number">11</span> Designing the multifactor simulation experiment</a>
<ul>
<li class="has-sub"><a href="11.1-choosing-parameter-combinations.html#choosing-parameter-combinations" id="toc-choosing-parameter-combinations"><span class="toc-section-number">11.1</span> Choosing parameter combinations</a>
<ul>
<li><a href="11.1-choosing-parameter-combinations.html#choosing-parameters-for-the-clustered-rct" id="toc-choosing-parameters-for-the-clustered-rct"><span class="toc-section-number">11.1.1</span> Choosing parameters for the Clustered RCT</a></li>
</ul></li>
<li><a href="11.2-using-pmap-to-run-multifactor-simulations.html#using-pmap-to-run-multifactor-simulations" id="toc-using-pmap-to-run-multifactor-simulations"><span class="toc-section-number">11.2</span> Using pmap to run multifactor simulations</a></li>
<li class="has-sub"><a href="11.3-when-to-aggregate-results-across-multiple-simulations.html#when-to-aggregate-results-across-multiple-simulations" id="toc-when-to-aggregate-results-across-multiple-simulations"><span class="toc-section-number">11.3</span> When to aggregate results across multiple simulations</a>
<ul>
<li><a href="11.3-when-to-aggregate-results-across-multiple-simulations.html#aggregate-as-you-simulate-inside" id="toc-aggregate-as-you-simulate-inside"><span class="toc-section-number">11.3.1</span> Aggregate as you simulate (inside)</a></li>
<li><a href="11.3-when-to-aggregate-results-across-multiple-simulations.html#keep-all-simulation-runs-outside" id="toc-keep-all-simulation-runs-outside"><span class="toc-section-number">11.3.2</span> Keep all simulation runs (outside)</a></li>
<li><a href="11.3-when-to-aggregate-results-across-multiple-simulations.html#getting-raw-results-ready-for-analysis" id="toc-getting-raw-results-ready-for-analysis"><span class="toc-section-number">11.3.3</span> Getting raw results ready for analysis</a></li>
</ul></li>
<li class="has-sub"><a href="11.4-running-the-cluster-rct-multifactor-experiment.html#running-the-cluster-rct-multifactor-experiment" id="toc-running-the-cluster-rct-multifactor-experiment"><span class="toc-section-number">11.4</span> Running the Cluster RCT multifactor experiment</a>
<ul>
<li><a href="11.4-running-the-cluster-rct-multifactor-experiment.html#making-analyze_data-quiet" id="toc-making-analyze_data-quiet"><span class="toc-section-number">11.4.1</span> Making analyze_data() quiet</a></li>
</ul></li>
</ul></li>
<li class="has-sub"><a href="12-analyzing-the-multifactor-experiment.html#analyzing-the-multifactor-experiment" id="toc-analyzing-the-multifactor-experiment"><span class="toc-section-number">12</span> Analyzing the multifactor experiment</a>
<ul>
<li class="has-sub"><a href="12.1-ways-of-analyzing-simulation-results.html#ways-of-analyzing-simulation-results" id="toc-ways-of-analyzing-simulation-results"><span class="toc-section-number">12.1</span> Ways of analyzing simulation results</a>
<ul>
<li><a href="12.1-ways-of-analyzing-simulation-results.html#plot-everything-with-many-small-multiples" id="toc-plot-everything-with-many-small-multiples"><span class="toc-section-number">12.1.1</span> Plot everything with many small multiples</a></li>
<li><a href="12.1-ways-of-analyzing-simulation-results.html#bundling" id="toc-bundling"><span class="toc-section-number">12.1.2</span> Bundling</a></li>
<li><a href="12.1-ways-of-analyzing-simulation-results.html#aggregation" id="toc-aggregation"><span class="toc-section-number">12.1.3</span> Aggregation</a></li>
<li><a href="12.1-ways-of-analyzing-simulation-results.html#regression-summarization" id="toc-regression-summarization"><span class="toc-section-number">12.1.4</span> Regression Summarization</a></li>
<li><a href="12.1-ways-of-analyzing-simulation-results.html#focus-on-a-subset-kick-rest-to-supplement" id="toc-focus-on-a-subset-kick-rest-to-supplement"><span class="toc-section-number">12.1.5</span> Focus on a subset, kick rest to supplement</a></li>
</ul></li>
<li><a href="12.2-analyzing-results-when-some-trials-have-failed.html#analyzing-results-when-some-trials-have-failed" id="toc-analyzing-results-when-some-trials-have-failed"><span class="toc-section-number">12.2</span> Analyzing results when some trials have failed</a></li>
<li class="has-sub"><a href="12.3-case-study-power-for-a-randomized-trial.html#case-study-power-for-a-randomized-trial" id="toc-case-study-power-for-a-randomized-trial"><span class="toc-section-number">12.3</span> Case study: power for a randomized trial</a>
<ul>
<li><a href="12.3-case-study-power-for-a-randomized-trial.html#the-initial-analysis" id="toc-the-initial-analysis"><span class="toc-section-number">12.3.1</span> The initial analysis</a></li>
<li><a href="12.3-case-study-power-for-a-randomized-trial.html#focusing-on-validity" id="toc-focusing-on-validity"><span class="toc-section-number">12.3.2</span> Focusing on validity</a></li>
<li><a href="12.3-case-study-power-for-a-randomized-trial.html#aggregate-to-look-at-main-effects" id="toc-aggregate-to-look-at-main-effects"><span class="toc-section-number">12.3.3</span> Aggregate to look at main effects</a></li>
<li><a href="12.3-case-study-power-for-a-randomized-trial.html#recap" id="toc-recap"><span class="toc-section-number">12.3.4</span> Recap</a></li>
</ul></li>
<li><a href="12.4-exercises-8.html#exercises-8" id="toc-exercises-8"><span class="toc-section-number">12.4</span> Exercises</a></li>
</ul></li>
<li class="has-sub"><a href="13-case-study-comparing-different-estimators.html#case-study-comparing-different-estimators" id="toc-case-study-comparing-different-estimators"><span class="toc-section-number">13</span> Case study: Comparing different estimators</a>
<ul>
<li><a href="13.1-the-data-generating-process.html#the-data-generating-process" id="toc-the-data-generating-process"><span class="toc-section-number">13.1</span> The data generating process</a></li>
<li><a href="13.2-the-data-analysis-methods.html#the-data-analysis-methods" id="toc-the-data-analysis-methods"><span class="toc-section-number">13.2</span> The data analysis methods</a></li>
<li><a href="13.3-the-simulation-itself.html#the-simulation-itself" id="toc-the-simulation-itself"><span class="toc-section-number">13.3</span> The simulation itself</a></li>
<li><a href="13.4-calculating-performance-measures-for-all-our-estimators.html#calculating-performance-measures-for-all-our-estimators" id="toc-calculating-performance-measures-for-all-our-estimators"><span class="toc-section-number">13.4</span> Calculating performance measures for all our estimators</a></li>
<li><a href="13.5-improving-the-visualization-of-the-results.html#improving-the-visualization-of-the-results" id="toc-improving-the-visualization-of-the-results"><span class="toc-section-number">13.5</span> Improving the visualization of the results</a></li>
<li><a href="13.6-extension-the-bias-variance-tradeoff.html#extension-the-bias-variance-tradeoff" id="toc-extension-the-bias-variance-tradeoff"><span class="toc-section-number">13.6</span> Extension: The Bias-variance tradeoff</a></li>
</ul></li>
<li class="has-sub"><a href="14-presentation-of-simulation-results.html#presentation-of-simulation-results" id="toc-presentation-of-simulation-results"><span class="toc-section-number">14</span> Presentation of simulation results</a>
<ul>
<li><a href="14.1-tabulation.html#tabulation" id="toc-tabulation"><span class="toc-section-number">14.1</span> Tabulation</a></li>
<li class="has-sub"><a href="14.2-visualization.html#visualization" id="toc-visualization"><span class="toc-section-number">14.2</span> Visualization</a>
<ul>
<li><a href="14.2-visualization.html#example-1-biserial-correlation-estimation" id="toc-example-1-biserial-correlation-estimation"><span class="toc-section-number">14.2.1</span> Example 1: Biserial correlation estimation</a></li>
<li><a href="14.2-visualization.html#example-2-variance-estimation-and-meta-regression" id="toc-example-2-variance-estimation-and-meta-regression"><span class="toc-section-number">14.2.2</span> Example 2: Variance estimation and Meta-regression</a></li>
<li><a href="14.2-visualization.html#example-heat-maps-of-coverage" id="toc-example-heat-maps-of-coverage"><span class="toc-section-number">14.2.3</span> Example: Heat maps of coverage</a></li>
</ul></li>
<li><a href="14.3-modeling.html#modeling" id="toc-modeling"><span class="toc-section-number">14.3</span> Modeling</a></li>
</ul></li>
<li class="part"><span><b>IV Computational Considerations</b></span></li>
<li class="has-sub"><a href="15-sec-reproducability.html#sec-reproducability" id="toc-sec-reproducability"><span class="toc-section-number">15</span> Ensuring reproducibility</a>
<ul>
<li><a href="15.1-seeds-and-pseudo-random-number-generators.html#seeds-and-pseudo-random-number-generators" id="toc-seeds-and-pseudo-random-number-generators"><span class="toc-section-number">15.1</span> Seeds and pseudo-random number generators</a></li>
<li><a href="15.2-including-seed-in-our-simulation-driver.html#including-seed-in-our-simulation-driver" id="toc-including-seed-in-our-simulation-driver"><span class="toc-section-number">15.2</span> Including seed in our simulation driver</a></li>
<li><a href="15.3-reasons-for-setting-the-seed.html#reasons-for-setting-the-seed" id="toc-reasons-for-setting-the-seed"><span class="toc-section-number">15.3</span> Reasons for setting the seed</a></li>
</ul></li>
<li class="has-sub"><a href="16-optimize-code.html#optimize-code" id="toc-optimize-code"><span class="toc-section-number">16</span> Optimizing code (and why you often shouldn’t)</a>
<ul>
<li><a href="16.1-hand-building-functions.html#hand-building-functions" id="toc-hand-building-functions"><span class="toc-section-number">16.1</span> Hand-building functions</a></li>
<li><a href="16.2-sec_comp_efficiency.html#sec_comp_efficiency" id="toc-sec_comp_efficiency"><span class="toc-section-number">16.2</span> Computational efficiency versus simplicity</a></li>
<li><a href="16.3-reusing-code-to-speed-up-computation.html#reusing-code-to-speed-up-computation" id="toc-reusing-code-to-speed-up-computation"><span class="toc-section-number">16.3</span> Reusing code to speed up computation</a></li>
</ul></li>
<li class="has-sub"><a href="17-error-trapping-and-other-headaches.html#error-trapping-and-other-headaches" id="toc-error-trapping-and-other-headaches"><span class="toc-section-number">17</span> Error trapping and other headaches</a>
<ul>
<li><a href="17-error-trapping-and-other-headaches.html#what-to-do-with-warnings-in-simulations" id="toc-what-to-do-with-warnings-in-simulations"><span class="toc-section-number">17.0.1</span> What to do with warnings in simulations</a></li>
</ul></li>
<li class="has-sub"><a href="18-saving-files.html#saving-files" id="toc-saving-files"><span class="toc-section-number">18</span> Saving files and results</a>
<ul>
<li><a href="18.1-saving-simulations-in-general.html#saving-simulations-in-general" id="toc-saving-simulations-in-general"><span class="toc-section-number">18.1</span> Saving simulations in general</a></li>
<li><a href="18.2-saving-simulations-as-you-go.html#saving-simulations-as-you-go" id="toc-saving-simulations-as-you-go"><span class="toc-section-number">18.2</span> Saving simulations as you go</a></li>
<li><a href="18.3-dynamically-making-directories.html#dynamically-making-directories" id="toc-dynamically-making-directories"><span class="toc-section-number">18.3</span> Dynamically making directories</a></li>
<li><a href="18.4-loading-and-combining-files-of-simulation-results.html#loading-and-combining-files-of-simulation-results" id="toc-loading-and-combining-files-of-simulation-results"><span class="toc-section-number">18.4</span> Loading and combining files of simulation results</a></li>
</ul></li>
<li class="has-sub"><a href="19-parallel-processing.html#parallel-processing" id="toc-parallel-processing"><span class="toc-section-number">19</span> Parallel Processing</a>
<ul>
<li><a href="19.1-parallel-on-your-computer.html#parallel-on-your-computer" id="toc-parallel-on-your-computer"><span class="toc-section-number">19.1</span> Parallel on your computer</a></li>
<li class="has-sub"><a href="19.2-parallel-off-your-computer.html#parallel-off-your-computer" id="toc-parallel-off-your-computer"><span class="toc-section-number">19.2</span> Parallel off your computer</a>
<ul>
<li><a href="19.2-parallel-off-your-computer.html#what-is-a-command-line-interface" id="toc-what-is-a-command-line-interface"><span class="toc-section-number">19.2.1</span> What is a command-line interface?</a></li>
<li><a href="19.2-parallel-off-your-computer.html#running-a-job-on-a-cluster" id="toc-running-a-job-on-a-cluster"><span class="toc-section-number">19.2.2</span> Running a job on a cluster</a></li>
<li><a href="19.2-parallel-off-your-computer.html#checking-on-a-job" id="toc-checking-on-a-job"><span class="toc-section-number">19.2.3</span> Checking on a job</a></li>
<li><a href="19.2-parallel-off-your-computer.html#running-lots-of-jobs-on-a-cluster" id="toc-running-lots-of-jobs-on-a-cluster"><span class="toc-section-number">19.2.4</span> Running lots of jobs on a cluster</a></li>
<li><a href="19.2-parallel-off-your-computer.html#resources-for-harvards-odyssey" id="toc-resources-for-harvards-odyssey"><span class="toc-section-number">19.2.5</span> Resources for Harvard’s Odyssey</a></li>
<li><a href="19.2-parallel-off-your-computer.html#acknowledgements-1" id="toc-acknowledgements-1"><span class="toc-section-number">19.2.6</span> Acknowledgements</a></li>
</ul></li>
</ul></li>
<li class="has-sub"><a href="20-simulations-as-evidence.html#simulations-as-evidence" id="toc-simulations-as-evidence"><span class="toc-section-number">20</span> Simulations as evidence</a>
<ul>
<li class="has-sub"><a href="20.1-strategies-for-making-relevant-simulations.html#strategies-for-making-relevant-simulations" id="toc-strategies-for-making-relevant-simulations"><span class="toc-section-number">20.1</span> Strategies for making relevant simulations</a>
<ul>
<li><a href="20.1-strategies-for-making-relevant-simulations.html#make-your-simulation-general-with-an-extensive-multi-factor-experiment" id="toc-make-your-simulation-general-with-an-extensive-multi-factor-experiment"><span class="toc-section-number">20.1.1</span> Make your simulation general with an extensive multi-factor experiment</a></li>
<li><a href="20.1-strategies-for-making-relevant-simulations.html#use-previously-published-simulations-to-beat-them-at-their-own-game" id="toc-use-previously-published-simulations-to-beat-them-at-their-own-game"><span class="toc-section-number">20.1.2</span> Use previously published simulations to beat them at their own game</a></li>
<li><a href="20.1-strategies-for-making-relevant-simulations.html#calibrate-simulation-factors-to-real-data" id="toc-calibrate-simulation-factors-to-real-data"><span class="toc-section-number">20.1.3</span> Calibrate simulation factors to real data</a></li>
<li><a href="20.1-strategies-for-making-relevant-simulations.html#use-real-data-to-obtain-directly" id="toc-use-real-data-to-obtain-directly"><span class="toc-section-number">20.1.4</span> Use real data to obtain directly</a></li>
<li><a href="20.1-strategies-for-making-relevant-simulations.html#fully-calibrated-simulations" id="toc-fully-calibrated-simulations"><span class="toc-section-number">20.1.5</span> Fully calibrated simulations</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>V Complex Data Structures</b></span></li>
<li class="has-sub"><a href="21-using-simulation-as-a-power-calculator.html#using-simulation-as-a-power-calculator" id="toc-using-simulation-as-a-power-calculator"><span class="toc-section-number">21</span> Using simulation as a power calculator</a>
<ul>
<li><a href="21.1-getting-design-parameters-from-pilot-data.html#getting-design-parameters-from-pilot-data" id="toc-getting-design-parameters-from-pilot-data"><span class="toc-section-number">21.1</span> Getting design parameters from pilot data</a></li>
<li><a href="21.2-the-data-generating-process-1.html#the-data-generating-process-1" id="toc-the-data-generating-process-1"><span class="toc-section-number">21.2</span> The data generating process</a></li>
<li><a href="21.3-running-the-simulation-1.html#running-the-simulation-1" id="toc-running-the-simulation-1"><span class="toc-section-number">21.3</span> Running the simulation</a></li>
<li class="has-sub"><a href="21.4-evaluating-power.html#evaluating-power" id="toc-evaluating-power"><span class="toc-section-number">21.4</span> Evaluating power</a>
<ul>
<li><a href="21.4-evaluating-power.html#checking-validity-of-our-models" id="toc-checking-validity-of-our-models"><span class="toc-section-number">21.4.1</span> Checking validity of our models</a></li>
<li><a href="21.4-evaluating-power.html#assessing-precision-se" id="toc-assessing-precision-se"><span class="toc-section-number">21.4.2</span> Assessing Precision (SE)</a></li>
<li><a href="21.4-evaluating-power.html#assessing-power" id="toc-assessing-power"><span class="toc-section-number">21.4.3</span> Assessing power</a></li>
<li><a href="21.4-evaluating-power.html#assessing-minimum-detectable-effects" id="toc-assessing-minimum-detectable-effects"><span class="toc-section-number">21.4.4</span> Assessing Minimum Detectable Effects</a></li>
</ul></li>
</ul></li>
<li class="has-sub"><a href="22-potential-outcomes.html#potential-outcomes" id="toc-potential-outcomes"><span class="toc-section-number">22</span> Simulation under the Potential Outcomes Framework</a>
<ul>
<li><a href="22.1-finite-vs.-superpopulation-inference.html#finite-vs.-superpopulation-inference" id="toc-finite-vs.-superpopulation-inference"><span class="toc-section-number">22.1</span> Finite vs. Superpopulation inference</a></li>
<li><a href="22.2-data-generation-processes-for-potential-outcomes.html#data-generation-processes-for-potential-outcomes" id="toc-data-generation-processes-for-potential-outcomes"><span class="toc-section-number">22.2</span> Data generation processes for potential outcomes</a></li>
<li><a href="22.3-finite-sample-performance-measures.html#finite-sample-performance-measures" id="toc-finite-sample-performance-measures"><span class="toc-section-number">22.3</span> Finite sample performance measures</a></li>
<li><a href="22.4-nested-finite-simulation-procedure.html#nested-finite-simulation-procedure" id="toc-nested-finite-simulation-procedure"><span class="toc-section-number">22.4</span> Nested finite simulation procedure</a></li>
</ul></li>
<li class="has-sub"><a href="23-the-parametric-bootstrap.html#the-parametric-bootstrap" id="toc-the-parametric-bootstrap"><span class="toc-section-number">23</span> The Parametric bootstrap</a>
<ul>
<li><a href="23.1-air-conditioners-a-stolen-case-study.html#air-conditioners-a-stolen-case-study" id="toc-air-conditioners-a-stolen-case-study"><span class="toc-section-number">23.1</span> Air conditioners: a stolen case study</a></li>
</ul></li>
<li class="appendix"><span><b>Appendices</b></span></li>
<li class="has-sub"><a href="A-coding-tidbits.html#coding-tidbits" id="toc-coding-tidbits"><span class="toc-section-number">A</span> Coding tidbits</a>
<ul>
<li class="has-sub"><a href="A.1-repeating-oneself.html#repeating-oneself" id="toc-repeating-oneself"><span class="toc-section-number">A.1</span> How to repeat yourself</a>
<ul>
<li><a href="A.1-repeating-oneself.html#using-replicate" id="toc-using-replicate"><span class="toc-section-number">A.1.1</span> Using <code>replicate()</code></a></li>
<li><a href="A.1-repeating-oneself.html#using-map" id="toc-using-map"><span class="toc-section-number">A.1.2</span> Using <code>map()</code></a></li>
<li><a href="A.1-repeating-oneself.html#map-with-no-inputs" id="toc-map-with-no-inputs"><span class="toc-section-number">A.1.3</span> map with no inputs</a></li>
<li><a href="A.1-repeating-oneself.html#other-approaches-for-repetition" id="toc-other-approaches-for-repetition"><span class="toc-section-number">A.1.4</span> Other approaches for repetition</a></li>
</ul></li>
<li><a href="A.2-default-arguments.html#default-arguments" id="toc-default-arguments"><span class="toc-section-number">A.2</span> Default arguments for functions</a></li>
<li><a href="A.3-about-source-command.html#about-source-command" id="toc-about-source-command"><span class="toc-section-number">A.3</span> The source command and keeping things organized</a></li>
<li><a href="A.4-about-keeping-tests-with-FALSE.html#about-keeping-tests-with-FALSE" id="toc-about-keeping-tests-with-FALSE"><span class="toc-section-number">A.4</span> Testing and debugging code in your scripts</a></li>
<li><a href="A.5-about-browser-debugging.html#about-browser-debugging" id="toc-about-browser-debugging"><span class="toc-section-number">A.5</span> Debugging with browser</a></li>
<li><a href="A.6-about-stopifnot.html#about-stopifnot" id="toc-about-stopifnot"><span class="toc-section-number">A.6</span> Protecting your functions with “stop”</a></li>
</ul></li>
<li><a href="B-further-readings-and-resources.html#further-readings-and-resources" id="toc-further-readings-and-resources"><span class="toc-section-number">B</span> Further readings and resources</a></li>
</ul>
</div>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="skeleton-of-a-simulation-study" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> Skeleton of a simulation study</h2>
<p>The principles of tidy simulation imply that code for a simulation study should usually follow the same broad outline and organization of Table <a href="4.1-general-structure-of-a-simulation.html#tab:simulation">4.1</a>, with custom functions for each step in process.
We will describe the outlines of simulation code using function skeletons to illustrate the inputs and outputs of each component.
These skeletons skip over all the specific details, so that we can see the structure more clearly.
We will first examine the structure of the code for simulating one specific scenario, then consider how to extend the code to systematically explore a variety of scenarios, as in a multifactor simulation.</p>
<p>In code skeletons, the structure of the first four steps in a simulation looks like this:</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="4.3-skeleton-of-a-simulation-study.html#cb83-1" tabindex="-1"></a><span class="co"># Generate (data-generating process)</span></span>
<span id="cb83-2"><a href="4.3-skeleton-of-a-simulation-study.html#cb83-2" tabindex="-1"></a></span>
<span id="cb83-3"><a href="4.3-skeleton-of-a-simulation-study.html#cb83-3" tabindex="-1"></a>generate_data <span class="ot">&lt;-</span> <span class="cf">function</span>( model_params ) {</span>
<span id="cb83-4"><a href="4.3-skeleton-of-a-simulation-study.html#cb83-4" tabindex="-1"></a>  <span class="co"># stuff</span></span>
<span id="cb83-5"><a href="4.3-skeleton-of-a-simulation-study.html#cb83-5" tabindex="-1"></a>  <span class="fu">return</span>(data)</span>
<span id="cb83-6"><a href="4.3-skeleton-of-a-simulation-study.html#cb83-6" tabindex="-1"></a>}</span>
<span id="cb83-7"><a href="4.3-skeleton-of-a-simulation-study.html#cb83-7" tabindex="-1"></a></span>
<span id="cb83-8"><a href="4.3-skeleton-of-a-simulation-study.html#cb83-8" tabindex="-1"></a><span class="co"># Analyze (data-analysis procedure)</span></span>
<span id="cb83-9"><a href="4.3-skeleton-of-a-simulation-study.html#cb83-9" tabindex="-1"></a></span>
<span id="cb83-10"><a href="4.3-skeleton-of-a-simulation-study.html#cb83-10" tabindex="-1"></a>analyze <span class="ot">&lt;-</span> <span class="cf">function</span>( data ) {</span>
<span id="cb83-11"><a href="4.3-skeleton-of-a-simulation-study.html#cb83-11" tabindex="-1"></a>  <span class="co"># stuff</span></span>
<span id="cb83-12"><a href="4.3-skeleton-of-a-simulation-study.html#cb83-12" tabindex="-1"></a>  <span class="fu">return</span>(one_result)</span>
<span id="cb83-13"><a href="4.3-skeleton-of-a-simulation-study.html#cb83-13" tabindex="-1"></a>}</span>
<span id="cb83-14"><a href="4.3-skeleton-of-a-simulation-study.html#cb83-14" tabindex="-1"></a></span>
<span id="cb83-15"><a href="4.3-skeleton-of-a-simulation-study.html#cb83-15" tabindex="-1"></a><span class="co"># Repeat</span></span>
<span id="cb83-16"><a href="4.3-skeleton-of-a-simulation-study.html#cb83-16" tabindex="-1"></a></span>
<span id="cb83-17"><a href="4.3-skeleton-of-a-simulation-study.html#cb83-17" tabindex="-1"></a>one_run <span class="ot">&lt;-</span> <span class="cf">function</span>( model_params ) {</span>
<span id="cb83-18"><a href="4.3-skeleton-of-a-simulation-study.html#cb83-18" tabindex="-1"></a>  dat <span class="ot">&lt;-</span> <span class="fu">generate_data</span>( model_params )</span>
<span id="cb83-19"><a href="4.3-skeleton-of-a-simulation-study.html#cb83-19" tabindex="-1"></a>  one_result <span class="ot">&lt;-</span> <span class="fu">analyze</span>(dat)</span>
<span id="cb83-20"><a href="4.3-skeleton-of-a-simulation-study.html#cb83-20" tabindex="-1"></a>  <span class="fu">return</span>(one_result)</span>
<span id="cb83-21"><a href="4.3-skeleton-of-a-simulation-study.html#cb83-21" tabindex="-1"></a>}</span>
<span id="cb83-22"><a href="4.3-skeleton-of-a-simulation-study.html#cb83-22" tabindex="-1"></a></span>
<span id="cb83-23"><a href="4.3-skeleton-of-a-simulation-study.html#cb83-23" tabindex="-1"></a>results <span class="ot">&lt;-</span> <span class="fu">replicate</span>(R, <span class="fu">one_run</span>( params ))</span>
<span id="cb83-24"><a href="4.3-skeleton-of-a-simulation-study.html#cb83-24" tabindex="-1"></a></span>
<span id="cb83-25"><a href="4.3-skeleton-of-a-simulation-study.html#cb83-25" tabindex="-1"></a><span class="co"># Summarize (calculate performance measures)</span></span>
<span id="cb83-26"><a href="4.3-skeleton-of-a-simulation-study.html#cb83-26" tabindex="-1"></a></span>
<span id="cb83-27"><a href="4.3-skeleton-of-a-simulation-study.html#cb83-27" tabindex="-1"></a>assess_performance <span class="ot">&lt;-</span> <span class="cf">function</span>( results, model_params ) {</span>
<span id="cb83-28"><a href="4.3-skeleton-of-a-simulation-study.html#cb83-28" tabindex="-1"></a>  <span class="co"># stuff</span></span>
<span id="cb83-29"><a href="4.3-skeleton-of-a-simulation-study.html#cb83-29" tabindex="-1"></a>  <span class="fu">return</span>(performance_measures)</span>
<span id="cb83-30"><a href="4.3-skeleton-of-a-simulation-study.html#cb83-30" tabindex="-1"></a>}</span>
<span id="cb83-31"><a href="4.3-skeleton-of-a-simulation-study.html#cb83-31" tabindex="-1"></a></span>
<span id="cb83-32"><a href="4.3-skeleton-of-a-simulation-study.html#cb83-32" tabindex="-1"></a><span class="fu">assess_performance</span>(results, model_params)</span></code></pre></div>
<p>The code above shows the full skeleton of a simulation.
It involves four functions, where the outputs of one function get used as inputs in subsequent functions.
We will now look at the inputs and outputs of each function to see how they align with the four steps in the simulation process.
Subsequent chapters examine each piece in much greater detail—putting meat on the bones of each function skeleton, to torture our metaphor—and discuss specific statistical issues and programming techniques that are useful for designing each component.</p>
<p>Besides illustrating the skeletal framework of a simulation, readers might find it useful to use it as a template from which to start writing their own code.
The <code>simhelpers</code> package includes the function <code>create_skeleton()</code>, which will open a new R script that contains a template for a simulation study, with sections corresponding to each component:</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="4.3-skeleton-of-a-simulation-study.html#cb84-1" tabindex="-1"></a>simhelpers<span class="sc">::</span><span class="fu">create_skeleton</span>()</span></code></pre></div>
<p>The template that appears is a slightly more elaborate version of the code above, with the main difference being that it also includes some additional lines of code to wire the pieces together for a multifactor simulation.
Starting from this template, you will already be on the road to writing a tidy, modular simulation.</p>
<div id="data-generating-process" class="section level3" number="4.3.1">
<h3><span class="header-section-number">4.3.1</span> Data-Generating Process</h3>
<p>The first step in a simulation is specifying a data-generating process. This is a hypothetical model for how data might arise, involving measurements or observations of one or more variables. The bare-bones skeleton of a data-generating function looks like the following:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="4.3-skeleton-of-a-simulation-study.html#cb85-1" tabindex="-1"></a>generate_data <span class="ot">&lt;-</span> <span class="cf">function</span>( model_params ) {</span>
<span id="cb85-2"><a href="4.3-skeleton-of-a-simulation-study.html#cb85-2" tabindex="-1"></a>  <span class="co"># stuff</span></span>
<span id="cb85-3"><a href="4.3-skeleton-of-a-simulation-study.html#cb85-3" tabindex="-1"></a>  <span class="fu">return</span>(data)</span>
<span id="cb85-4"><a href="4.3-skeleton-of-a-simulation-study.html#cb85-4" tabindex="-1"></a>}</span></code></pre></div>
<p>The function takes as input a set of model parameter values, denoted here as <code>model_params</code>.
Based on those model parameters, the function generates a hypothetical dataset as output.
Generating our own data based on a model allows us to know what the answer is (e.g., the true population mean or the true average effect of an intervention), so that we have benchmark against which to compare the results of a data analysis procedure that generates noisy estimates of the true value.</p>
<p>In practice, <code>model_params</code> will usually not be just one input but rather multiple arguments.
These arguments might include inputs such as the population mean for a variable, the standard deviation of a distribution of treatment effects, or a parameter controlling the degree of skewness in the population distribution.
Many data-generating processes involving multiple variables, such as the response variable and predictor variables in a regression model.
In such instances, the inputs of <code>generate_data()</code> might also include parameters that determine the degree of dependence or correlation between variables.
Further, the <code>generate_data()</code> inputs will also usually include arguments relating to the sample size and structure of the hypothetical dataset.
For instance, in a simulation of a multilevel dataset where individuals are nested within clusters, the inputs might include an arguments to specify the total number of clusters and the average number of individuals per cluster.
We discuss the inputs and form of the data-generating function further in Chapter <a href="6-data-generating-processes.html#data-generating-processes">6</a>.</p>
</div>
<div id="data-analysis-procedure" class="section level3" number="4.3.2">
<h3><span class="header-section-number">4.3.2</span> Data Analysis Procedure</h3>
<p>The second step in a simulation is specifying a data analysis procedure or set of procedures.
The bare-bones skeleton of a data-generating function looks like the following:</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="4.3-skeleton-of-a-simulation-study.html#cb86-1" tabindex="-1"></a>analyze <span class="ot">&lt;-</span> <span class="cf">function</span>( data ) {</span>
<span id="cb86-2"><a href="4.3-skeleton-of-a-simulation-study.html#cb86-2" tabindex="-1"></a>  <span class="co"># stuff</span></span>
<span id="cb86-3"><a href="4.3-skeleton-of-a-simulation-study.html#cb86-3" tabindex="-1"></a>  <span class="fu">return</span>(one_result)</span>
<span id="cb86-4"><a href="4.3-skeleton-of-a-simulation-study.html#cb86-4" tabindex="-1"></a>}</span></code></pre></div>
<p>The function should take a single dataset as input and produce a set of estimates or results (e.g., point estimates, standard errors, confidence intervals, p-values, predictions, etc.).
Because we will be using the function to analyze hypothetical datasets simulated from the data-generating process, the <code>analyze()</code> function needs to work with <code>data</code> inputs that are produced by the <code>generate_data()</code> function.
Thus, the code in the body of <code>analyze()</code> can assume that <code>data</code> will include relevant variables with specific names.</p>
<p>Inside the body of the function, <code>analyze()</code> includes code to carry out a data analysis procedure.
This might involve generating a confidence interval, as in the example from Chapter <a href="3-t-test-simulation.html#t-test-simulation">3</a>.
In another context, it might involve estimating an average growth rate along with a standard error, given a dataset with longitudinal repeated measurements from multiple individuals.
In still another context, it might involve generating individual-level predictions from a machine learning algorithm.
In simulations that involve comparing multiple analysis methods, we might write an <code>analyze()</code> function for each of the methods of interest, or (generally less preferred because it is less modular) we might write one function that does the calculations for all of the methods together.</p>
<p>A well-written estimation method should, in principle, work not only on a simulated, hypothetical dataset but also on a real empirical dataset that has the same format (i.e., appropriate variable names and structure).
Because of this, the inputs of the <code>analyze()</code> function should not typically include any information about the parameters of the data-generating process.
To be realistic, the code for our simulated data-analysis procedure should not make use of anything that the analyst could not know when analyzing a real dataset.
Thus, <code>analyze()</code> has an argument for the sample dataset but not for <code>model_params</code>.
We discuss the form and content of the data analysis function further in Chapter <a href="7-data-analysis-procedures.html#data-analysis-procedures">7</a>.</p>
</div>
<div id="repetition" class="section level3" number="4.3.3">
<h3><span class="header-section-number">4.3.3</span> Repetition</h3>
<p>The third step in a simulation is to repeatedly evaluate the data-generating process and data analysis procedure.
In practice, this amounts to repeatedly calling <code>generate_data()</code> and then calling <code>analyze()</code> on the result.
Here is the skeleton from our simulation template:</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="4.3-skeleton-of-a-simulation-study.html#cb87-1" tabindex="-1"></a>one_run <span class="ot">&lt;-</span> <span class="cf">function</span>( model_params ) {</span>
<span id="cb87-2"><a href="4.3-skeleton-of-a-simulation-study.html#cb87-2" tabindex="-1"></a>  dat <span class="ot">&lt;-</span> <span class="fu">generate_data</span>( model_params )</span>
<span id="cb87-3"><a href="4.3-skeleton-of-a-simulation-study.html#cb87-3" tabindex="-1"></a>  one_result <span class="ot">&lt;-</span> <span class="fu">analyze</span>(dat)</span>
<span id="cb87-4"><a href="4.3-skeleton-of-a-simulation-study.html#cb87-4" tabindex="-1"></a>  <span class="fu">return</span>(one_result)</span>
<span id="cb87-5"><a href="4.3-skeleton-of-a-simulation-study.html#cb87-5" tabindex="-1"></a>}</span>
<span id="cb87-6"><a href="4.3-skeleton-of-a-simulation-study.html#cb87-6" tabindex="-1"></a></span>
<span id="cb87-7"><a href="4.3-skeleton-of-a-simulation-study.html#cb87-7" tabindex="-1"></a>results <span class="ot">&lt;-</span> simhelpers<span class="sc">::</span><span class="fu">repeat_and_stack</span>(R, <span class="fu">one_run</span>( params ))</span></code></pre></div>
<p>We first create a helper function called <code>one_run()</code>, which takes <code>model_params</code> as input.
Inside the body of the function, we call the <code>generate_data()</code> function to simulate a hypothetical dataset.
We pass this dataset to <code>analyze()</code> and return a small dataset containing the results of the data-analysis procedure.
The <code>one_run()</code> method is like a coordinator or dispatcher of the system: it generates the data, calls all the evaluation methods we want to call, combines all the results, and hands them back for recording.
Making a helper method such as <code>one_run()</code> can be useful because it facilitates debugging.</p>
<p>Once we have the <code>one_run()</code> helper function, we need a way to call it repeatedly. As with many things in R, there are a variety of different ways to do something over and over.
In the above skeleton, we use the <code>repeat_and_stack()</code> function from <code>simhelpers</code>.<a href="#fn8" class="footnote-ref" id="fnref8"><sup>8</sup></a>
In the first argument, we specify the number of times to repeat the process.
In the second argument, we specify an expression that evaluates <code>one_run()</code> for specified values of the model parameters stored in <code>params</code>.
The <code>repeat_and_stack()</code> function then evaluates the expression repeatedly, <code>R</code> times in all, and then stacks up all of the replications into a big dataset, with one or more rows per replication.<a href="#fn9" class="footnote-ref" id="fnref9"><sup>9</sup></a></p>
<p>We go into further detail about how to approach running the simulation process in Chapter <a href="8-running-the-simulation-process.html#running-the-simulation-process">8</a>.
Among other things, we will illustrate how to use the <code>bundle_sim()</code> function from the <code>simhelpers</code> package to automate the process of coding this step, thereby avoiding the need to write a <code>one_run()</code> helper function.</p>
</div>
<div id="performance-summaries" class="section level3" number="4.3.4">
<h3><span class="header-section-number">4.3.4</span> Performance summaries</h3>
<p>The fourth step in a simulation is to summarize the distribution of simulation results across replications.
Here is the skeleton from our simulation template:</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="4.3-skeleton-of-a-simulation-study.html#cb89-1" tabindex="-1"></a>assess_performance <span class="ot">&lt;-</span> <span class="cf">function</span>( results, model_params ) {</span>
<span id="cb89-2"><a href="4.3-skeleton-of-a-simulation-study.html#cb89-2" tabindex="-1"></a>  <span class="co"># stuff</span></span>
<span id="cb89-3"><a href="4.3-skeleton-of-a-simulation-study.html#cb89-3" tabindex="-1"></a>  <span class="fu">return</span>(performance_measures)</span>
<span id="cb89-4"><a href="4.3-skeleton-of-a-simulation-study.html#cb89-4" tabindex="-1"></a>}</span>
<span id="cb89-5"><a href="4.3-skeleton-of-a-simulation-study.html#cb89-5" tabindex="-1"></a></span>
<span id="cb89-6"><a href="4.3-skeleton-of-a-simulation-study.html#cb89-6" tabindex="-1"></a><span class="fu">assess_performance</span>(results, params)</span></code></pre></div>
<p>The <code>assess_performance()</code> function takes <code>results</code> as input.
<code>results</code> should be a dataset containing all of the replications of the data-generating and analysis process.
In contrast to the <code>analyze()</code> function, <code>assess_performance()</code> also needs to know the true parameter values of the data-generating process, so it needs to have <code>model_params</code> as its other input.
The function then uses both of these inputs to calculate performance measures and returns a summary of the performance measures in a dataset.</p>
<p>Performance measures are the metrics or criteria used to assess the performance of a statistical method across repeated samples from the data-generating process.
For example, we might want to know how close an estimator gets to the target parameter, on average.
We might want to know if a confidence interval captures the true parameter the right proportion of the time, as in the simulation from Chapter <a href="3-t-test-simulation.html#t-test-simulation">3</a>.
Performance is defined in terms of the sampling distribution of estimators or analysis results, across an infinite number of replications of the data-generating process.
In practice, we use many replications of the process, but still only a finite number. Consequently, we actually <em>estimate</em> the performance measures and need to attend to the Monte Carlo error in the estimates.
We discuss the specifics of different performance measures and assessment of Monte Carlo error in Chapter <a href="9-performance-criteria.html#performance-criteria">9</a>.</p>
</div>
<div id="multifactor-simulations" class="section level3" number="4.3.5">
<h3><span class="header-section-number">4.3.5</span> Multifactor simulations</h3>
<p>Thus far, we have sketched out the structure of a modular, tidy simulation for a single context.
In our <span class="math inline">\(t\)</span>-test case study, for example, we might ask how well the <span class="math inline">\(t\)</span>-test works when we have <span class="math inline">\(n=100\)</span> units and the observations follow geometric distribution.
However, we rarely want to examine a method only in a single context.
Typically, we want to explore how well a procedure works across a range of different contexts.
If we choose conditions in a structured and thoughtful manner, we will be able to examine broad trends and potentially make more general claims about the behaviors of the data-analysis procedures under investigation.
Thus, it is helpful to think of simulations as akin to a designed experiment: in seeking to understand the properties of one or more procedures, we test them under a variety of different scenarios to see how they perform, then seek to identify more general patterns that hold beyond the specific scenarios examined.
This is the heart of simulation for methodological evaluation.</p>
<p>To implement a multifactor simulation, we will follows the same principles of modular, tidy simulation.
In particular, we will take the code developed for simulating a single context and bundle it into a function that can be evaluated for any and all scenarios of interest.
Simulation studies often follow a full factorial design, in which each level of a factor (something we vary, such as sample size, true treatment effect, or residual variance) is crossed with every other level.
The experimental design then consists of sets of parameter values (including design parameters, such as sample sizes), and these too can be represented in an object, distinct from the other components of the simulation.
We will discuss multiple-scenario simulations in Part III (starting with Chapter <a href="11-exp-design.html#exp-design">11</a>), after we more fully develop the core concepts and techniques involved in simulating a single context.</p>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="8">
<li id="fn8"><p>In the example from Chapter <a href="3-t-test-simulation.html#t-test-simulation">3</a>, we used the <code>replicate()</code> function from base R to repeat the process of generating and analyzing data.
This function is a fine alternative to the <code>repeat_and_stack()</code> approach demonstrated in the skeleton.
The only drawback is that it requires some further work to combine the results across replications.
Here is a different version of the skeleton, which uses <code>replicate()</code> instead of <code>repeat_and_stack()</code>:</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" tabindex="-1"></a>results_list <span class="ot">&lt;-</span> <span class="fu">replicate</span>(<span class="at">n =</span> R, <span class="at">expr =</span> {</span>
<span id="cb88-2"><a href="#cb88-2" tabindex="-1"></a>  dat <span class="ot">&lt;-</span> <span class="fu">generate_data</span>( params )</span>
<span id="cb88-3"><a href="#cb88-3" tabindex="-1"></a>  one_result <span class="ot">&lt;-</span> <span class="fu">analyze</span>(dat)</span>
<span id="cb88-4"><a href="#cb88-4" tabindex="-1"></a>  <span class="fu">return</span>(one_result)</span>
<span id="cb88-5"><a href="#cb88-5" tabindex="-1"></a>}, <span class="at">simplify =</span> <span class="cn">FALSE</span>)</span>
<span id="cb88-6"><a href="#cb88-6" tabindex="-1"></a></span>
<span id="cb88-7"><a href="#cb88-7" tabindex="-1"></a>results <span class="ot">&lt;-</span> purrr<span class="sc">::</span><span class="fu">list_rbind</span>(results_list)</span></code></pre></div>
<p>This version of the skeleton does not create a <code>one_run()</code> helper function, but instead puts the code from the body of <code>one_run()</code> directly into the <code>expr</code> argument of <code>replicate()</code>. To learn about other ways of repeatedly evaluating the simulation process, see Appendix <a href="A.1-repeating-oneself.html#repeating-oneself">A.1</a>.<a href="4.3-skeleton-of-a-simulation-study.html#fnref8" class="footnote-back">↩︎</a></p></li>
<li id="fn9"><p>If you would prefer the output as a list rather than a stacked dataset, set <code>repeat_and_stack()</code>’s optional argument <code>stack = FALSE</code>.<a href="4.3-skeleton-of-a-simulation-study.html#fnref9" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
<p style="text-align: center;">
<a href="4.2-tidy-modular-simulations.html"><button class="btn btn-default">Previous</button></a>
<a href="4.4-exercises-2.html"><button class="btn btn-default">Next</button></a>
</p>
</div>
</div>


</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

</body>
</html>
